\documentclass{article}

\usepackage{noweb}
\noweboptions{smallcode,longchunks}
\usepackage[a4paper,margin=1in]{geometry}
\usepackage{adjustbox}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{caption}
\usepackage{colortbl}
\usepackage{enumitem}
\usepackage[colorlinks=true]{hyperref}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{tikz}

\newcommand{\hi}[1]{\noindent {\bf #1}}     % Define a handy paragraph opener

\def\nwendcode{\endtrivlist \endgroup}      % Remove noweb page break penalty
\let\nwdocspar=\par

\theoremstyle{definition}                   % Define an "example" environment
\newtheorem{example}{Example}

\definecolor{TableTitle}{rgb}{0.900, 0.900, 0.900}  % Define colors for tables
\definecolor{TableHeader}{rgb}{0.900, 0.900, 0.900}

\captionsetup{labelfont={bf},textfont={bf,it}}
\setlength{\abovecaptionskip}{1mm}
\setlength{\belowcaptionskip}{1mm}

\title{Jargo Storage Interface and Data Model\footnote{
  \url{https://github.com/jargors/Storage-Interface}}}
\author{James J. Pan\\
  \small{\href{mailto:pan-j16@mails.tsinghua.edu.cn}{pan-j16@mails.tsinghua.edu.cn}}}

\begin{document}
\maketitle
\pagestyle{noweb}

\tableofcontents

\section{Introduction}
\label{sec:introduction}
Jargo's storage interface is a data access layer (Figure~\ref{fig:storage}) for
Jargo to record the ground-truth state of ridesharing users (customers and
vehicles) as they evolve over time, and to query analytical metrics about the
state.  The storage engine is Apache
Derby\footnote{\url{https://db.apache.org/derby}}, chosen for its (apparently
rare) ability to defer table and column constraints until the end of a
transaction\footnote{...as specified by the SQL standard!}.  This ability is
needed during some write operations that may temporarily cause the simulation
to be in an invalid state. At all other times, Jargo's data model guarantees
the integrity of the simulation. The storage interface is written in Java so it
can communicate with Derby using JDBC. A listing of the public methods is shown
in Figure~\ref{fig:methods}.  The storage interface is developed using the
Noweb\footnote{\url{https://www.cs.tufts.edu/~nr/noweb/}} literate
programming\footnote{\url{http://literateprogramming.com/}} tool.  This file
({\tt{}src/Storage.nw}) is the source for both the documentation
({\tt{}doc/Storage.tex}) and the Java code ({\tt{}Storage.java})\footnote{See the
{\tt{}Makefile} for build details.}.

\begin{figure}[h]
\centering
\includegraphics[width=150mm]{src/fig/storage-fig}
\caption{Storage interface and data layer within the Jargo stack.}
\label{fig:storage}
\end{figure}

\begin{figure}
\adjustbox{scale=0.85}{
\begin{minipage}[t]{0.4\textwidth}
\hi{Utilities}
\nwfilename{src/Storage.nw}\nwbegincode{1}\sublabel{NW27XAxz-4PbjF-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4PbjF-1}}}\moddef{\code{}Storage\edoc{} public methods~{\nwtagstyle{}\subpageref{NW27XAxz-4PbjF-1}}}\endmoddef\nwalsodefined{\\{NW27XAxz-4PbjF-2}\\{NW27XAxz-4PbjF-3}}\nwused{\\{NW27XAxz-3TAldU-1}}
\LA{}Load data model~{\nwtagstyle{}\subpageref{NW27XAxz-4P4YpK-1}}\RA{}
\LA{}Load backup~{\nwtagstyle{}\subpageref{NW27XAxz-b3Hn1-1}}\RA{}
\LA{}Save backup~{\nwtagstyle{}\subpageref{NW27XAxz-2OKmqF-1}}\RA{}
\LA{}Print SQL driver statistics~{\nwtagstyle{}\subpageref{NW27XAxz-1lVtry-1}}\RA{}
\LA{}Print SQL exception~{\nwtagstyle{}\subpageref{NW27XAxz-31QNBg-1}}\RA{}
\nwendcode{}\nwbegindocs{2}\nwdocspar
\end{minipage}
\begin{minipage}[t]{0.4\textwidth}
\hi{Write Methods}
\nwenddocs{}\nwbegincode{3}\sublabel{NW27XAxz-4PbjF-2}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4PbjF-2}}}\moddef{\code{}Storage\edoc{} public methods~{\nwtagstyle{}\subpageref{NW27XAxz-4PbjF-1}}}\plusendmoddef
\LA{}Add new vertex~{\nwtagstyle{}\subpageref{NW27XAxz-28BJIM-1}}\RA{}
\LA{}Add new edge~{\nwtagstyle{}\subpageref{NW27XAxz-1r65Fb-1}}\RA{}
\LA{}Add new request~{\nwtagstyle{}\subpageref{NW27XAxz-4ISWm4-1}}\RA{}
\LA{}Add new server~{\nwtagstyle{}\subpageref{NW27XAxz-IYVQQ-1}}\RA{}
\LA{}Update edge speed~{\nwtagstyle{}\subpageref{NW27XAxz-3SpUqj-1}}\RA{}
\LA{}Update server route~{\nwtagstyle{}\subpageref{NW27XAxz-4VFddh-1}}\RA{}
\LA{}Update server add to schedule~{\nwtagstyle{}\subpageref{NW27XAxz-y828a-1}}\RA{}
\LA{}Update server remove from schedule~{\nwtagstyle{}\subpageref{NW27XAxz-lMiTm-1}}\RA{}
\nwendcode{}\nwbegindocs{4}\nwdocspar
\end{minipage}
\begin{minipage}[t]{0.4\textwidth}
\hi{Read Methods}
\nwenddocs{}\nwbegincode{5}\sublabel{NW27XAxz-4PbjF-3}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4PbjF-3}}}\moddef{\code{}Storage\edoc{} public methods~{\nwtagstyle{}\subpageref{NW27XAxz-4PbjF-1}}}\plusendmoddef
\LA{}Query ridesharing user~{\nwtagstyle{}\subpageref{NW27XAxz-3isdeu-1}}\RA{}
\LA{}Query request status~{\nwtagstyle{}\subpageref{NW27XAxz-1hFvVm-1}}\RA{}
\LA{}Query queued requests~{\nwtagstyle{}\subpageref{NW27XAxz-3AGrxZ-1}}\RA{}
\LA{}Query all server locations~{\nwtagstyle{}\subpageref{NW27XAxz-rvb17-1}}\RA{}
\LA{}Query active server locations~{\nwtagstyle{}\subpageref{NW27XAxz-3UaQCb-1}}\RA{}
\LA{}Query routes~{\nwtagstyle{}\subpageref{NW27XAxz-1AprqI-1}}\RA{}
\LA{}Query schedules~{\nwtagstyle{}\subpageref{NW27XAxz-3yA8FQ-1}}\RA{}
\LA{}Query current load~{\nwtagstyle{}\subpageref{NW27XAxz-aKbeg-1}}\RA{}
\LA{}Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}\RA{}
\LA{}Query custom statement~{\nwtagstyle{}\subpageref{NW27XAxz-2FtqIZ-1}}\RA{}
\nwendcode{}\nwbegindocs{6}\nwdocspar
\end{minipage}
}
\caption{Storage interface public methods.}
\label{fig:methods}
\end{figure}

\subsection{Motivation}
\label{sec:motivation}
Ridesharing can be formulated as a decision problem where the objective is to
determine the optimal customer-to-vehicle assignments. Optimizing a single
assignment produces a \emph{local optima} whereas optimizing the aggregated
objective over all assigments in the span of a ridesharing scenario produces
the \emph{global optima}. The global optima answers questions that are of
interest to various stakeholders, such as what is the minimum fleet size needed
for an $n$\% assignment rate or what is the maximum profit achievable in a day.

To evaluate the \emph{quality} of a ridesharing algorithm (some might say the
\emph{quality of the solution} produced by the algorithm) is to measure the
value of the objective that the algorithm can achieve over the ridesharing
scenario. A high-quality algorithm achieves near the global optima whereas a
low-quality algorithm does not.  Quality of a ridesharing algorithm is
difficult to evaluate for three reasons.
\begin{enumerate}
\item \hi{Assignment Dependence.} Assignments are not independent of each
other. If a vehicle is initially assigned to a particular customer, it may be
ineligible for some future customer due to capacity and time window
constraints. This dependence means that assignments cannot be evaluated
sequentially in isolation but must be evaluated as part of a broader system.
\item \hi{Stochastic Processes.} Stochastic processes become important over the
span of a scenario.  Travel times in the road network are uncertain due to
traffic and vehicle breakdowns. Travel routes are also uncertain, if the
vehicles are non-autonomous, because human drivers can make mistakes.  If a
vehicle is initially assigned to a customer in an area that is susceptible to
traffic or difficult to navigate, it may be ineligible for some future customer
due to time window constraints. These processes cannot be ignored because they
can affect the downstream assignments.
\item \hi{Real-Time Requests.} A ridesharing algorithm's processing time
affects downstream assignments due to the real-time nature of ridesharing
requests. As a simple example, consider an algorithm that processes requests at
a rate slower than they appear. Over time, later requests may never get
processed even if valid assignments exist for them.
\end{enumerate}

The above items are all features of ridesharing in the real world.  Thus to
evaluate quality, ridesharing algorithms can be tested on actual vehicles and
customers (Figure~\ref{fig:physical}), but this method is expensive, slow to
deploy, and out of reach for most researchers. Controlled studies to determine
the effect of certain parameters, such as presence and absence of traffic, on
algorithm quality are also difficult or impossible to perform. In contrast,
testing algorithms on a simulated environment is inexpensive, fast to deploy,
readily accessible, and controllable. The challenge then becomes to design an
environment that can faithfully reproduce these real-world features. As there
is no ``lag'' in the real world, the environment must also be highly
responsive.

\begin{figure}[h]
\centering
\includegraphics[width=100mm]{src/fig/physical}
\caption{To evaluate quality, ridesharing algorithms can be tested on physical
vehicles and customers, but this method is expensive, slow to deploy, and out
of reach for most researchers.}
\label{fig:physical}
\end{figure}

Jargo is the name of our environment for evaluating the quality of ridesharing
algorithms. It captures assignment dependence by simulating real-time motion of
vehicles and capacity, and it simulates stochastic processes by perturbing
route segment durations and locations. To simulate real-time, it executes a
ridesharing algorithm in parallel alongside new requests so that an algorithm
can be running while requests are arriving. The present document concerns the
storage interface, used by Jargo's simulation engine to read and write data
describing the state of the environment. The storage interface (more precisely
the underlying data model) is responsible for guaranteeing the integrity of the
state, in other words that impossible circumstances in the real world do not
end up in the simulation data. The following is an explanation of how the data
is organized, beginning with a description of physical ridesharing
(\S\ref{sec:ridesharing-systems}), then the mathematical model to describe
physical ridesharing (\S\ref{sec:ridesharing-formulation}), and finally the SQL
schema to store the state data (\S\ref{sec:ridesharing-data-model}).  Those
interested in the implementation code can skip directly to
\S\ref{sec:implementation-overview}.

\subsection{Ridesharing Systems}
\label{sec:ridesharing-systems}
To determine the best way to organize the state data, we first start with
examining real-world ridesharing systems.  Ridesharing involves the
\emph{users} and the \emph{rules} governing their behavior. The users can be
classified into four types, shown in Table~\ref{tab:user-types}.  We use the
term \emph{customer} to refer to both Type 1 and Type 2 users, and the term
\emph{vehicle} to refer to both Type 3 and Type 4 users.  Physical users have
the properties in Table~\ref{tab:user-properties} and obey the rules in
Table~\ref{tab:user-rules}.
\begin{table}[h]
\centering
\small
\caption{Types of ridesharing users.}
\label{tab:user-types}
\begin{tabular}{|l|l|}
\hline
Type   & Description \\
\hline
Type 1 & Single customer traveling alone \\
Type 2 & Group of customers traveling together \\
\hline
Type 3 & Ridesharing vehicle with a predefined final
    destination\footnote{For example a carpooling vehicle.} \\
Type 4 & Taxi-like vehicle continually serving customers without an
    explicit destination of its own\footnote{A Type 4 vehicle could have an
    eventual destination, for example a refueling station; but if the latest
    acceptable arrival time is outside the time span of the ridesharing
    scenario of interest, the destination is not considered. Otherwise, the
    vehicle would be classified as Type 3.}. \\
\hline
\end{tabular}
\caption{Ridesharing user properties.}
\label{tab:user-properties}
\begin{tabular}{|c|p{140mm}|}
\hline
Label & Description \\
\hline
P1 & \hi{Load.} Each user has a non-zero \emph{load}, indicating a
number of needed seats. For Type 1 users the load is 1, indicating they only
need a single seat. For Type 2 users the load exceeds 1. For Type 3 and Type 4
users the load is negative, indicating they have an availability of seats. \\
\hline
P2 & \hi{Origin and Destination.} Each user has an \emph{origin} and a
\emph{destination}, except for Type 4 users that only have an origin.  For Type
1 and Type 2, the origin indicates the initial location of the customer
and the destination indicates the desired final location.  For Type 3, the
origin and destination indicate where the vehicle's ridesharing service begins
and ends.\\
\hline
P3 & \hi{Time Window.} Each user has an \emph{early time} and a
\emph{late time}, together forming the user's \emph{time window}. For a Type 1
or Type 2 customer, the time window gives the desired departure time from the
origin and the desired arrival time at the destination.  For a Type 3 or Type 4
vehicle, the time window gives the time when service begins and the latest time
that service can end. The early time precedes the late time.\\
\hline
\end{tabular}
\caption{Rules bounding user behavior.}
\label{tab:user-rules}
\begin{tabular}{|c|p{140mm}|}
\hline
Label & Description \\
\hline
P4 & \hi{Motion.} Users are bound to a network of roads, for
example the streets of a city. Only vehicles may directly travel along the
roads, whereas customers must be serviced by a vehicle. Both customers and
vehicles may enter the system at any time and anywhere.\\
\hline
P5 & \hi{Pick-ups and Drop-offs.} For a vehicle to service a customer, it
must first travel to the customer's origin to pick up the customer, and then to
the customer's destination to drop off the customer, in that order. The
customer enters the vehicle during the pick-up and exits the vehicle during the
drop-off. These visits must occur within the customer's time window\footnote{We
limit our scope to the typical case where a customer is served by only one
vehicle (no transfers).}.\\
\hline
P6 & \hi{Vehicle Seats.} When a customer enters a vehicle, the customer
occupies a number of seats equal to the customer's load. When it exits the
vehicle, it relinquishes the seats. At no time can the number of occupied seats
exceed the number of available seats in a vehicle.\\
\hline
P7 & \hi{User States.} A customer can be in one of three states at any
time: \emph{waiting} for pick-up; \emph{in-transit} following a pick-up but
before the drop-off; or \emph{arrived} at destination. A vehicle can be either
\emph{in-service} or \emph{out-of-service}.\\
\hline
\end{tabular}
\end{table}

\subsection{Ridesharing Formulation}
\label{sec:ridesharing-formulation}
We can now try to mathematically describe the system.  Users can naturally be
described by a set of values for their P1--P3 properties.  Each vehicle can
also be associated with a sequence of values describing its past and future
motion (P4); a set of values indicating when and where pick-ups and drop-offs
have occurred (P5); and a value to indicate the number of available seats at
any given time (P6). Each customer can be associated with a value indicating
its state (P7). Moreover, the ridesharing setting, namely the road network, can
be described using sets of values indicating coordinates and distances in the
network.

Now that we know what values we have, we can try to organize the data into variables
and constants and write equations to explain the relationships. If we
organize the data into \emph{relations}, we can use selection and projection
when we write the equations. These operations will turn out to be useful for
formalizing certain concepts such as pick-up and drop-off times for a customer
or the cruising and service distance for a vehicle.

\subsubsection*{Relations}
The following briefly overviews the concept of relations and introduces some
notation.
Relations can be defined in terms of \emph{sequences} and \emph{tuples}.
A sequence is an ordered list of elements.
We will write the integer sequence from $i$ to
$j$ as $i..j$. The sequence
$$(a_i)_{i\in 1..n}=a_1,a_2,...,a_{n-1},a_n$$
will be written $a_1..a_n$ or simply $a$ (without any subscript).
The number of elements in $a$ is called the \emph{length}
of $a$ and is expressed as $|a|$.
A copy $b$ of sequence $a$ but with some elements removed is called
a \emph{subsequence}.
Sequence $b$ is called a \emph{substring} of $a$
only if some $k$ exists such that $$b=a_{1+k}..a_{|b|+k},$$
in other words the elements in $b$ form a contiguous subsequence of $a$.
We call
sequence $a$ a \emph{tuple} if each element of $a$ is labeled. A
labeled element is called a \emph{component}.
A function mapping an element based on its position in the tuple to a label
is called a \emph{labeling scheme}.
Each component also has a \emph{domain} from which the component takes its value,
for example the set of real numbers.
A tuple of length $m$ is called an $m$-tuple. A 2-tuple is called a
\emph{pair}.
A tuple definition will be written as its labels surrounded by parentheses with the
domains given. Label names will be written in \texttt{typewriter} script
to avoid confusion with positional indices.

\begin{example}
\label{ex:tuple}
The sequence $a=a_\texttt{x},a_\texttt{y}$
is a 2-tuple with components named \texttt{x} and \texttt{y}.
The labeling
scheme for $a$ maps $1\rightarrow \texttt{x}$ and $2\rightarrow \texttt{y}$, with the
integers $1$ and $2$ referring to the position of the elements. A possible definition for
$a$ could be $a:=(\texttt{x},\texttt{y}),
a_\texttt{x}\in\mathbb{R}, a_\texttt{y}\in\{\textrm{cat},\textrm{dog}\}.$
\end{example}

A set of unique $m$-tuples with the same labeling scheme is called
an \emph{$m$-ary relation}, or simply relation.
Two operators can be applied onto relations\footnote{Our model is not concerned with joins.}.
The \emph{selection operator} $\sigma_P(R)$ is a function that returns a subset
$R'\subseteq R$ such that predicate $P(R'_i)$ is true for each tuple $R'_i\in R'$.
The \emph{projection} operator $\pi_L(R)$ is a function that returns a copy
$R'$ of $R$ such that each tuple $R'_i\in R'$ is distinct, and only components
with a label in set $L$ are included.

Observe that an $m$-tuple is an $m$-ary relation with one element.
The projection operator thus naturally applies to tuples. For instance, see that for
$R=R_\texttt{x},R_\texttt{y}:=(\texttt{x},\texttt{y}),$
the $\texttt{x}$ component is extracted with
$R_\texttt{x}=\pi_\texttt{x}(R)$
and the $\texttt{y}$ component is extracted with
$R_\texttt{y}=\pi_\texttt{y}(R)$.

\subsubsection{Setting}
\label{sec:setting}
Now we begin to assign variables and constants to the ridesharing
system, starting with the setting.

\hi{Time.} Time is considered to be a positive integer $1\leq t\leq H$.  A
\emph{time horizon} $H$ is introduced to bound the system.

Time will occasionally need to be operated on.  Times cannot be added, and only
a later (greater) time can subtract an earlier (lesser) time.  The difference
is called a \emph{duration}, represented by the symbol $\delta$.  Durations can
add and subtract each other to get new durations, and times can also add and
subtract durations to get new times.

\hi{Road Network.}
The road network is considered to be a directed graph $\mathcal{G}(\mathcal{V},\mathcal{E})$.
Vertices in $\mathcal{V}$ represent points along roads in the network.
A function ${V:\mathcal{V}\rightarrow \mathbb{R}^2}$ maps vertices to
$2$-dimensional latitude and longitude coordinates in the real world.
An inverse function can be used to map-match customers and vehicles to vertices.
Edges in $\mathcal{E}$ represent road segments. The pair $(a,b)\in
\mathcal{V}^2, a\neq b$ exists in $\mathcal{E}$ only if physical traffic flows from
$V(a)$ to $V(b)$, and for all $c\in \mathcal{V}\setminus\{a,b\}$ no traffic flows from
$V(a)$ to $V(c)$ and from $V(c)$ to $V(b)$.
A function ${d:\mathcal{E}\rightarrow\mathbb{R}_{>0}}$ maps edges to positive real weights
corresponding to distance along the edge. See that the
shortest-path distances between the pairs among any three vertices satisfies the
triangle inequality.

\begin{figure}[h]
\centering
\includegraphics[width=0.8\textwidth]{src/fig/road}
\caption{Portion of a road network graph showing edges (red lines) and vertices
(blue circles) overlayed on top of Manhattan (QGIS 2.18.16, Bing Aerial).
Vertices do not have to be at an intersection (orange circles, lower right).}
\label{fig:road}
\end{figure}

\hi{Paths.}
A path $p=(p_i)_{i\in 1..n}=p_1..p_n$ is a sequence of $n$ vertices
such that any two adjacent vertices are an edge, or $(p_i,p_{i+1})\in \mathcal{E}$ for
$i\in 1..(n-1)$.
A vertex or edge can appear multiple times in a path.
The \emph{path distance} is
$$\sum_{i=1}^{n-1} d(p_i, p_{i+1}).$$
Path $p$ is a \emph{shortest path} only if it minimizes the distance out of all
possible paths from $p_1$ to $p_n$.
Multiple shortest paths are possible.

\hi{Waypoints.}
Waypoints are used to describe points in time as well as space.
A waypoint is a tuple $(\texttt{t},\texttt{v})$, with the
domain of $\texttt{t}$ as $1..H$ and the domain of $\texttt{v}$ as
$\mathcal{V}$. Waypoints can be labeled in a way that will be
discussed later.

\hi{Routes.}
Routes are formed by a sequence of waypoints. A route
$w=(w_i)_{i\in 1..n}=w_1..w_n=(t_1,v_1)..(t_n,v_n)$
is defined as a sequence of $n$ waypoints such that
$t_1..t_n$ is strictly increasing and $v_1..v_n$ is a path.
%In other words it is a binary relation on time and $\mathcal{V}$.
In the spatial dimension, function
$$D(w)=\sum_{i=1}^{n-1}d(\pi_\texttt{v}(w_i),\pi_\texttt{v}(w_{i+1}))$$
gives the \emph{route distance}, analogous to path distance.
% Abandoned: wordy. Projection $\pi_\texttt{v}(w_i)$ returns the vertex component of waypoint $w_i$.
In the time dimension, function
$$\delta(w)=\pi_\texttt{t}(w_n)-\pi_\texttt{t}(w_1)$$
gives the \emph{route duration}.
%The \emph{distance} of $w$ is $D(\pi_\texttt{v}(w))$.
%The \emph{duration} of $w$ is $t_n$.
Given a time $t$,
\begin{align*}
w_{\leq t}=\textrm{sort}(\sigma_{\texttt{t}\leq t}(w))\quad\textrm{and}\quad
w_{>t}=\textrm{sort}(\sigma_{\texttt{t}>t}(w))
\end{align*}
give the \emph{traveled route} denoted $w_{\leq t}$, and the \emph{remaining
route} denoted $w_{>t}$. As the selection operator imposes no ordering on the resulting
set, a $\textrm{sort}(...)$ function is introduced to
sort a set of waypoints by time in ascending order, returning a sequence.
% From now on, any selection or projection on time is assumed to be sorted
% in this manner.
For two adjacent waypoints $w_i$ and~$w_{i+1}$, function
$$\nu(w_i,w_{i+1})=\frac{d(\pi_\texttt{v}(w_i),\pi_\texttt{v}(w_{i+1}))}
{\pi_\texttt{t}(w_{i+1})-\pi_\texttt{t}(w_i)}$$ gives the
\emph{waypoint rate}, or more intuitively the \emph{speed}.
% The unit of speed depends on the units of $d$ and time and do not have to be
% a physical velocity, such as meters per second.
As $d$ only applies to edges, $\nu$ only applies to adjacent waypoints.
Speeds can be bounded above by a value $\nu^\textrm{max}(v_i,v_{i+1})$ on each edge,
for example to describe road speed limits.
%The speed limit can be different
%on different edges, but to simplify the notation, let $\nu_{max}$ denote the limit for any edge.
%Note that duration $t_n$ and distance $D(\pi_\texttt{v}(w))$ are
%convertible through the speeds along each of the edges.

\subsubsection{Requests and Servers}
\label{sec:requests-and-servers}
Now we define the requests and servers.
The basic entity representing a ridesharing participant is the \emph{user}.  A
user is classified as a \emph{request} if it represents a Type~1 or Type~2
customer, or classified as a \emph{server} if it represents a Type~3 or Type~4
vehicle. As only vehicles can move about (P4), only servers are associated with
routes in order to describe the motions. Later, \emph{schedules} describing
pick-up and drop-off events will be defined on the routes.

\hi{User Relation}
A user $u$ is a 5-tuple defined by
${u:=(\texttt{q},\texttt{e},\texttt{l},\texttt{o},\texttt{d})}$.  The
\texttt{q} component corresponds to the user load; the \texttt{e} and
\texttt{l} components correspond to the user early and late times; the
\texttt{o} and \texttt{d} components correspond to the user origin and
destination.
From P1--P4, the domain of \texttt{q} is the non-zero integers; the domain of \texttt{e} is
$1..(H-1)$ and the domain of \texttt{l} is $(u_\texttt{e}+1)..H$; the domains
of \texttt{o} and \texttt{d} are both $\mathcal{V}$.
For a Type 4 vehicle, the destination can be set to a dummy vertex with edge
weight equal to 0 to every other vertex in the road network.

The set of all users forms the 5-ary relation $\mathcal{U}$, called
the \emph{user relation}.
The set
$\mathcal{U}_\texttt{o}=\pi_\texttt{o}(\mathcal{U})$ contains all origins and
$\mathcal{U}_\texttt{d}=\pi_\texttt{d}(\mathcal{U})$ contains all destinations.
From P1, a user can be classified as either a request or a server based on its load.

From now on as a convenience, the notation $d_u$ will be used to denote the distance of the
shortest path from $u_\texttt{o}$ to $u_\texttt{d}$ on graph $\mathcal{G}$, and
the notation $\delta_u$ will be used to denote the shortest travel duration
along $d_u$ using the speed limits $\nu^\textrm{max}$ along the shortest-path edges.

\hi{Requests.}
A request represents a Type 1 or Type 2 customer.
According to P1,
relation $\mathcal{R}\subseteq\mathcal{U}$,
$$\mathcal{R}=\sigma_{\texttt{q}>0}(\mathcal{U}),$$
% Abandoned: $$\mathcal{R}=\{r\in \mathcal{U}\mid r_\texttt{q}>0\},$$
forms the set of all requests by taking users with positive loads. The set
$\mathcal{R}_\texttt{o}=\pi_\texttt{o}(\mathcal{R})$ is the set of all request origins and
$\mathcal{R}_\texttt{d}=\pi_\texttt{d}(\mathcal{R})$ is the set of all request destinations.
%Abandoned: "corresponding" vertices
%Abandoned: Vertex $v$ is a \emph{pickup} if $v\in \mathcal{R}_o$ and it is a
%\emph{dropoff} if $v\in \mathcal{R}_d$.

\hi{Servers.}
Likewise, a server represents a Type 3 or Type 4 vehicle.
From P1, the relation $\mathcal{S}=\mathcal{U}\setminus\mathcal{R}$, or
$$\mathcal{S}=\sigma_{\texttt{q}<0}(\mathcal{U}),$$
% Abandoned: $$\mathcal{S}=\{s\in \mathcal{U}\mid s_\texttt{q}<0\},$$
forms the set of all servers. The set
$\mathcal{S}_\texttt{o}=\pi_\texttt{o}(\mathcal{S})$ is the set of all server origins and
$\mathcal{S}_\texttt{d}=\pi_\texttt{d}(\mathcal{S})$ is the set of all server destinations.
%Abandoned: The vehicle has a speed $\nu(a,b)$ along edge $(a,b)$. For
%simplicity, denote the speed as $\nu$ for all vehicles and all edges.

\hi{Routes and Schedules}
To encode vehicle motions, each server $s\in\mathcal{S}$ is associated with a
route and a schedule.  A server's route is a representation of the corresponding
vehicle's motion through the road network while a server's schedule
encodes the times and locations of customer pick-ups and drop-offs.
The schedule describes the events along the route and not any new motion,
therefore it is a subsequence of the server's route.

\hi{Server Routes.}
Let $w$ be the route for server $s$. As time
advances, the traveled route $w_{\leq t}$ encodes the server's past
motion while the remaining route $w_{>t}$ encodes the future motion.
From P2 and P3, the route is subject to two rules:
\begin{enumerate}
\item[R1.] The time component of the first waypoint equals the server's early time,
  and the time component of the last waypoint is not greater than the server's late time,
  or $\pi_\texttt{t}(w_1)=s_\texttt{e}$ and $\pi_\texttt{t}(w_{|w|})\leq s_\texttt{l}$;
\item[R2.] The vertex components of the first and last waypoints equal the
  server's origin and destination respectively, or
  $\pi_\texttt{v}(w_1)=s_\texttt{o}$ and $\pi_\texttt{v}(w_{|w|})=s_\texttt{d}$.
\end{enumerate}

\hi{Server Schedules.}
A server's schedule
$$b=(b_j)_{j\in 1..m}=(w_{i_j})_{j\in 1..m}=(t_{i_1},v_{i_1})..(t_{i_m},v_{i_m})$$
is a subsequence of the server's route $w$, with $m\leq |w|$ waypoints.
First:
\begin{enumerate}
\item[R3.] The first and last waypoints $b_1$ and $b_m$ equal the first and last
waypoints of $w$, or ${b_1=w_1}$ and ${b_m=w_{|w|}}$.
\end{enumerate}
This rule will help later when defining departure and arrival times.
Second, from P5:
\begin{enumerate}
\item[R4.] For each waypoint $b_j$ for $j\in 2..(m-1)$, the vertex component is either a
request origin or request destination, or $\pi_\texttt{v}(b_j)\in
\mathcal{R}_\texttt{o}\cup\mathcal{R}_\texttt{d}$.
\end{enumerate}
In other words, each entry or exit must occur at a customer origin or destination.

A schedule formalizes the notion of shared travel with other users, as
multiple entries and exits can overlap within the same server route.
At time $t$, the \emph{traveled schedule} denoted $b_{\leq t}$ encodes the past entries and exits and is given by
$\sigma_{\texttt{t}\leq t}(b)$. Likewise, the \emph{remaining schedule} denoted
$b_{>t}$ encodes the future entries and exits and is given by $\sigma_{\texttt{t}>t}(b)$.

\hi{Schedule Labels.}
Each waypoint in schedule $b$ has a set of labels in order to identify which
customers are entering and exiting the vehicle at the waypoint's time and location.
A labeling scheme can be applied to $b$ to determine each of the labels. The
set of all possible labels depends on the locations of the waypoints. Let
$$\mathcal{R}'=\sigma_{\texttt{o}\in\pi_\texttt{v}(b)\lor \texttt{d}\in\pi_\texttt{v}(b)}(\mathcal{R})$$
%Abandoned: $$\mathcal{R}'=\{r\in \mathcal{R}\mid
%     r_\texttt{o}\in\pi_\texttt{v}(b)\vee r_\texttt{d}\in\pi_\texttt{v}(b)\}$$
give the set of requests whose origin or destination is found
in at least one waypoint in $b$. The labeling scheme
\begin{equation*}
L:b\rightarrow \mathbb{P}(\mathcal{R}'\cup\{s\})
\end{equation*}
maps elements of $b$ to elements of the power set of $\mathcal{R}'\cup\{s\}$.
By using the power set $\mathbb{P}$,
a waypoint can have multiple labels, representing the case where multiple customers
enter or exit the vehicle at the waypoint.
The labeling scheme is subject to the following labeling rules:
\begin{enumerate}
\item[R5.] No waypoint can be labeled with $r\in\mathcal{R}'$ if a schedule for another server
already contains waypoints labeled with $r$;
\item[R6.] A waypoint $b_j\in b$ can be labeled with $r$ only if
$\pi_\texttt{v}(b_j)=r_\texttt{o}$ or $\pi_\texttt{v}(b_j)=r_\texttt{d}$;
\item[R7.] If $b_j$ is to be labeled with $r$ and $\pi_\texttt{v}(b_j)=r_\texttt{o}$, then
a second waypoint $b_{j'}$ such that $j'>j$ and
$\pi_\texttt{v}(b_{j'})=r_\texttt{d}$ must also be labeled with $r$;
\item[R8.] The time components of $b_j$ and $b_{j'}$ must be within request $r$'s time window,
formally $r_\texttt{e}\leq \pi_\texttt{t}(b_j)$ and $\pi_\texttt{t}(b_{j'})\leq r_\texttt{l}$;
\item[R9.] The number of waypoints labeled with $r$ must be exactly 0 or 2;
\item[R10.] The first and last waypoints must contain the schedule's server $s$
in their labels, and no other waypoint can be labeled with $s$.
\end{enumerate}
Rules R5--R9 express P5.  Rule R10 can be interpreted to mean that a vehicle
must ``serve itself'' at its own origin and destination.  This last rule
helps to define later concepts.

\hi{Server Relation}
By combining the routes, schedules, and labels into
a set of $(\texttt{s},\texttt{t},\texttt{v},\texttt{L})$ tuples, a
4-ary relation $\mathcal{X}$ can be formed. This relation is called the
\emph{server relation} and as will be shown soon, it is the basis for computing many common ridesharing metrics.
Each tuple associates the waypoint in the \texttt{t} and \texttt{v} components with the server
in the \texttt{s} component, along with the labels in the \texttt{L} component.
% The domain of $\texttt{s}$ is $\mathcal{S}$; the domain of $\texttt{t}$ is
% $1..H$; the domain of $\texttt{v}$ is $\mathcal{V}$; the domain of $\texttt{L}$
% is the power set $\mathbb{P}(\mathcal{U})$.

A server's route can be recovered by extracting \texttt{t} and \texttt{v}
components and sorting by time, or formally for a given server $s$, its route
is given by
$$W(\mathcal{X},s)=\textrm{sort}(\pi_{\texttt{t},\texttt{v}}(\sigma_{\texttt{s}=s}(\mathcal{X}))).$$
Similarly, a server's schedule can be recovered by
extracting only those waypoints that are labeled, formally
$$B(\mathcal{X},s)=\textrm{sort}(\pi_{\texttt{t},\texttt{v}}(\sigma_{\texttt{s}=s\land |\texttt{L}|>0}(\mathcal{X}))).$$

The server relation can be used to define the remaining physical concepts, P6 and P7.

\hi{Request Status.}
Given a request $r$, the function
\begin{equation}
\label{eq:status}
\textrm{status}(\mathcal{X},r,t)=|\sigma_{\texttt{t}\leq t\land
r\in\texttt{L}}(\mathcal{X})|
\end{equation}
gives the count of the tuples labeled with $r$
before or on a given time. From the labeling rules, the count can be only 0, 1,
or 2. See that these counts correspond to request waiting, in-transit, and arrived states
from P7, respectively.

Given a server $s$, knowing the in-transit requests for $s$ can be useful for
pricing and other rider-related
metrics. %~\cite{DBLP:conf/sigmod/ChengX017,DBLP:conf/dexa/ShiLZG17,DBLP:conf/ijcai/SantosX13}.
These requests can be easily found by
$$\mathcal{Q}(\mathcal{X},s,t)=\{r\in\mathcal{R}\mid\textrm{status}(\mathcal{X},r,t)=1
\land\pi_\texttt{s}(\sigma_{r\in\texttt{L}}(\mathcal{X}))=s\}.$$

\hi{Load Burden.}
The \emph{load burden} on $s$ can be computed using the in-transit requests by
\begin{equation}
\label{eq:load}
Q(\mathcal{X},s,t)=\sum_{r\in\mathcal{Q}(\mathcal{X},s,t)}r_\texttt{q}.
\end{equation}
From P6, server routes are subject to the additional rule:
\begin{enumerate}
\item[R11.] $Q(\mathcal{X},s,t)\leq -s_\texttt{q}$ must be true for all $s$ and $t$.
\end{enumerate}

\subsubsection{Ridesharing Metrics}
\label{sec:ridesharing-metrics}
As a benefit from using relations, a variety of metrics can now be measured by
simple operations on $\mathcal{U}$ and $\mathcal{X}$.  The following lists
common metrics found in existing ridesharing studies, but others may be possible.

\hi{Assignments.}
Server $s$ is said to be \emph{assigned to} request $r$ at time $t$ only if
$\textrm{status}(\mathcal{X},r,t)=2$. That is, the request's status is arrived at time $t$.
The set of $(s,r)$ pairs
where this property is true is called the set of \emph{assignments}, formally
\begin{equation}
\label{eq:assignments}
\textit{assignments }A(\mathcal{X},t)=
\{(s,r)\in\mathcal{S}\times \mathcal{R} \mid \textrm{status}(\mathcal{X},r,t)=2\}.
\end{equation}
Using the assignments,
\begin{align}
\label{eq:assigned-requests}
\textit{assigned requests }R^\textrm{ok}(\mathcal{X},t)&=\pi_\texttt{r}(A(\mathcal{X},t))\textrm{, and}\\
\label{eq:unassigned-requests}
\textit{unassigned requests }R^\textrm{ko}(\mathcal{X},t)&=\mathcal{R}\setminus\mathcal{R}^\textrm{ok}(\mathcal{X},t).
\end{align}
The server assigned to $r$ can be obtained with
\begin{equation}
S(\mathcal{X},r,t)=\{s\in\mathcal{S}\mid\textrm{status}(\mathcal{X},r,t)=2\},
\end{equation}
guaranteed to return only one server due to R5.
Likewise, the set of requests assigned to $s$ can be obtained with
\begin{equation}
R(\mathcal{X},s,t)=\{r\in\mathcal{R}\mid\textrm{status}(\mathcal{X},r,t)=2\}.
\end{equation}

\hi{Service rate.}
The \emph{service rate} is the number of assigned requests over the number of all requests, or
\begin{equation}
\label{eq:service-rate}
\textit{service rate }\mu(\mathcal{X},t)=\frac{|R^\textrm{ok}(\mathcal{X},t)|}{|\mathcal{R}|}.
\end{equation}

\hi{Distances.}
The \emph{base distance} is the sum of the shortest-path distances for all users, or
\begin{equation}
\label{eq:base-distance}
\textit{base distance }D^\textrm{base}(\mathcal{U})=\sum_{u\in U}d_u.
\end{equation}
The \emph{travel distance} for one server $s$ is the distance of its route,
$D(W(\mathcal{X},s))$,
and the \emph{travel duration} can be found with
$\delta(W(\mathcal{X},s))$.

For a server with route $w$, travel distance $D(w)$ can be partitioned into
\emph{cruising distance} $D_0(w)$ and
\emph{service distance} $D_1(w)$.
The cruising distance sums the distance along portions where the load burden is zero.
The service distance sums the distance along portions of $w$ where the
load burden is non-zero.
Formally, partition $w$ into a set of substrings $\Omega(w)$ such that each waypoint
in $w$ is a member of exactly one substring and that for all substrings $\omega\in \Omega$,
\begin{align}
\label{eq:slack}\textrm{either }Q(\mathcal{X},s,t)&=0\textrm{ is true for all }t\in \pi_\texttt{t}(\omega),\\
\label{eq:block}\textrm{or }Q(\mathcal{X},s,t)&>0\textrm{ is true for all }t\in \pi_\texttt{t}(\omega).
\end{align}
%Observe that Eqs.~\ref{eq:slack}~and~\ref{eq:block}
%formalize concepts similar to the intuitive
%\emph{slack periods} and \emph{schedule blocks} in~\cite{jaw:1986}.
The equations can be used to partition $\Omega(w)$ into two subsets,
\begin{align*}
\Omega_0(w)&=\{\omega\in \Omega(w)\mid \omega\textrm{ satisfies Eq.~\ref{eq:slack}}\}\textrm{ and }\\
\Omega_1(w)&=\{\omega\in \Omega(w)\mid \omega\textrm{ satisfies Eq.~\ref{eq:block}}\}.
\end{align*}
The distances of each of the substrings in each subset can be summed
to get
$$D_0(w)=\sum_{\omega\in \Omega_0(w)} D(\omega)\quad\textrm{and}\quad
  D_1(w)=\sum_{\omega\in \Omega_1(w)} D(\omega).$$
These distances are written as
\begin{align}
\label{eq:cruising-distance}
\textit{cruising distance }D^\textrm{cruise} (\mathcal{X},s)&=D_0(W(\mathcal{X},s)),\textrm{ and}\\
\label{eq:service-distance}
\textit{service distance } D^\textrm{service}(\mathcal{X},s)&=D_1(W(\mathcal{X},s)).
\end{align}

\hi{Detours and Delays.}
In physical terms, the \emph{detour route} for a customer is the portion of a vehicle's
route between when it visits the customer's origin and destination. Formally, let
%\item $d_r$ be the distance of the shortest path from $r_\texttt{o}$ to $r_\texttt{d}$;
$w=W(\mathcal{X},S(\mathcal{X},r,H))$ be the route of the server assigned to $r$.
The detour route $\Delta W(\mathcal{X},r)$ is an $m$-length substring of $w$ given by
$\Delta W(\mathcal{X},r)=w_{1+k}..w_{m+k}$ such that for some $k$,
\begin{itemize}
\item $\Delta W(\mathcal{X},r)$ begins at $r_\texttt{o}$, or $\pi_\texttt{v}(w_{1+k})=r_\texttt{o}$,
\item $\Delta W(\mathcal{X},r)$ ends at $r_\texttt{d}$, or $\pi_\texttt{v}(w_{m+k})=r_\texttt{d}$, and
\item the first and last waypoints of $\Delta W(\mathcal{X},r)$ are labeled with $r$, or $r\in\pi_\texttt{L}(w_{1+k})\cap\pi_\texttt{L}(w_{m+k})$.
\end{itemize}
Observe that due to the labeling rules, only one value of $k$ can satisfy these
conditions. The first and last waypoints $w_{1+k}$ and $w_{m+k}$ can be found by
the equations on users,
\begin{align}
\label{eq:pickup}
\textrm{pickup}(\mathcal{X},u)&=\pi_{\texttt{t},\texttt{v}}(\sigma_{\texttt{v}=u_\texttt{o}\land u\in\texttt{L}}(\mathcal{X}))\textrm{, and}\\
\label{eq:dropoff}
\textrm{dropoff}(\mathcal{X},u)&=\pi_{\texttt{t},\texttt{v}}(\sigma_{\texttt{v}=u_\texttt{d}\land u\in\texttt{L}}(\mathcal{X})),
\end{align}
by substituting $r$ for $u$.
Note that if a server is substituted for $u$, these equations give the start and
end waypoints of the server's route due to R3 and R10.
These two equations can also be used to give two times for
any user,
\begin{align}
\label{eq:departure-time}
\textit{departure time }t^\textrm{depart}(\mathcal{X},u)&=\pi_\texttt{t}(\textrm{pickup}(\mathcal{X},u))\textrm{, and}\\
\label{eq:arrival-time}
\textit{arrival time }t^\textrm{arrive}(\mathcal{X},u)&=\pi_\texttt{t}(\textrm{dropoff}(\mathcal{X},u)).
\end{align}
In the real world, the time until a vehicle picks up a customer can be of interest.
This \emph{pick-up delay} can be found with
\begin{equation}
\label{eq:pick-up delay}
\textit{pick-up delay }\delta^\textrm{pickup}(\mathcal{X},r)=\pi_\texttt{t}(\textrm{pickup}(\mathcal{X},r))-r_\texttt{e}.
\end{equation}

The detour route $\Delta W(\mathcal{X},r)$ can only apply to assigned requests. If
a detour route exists, then
the \emph{transit} distance and duration are
\begin{align}
\label{eq:transit-distance}
\textit{transit distance }D^\textrm{transit}(\mathcal{X},r)&=D(\Delta W(\mathcal{X},r))\textrm{, and}\\
\label{eq:transit-duration}
\textit{transit duration }\delta^\textrm{transit}(\mathcal{X},r)&=\delta(\Delta W(\mathcal{X},r)).
\end{align}
Similarly, the \emph{detour} distance and duration are
\begin{align}
\label{eq:detour-distance}
\textit{detour distance }D^\textrm{detour}(\mathcal{X},r)&=D^\textrm{transit}(\mathcal{X},r)-d_r\textrm{, and}\\
\label{eq:detour-duration}
\textit{detour duration }\delta^\textrm{detour}(\mathcal{X},r)&=\delta^\textrm{transit}(\mathcal{X},r)-\delta_r.
\end{align}
Finally, the \emph{travel duration} is the sum of the pick-up and transit durations,
\begin{equation}
\label{eq:travel-duration}
\textit{travel duration }\delta^\textrm{travel}(\mathcal{X},r)=\delta^\textrm{pickup}(\mathcal{X},r)+\delta^\textrm{transit}(\mathcal{X},r)
=\pi_\texttt{t}(\textrm{dropoff}(\mathcal{X},r))-r_\texttt{e}.
\end{equation}

\hi{Utilization.}
The percentage of servers that are assigned to at least one request is given by
\begin{equation}
\label{eq:server-utilization}
\textit{server utilization }\rho^\textrm{server}(\mathcal{X})=\frac{|\pi_\texttt{s}(\mathcal{A}(\mathcal{X}))|}{|\mathcal{S}|}.
\end{equation}
The distance utilization is
\begin{equation}
\label{eq:distance-utilization}
\textit{distance utilization }\rho^\textrm{distance}(\mathcal{X})=
\frac{\sum_{s\in\mathcal{S}}D^\textrm{service}(\mathcal{X},s)}
{\sum_{s\in\mathcal{S}}D(\mathcal{X},s)}.
\end{equation}

\subsection{Ridesharing Data Model}
\label{sec:ridesharing-data-model}
The simple constraints allowed by the SQL standard\footnote{ISO/IEC 9075}
(\texttt{CHECK}, \texttt{UNIQUE}, \texttt{NOT NULL}, \texttt{FOREIGN KEY}) are
unable to express the complex ridesharing properties
(\S\ref{sec:ridesharing-systems}, P1--P7) and rules
(\S\ref{sec:ridesharing-formulation}, R1--R11), and consequently a direct
``translation'' of the ridesharing relations into SQL is not possible without
either making code extensions to SQL or reorganizing the relational ridesharing
model.

The following schema can be implemented entirely in standard SQL without any
code extensions while staying faithful to the model.  In this schema,
\textit{tables} capture the descriptive elements of the model and
\textit{views} express the analytical measures.  Tables are further organized
into \emph{property}, \emph{solution}, and \emph{constraint} tables.  Property
tables store the road network $\mathcal{G}$ (\S\ref{sec:setting}) and the user
relation $\mathcal{U}$ (\S\ref{sec:requests-and-servers}).  Solution tables
store the server relation $\mathcal{X}$ (\S\ref{sec:requests-and-servers}).
Constraint tables store copies of data from other tables for validation
purposes.  The views are mostly defined on the constraint tables.

Diagrams of the SQL tables are included in this section. In the diagrams,
primary keys are indicated in italics. Elsewhere, column names are
distinguished by \textsf{sans serif} script.  Parentheses are used to logically
group together columns.  A parent table next to a group of columns indicates
foreign key. In SQL, foreign keys must reference their values from the primary
key of the parent table. Many of the table diagrams contain duplicate columns
(for example, \textsf{sid} shows up three times in Table W).  These duplicates
are included for illustrating the foreign key relationships, but in practice
the duplicates are implemented as single columns participating in multiple
foreign keys.

As a feature of literate programming, actual SQL statements used by the storage
interface are also shown. References in the text to named constraints in the
SQL will be written in {\tt{}typewriter} script.

\subsubsection{Table V and E (Road Network Tables)}
Each vertex $v\in\mathcal{V}$ is stored in Table V along with its coordinates
$V(v)$ while each edge $(a,b)\in\mathcal{E}$ is stored in Table E along with
its weight $d(a,b)$ and speed limit $\nu^\textrm{max}(a,b)$.  Table V thus has
three columns, storing $v$ in primary key column \textsf{v} ({\tt{}P1}) and its
coordinates in column \textsf{lng} and \textsf{lat}.  Likewise, Table E has
four columns, storing $a$ and $b$ in column \textsf{v1} and \textsf{v2},
$d(a,b)$ in column \textsf{dd}, and $\nu^\textrm{max}(a,b)$ in column
\textsf{nu}.  The four columns together form the primary key ({\tt{}P2}) in order
to be referenced by later tables.  Foreign keys on \textsf{v1} ({\tt{}F1}) and
\textsf{v2} ({\tt{}F2}) referencing Table V validate that $a$ and $b$ are actual
vertices.
\begin{table}[h]
\centering
\small
\begin{tabular}{|c|l|}
\hline
\rowcolor{TableTitle}
\multicolumn{2}{|c|}{Table V (Vertices)}\\
\hline
\rowcolor{TableHeader}
Column & Description\\
\hline
\textit{v} & Vertex $v\in\mathcal{V}$\\
\hline
lng & \multirow{2}{*}{Vertex coordinate $V(v)$}\\
lat & \\
\hline
\end{tabular}
\begin{tabular}{|c|c|l|}
\hline
\rowcolor{TableTitle}
\multicolumn{3}{|c|}{Table E (Edges)}\\
\hline
\rowcolor{TableHeader}
Column & Parent & Description\\
\hline
\textit{v1} & Table V & \multirow{2}{*}{Edge $(a, b)\in\mathcal{E}$} \\
\cline{2-2}
\textit{v2} & Table V & \\
\hline
\textit{dd} & & Weight $d(a,b)$\\
\hline
\textit{nu} & & Max. speed $\nu^\textrm{max}(a,b)$\\
\hline
\end{tabular}
\end{table}
\nwenddocs{}\nwbegincode{7}\sublabel{NW27XAxz-RzwV3-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-RzwV3-1}}}\moddef{Create Table V statement~{\nwtagstyle{}\subpageref{NW27XAxz-RzwV3-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE V ("
  + "v   int  CONSTRAINT P1 PRIMARY KEY,"
  + "lng int  CONSTRAINT C1 NOT NULL,"
  + "lat int  CONSTRAINT C2 NOT NULL,"
  + "CONSTRAINT C3 CHECK (lng BETWEEN -1800000000 AND 1800000000),"
  + "CONSTRAINT C4 CHECK (lat BETWEEN  -900000000 AND  900000000)"
  + ")"
\nwendcode{}\nwbegindocs{8}We consider vertex 0 to be a dummy vertex where any edged formed by 0 has no
weight. To implement the dummy vertex, we add a constraint ({\tt{}C11}) that
\textsf{dd} must be 0 if either \textsf{v1} or \textsf{v2} is 0.
\nwenddocs{}\nwbegincode{9}\sublabel{NW27XAxz-2WHSWQ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2WHSWQ-1}}}\moddef{Create Table E statement~{\nwtagstyle{}\subpageref{NW27XAxz-2WHSWQ-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE E ("
  + "v1  int  CONSTRAINT C5 NOT NULL,"
  + "v2  int  CONSTRAINT C6 NOT NULL,"
  + "dd  int  CONSTRAINT C7 NOT NULL,"
  + "nu  int  CONSTRAINT C8 NOT NULL,"
  + "CONSTRAINT F1 FOREIGN KEY (v1) REFERENCES V (v),"
  + "CONSTRAINT F2 FOREIGN KEY (v2) REFERENCES V (v),"
  + "CONSTRAINT P2 PRIMARY KEY (v1, v2, dd, nu),"
  + "CONSTRAINT C9 CHECK (nu >= 0),"
  + "CONSTRAINT C10 CHECK (v1 <> v2),"
  + "CONSTRAINT C11 CHECK ("
  + "  CASE WHEN v1 = 0 OR v2 = 0"
  + "    THEN dd = 0"
  + "    ELSE dd > 0"
  + "  END"
  + ")"
  + ")"
\nwendcode{}\nwbegindocs{10}\nwdocspar

\subsubsection{Table UQ, UE, UL, UO, UD, and UB (User Tables)}
To allow other tables to reference specific user components, the user relation
is partitioned into five 2-column tables, UQ, UE, UL, UO, and UD, by taking
projections on the respective \texttt{q}, \texttt{e}, \texttt{l}, \texttt{o},
and \texttt{d} components. Each row is a key-value pair, storing a unique
\textsf{uid} for user identification as the key alongside the component value,
and each row is also its own primary key.  A sixth table UB is introduced to
store base costs for computing $D^\textrm{base}$ and $\rho^\textrm{distance}$
(\S\ref{sec:ridesharing-metrics}).  Table UO and UD can be referenced to Table
V to validate against property P2 and rule P4.
\begin{table}[h]
\centering
\small
\begin{tabular}{|c|c|l|}
\hline
\rowcolor{TableTitle}
\multicolumn{3}{|c|}{User Tables}\\
\hline
\rowcolor{TableHeader}
Table & Columns & Description \\
\hline
UQ & \textit{uid}, \textit{val} & User load $u_\texttt{q}$ \\
UE & \textit{uid}, \textit{val} & User early time $u_\texttt{e}$ \\
UL & \textit{uid}, \textit{val} & User late time $u_\texttt{l}$ \\
UO & \textit{uid}, \textit{val} & User origin $u_\texttt{o}$ \\
UD & \textit{uid}, \textit{val} & User destination $u_\texttt{d}$ \\
UB & \textit{uid}, \textit{val} & User base cost $d_u$ \\
\hline
\end{tabular}
\end{table}
\nwenddocs{}\nwbegincode{11}\sublabel{NW27XAxz-llmAG-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-llmAG-1}}}\moddef{Create Table UQ statement~{\nwtagstyle{}\subpageref{NW27XAxz-llmAG-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE UQ ("
  + "uid int  CONSTRAINT C12 NOT NULL,"
  + "uq  int  CONSTRAINT C13 NOT NULL,"
  + "CONSTRAINT C14 UNIQUE (uid),"
  + "CONSTRAINT C15 CHECK (uq != 0),"
  + "CONSTRAINT P3 PRIMARY KEY (uid, uq)"
  + ")"
\nwendcode{}\nwbegindocs{12}\nwdocspar
\nwenddocs{}\nwbegincode{13}\sublabel{NW27XAxz-sBCgz-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-sBCgz-1}}}\moddef{Create Table UE statement~{\nwtagstyle{}\subpageref{NW27XAxz-sBCgz-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE UE ("
  + "uid int  CONSTRAINT C16 NOT NULL,"
  + "ue  int  CONSTRAINT C17 NOT NULL,"
  + "CONSTRAINT C18 CHECK (ue BETWEEN 0 AND 86400000),"
  + "CONSTRAINT C19 UNIQUE (uid),"
  + "CONSTRAINT P4 PRIMARY KEY (uid, ue)"
  + ")"
\nwendcode{}\nwbegindocs{14}\nwdocspar
\nwenddocs{}\nwbegincode{15}\sublabel{NW27XAxz-3Q8NSk-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3Q8NSk-1}}}\moddef{Create Table UL statement~{\nwtagstyle{}\subpageref{NW27XAxz-3Q8NSk-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE UL ("
  + "uid int  CONSTRAINT C20 NOT NULL,"
  + "ul  int  CONSTRAINT C21 NOT NULL,"
  + "CONSTRAINT C22 UNIQUE (uid),"
  + "CONSTRAINT C23 CHECK (ul BETWEEN 0 AND 86400000),"
  + "CONSTRAINT P5 PRIMARY KEY (uid, ul)"
  + ")"
\nwendcode{}\nwbegindocs{16}\nwdocspar
\nwenddocs{}\nwbegincode{17}\sublabel{NW27XAxz-qCW00-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-qCW00-1}}}\moddef{Create Table UO statement~{\nwtagstyle{}\subpageref{NW27XAxz-qCW00-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE UO ("
  + "uid int  CONSTRAINT C24 NOT NULL,"
  + "uo  int  CONSTRAINT C25 NOT NULL,"
  + "CONSTRAINT F3 FOREIGN KEY (uo) REFERENCES V (v),"
  + "CONSTRAINT C26 UNIQUE (uid),"
  + "CONSTRAINT P6 PRIMARY KEY (uid, uo)"
  + ")"
\nwendcode{}\nwbegindocs{18}\nwdocspar
\nwenddocs{}\nwbegincode{19}\sublabel{NW27XAxz-1OVMyH-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1OVMyH-1}}}\moddef{Create Table UD statement~{\nwtagstyle{}\subpageref{NW27XAxz-1OVMyH-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE UD ("
  + "uid int  CONSTRAINT C27 NOT NULL,"
  + "ud  int  CONSTRAINT C28 NOT NULL,"
  + "CONSTRAINT F4 FOREIGN KEY (ud) REFERENCES V (v),"
  + "CONSTRAINT C29 UNIQUE (uid),"
  + "CONSTRAINT P7 PRIMARY KEY (uid, ud)"
  + ")"
\nwendcode{}\nwbegindocs{20}\nwdocspar
\nwenddocs{}\nwbegincode{21}\sublabel{NW27XAxz-3QSM5L-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3QSM5L-1}}}\moddef{Create Table UB statement~{\nwtagstyle{}\subpageref{NW27XAxz-3QSM5L-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE UB ("
  + "uid int  CONSTRAINT C30 NOT NULL,"
  + "ub  int  CONSTRAINT C31 NOT NULL,"
  + "CONSTRAINT C32 CHECK (ub >= 0),"
  + "CONSTRAINT C33 UNIQUE (uid),"
  + "CONSTRAINT P8 PRIMARY KEY (uid, ub)"
  + ")"
\nwendcode{}\nwbegindocs{22}\nwdocspar

\subsubsection{Table W (Routes Table)}
Table W has eight columns, \textsf{sid}, \textsf{se}, \textsf{t1}, \textsf{v1},
\textsf{t2}, \textsf{v2}, \textsf{dd}, and \textsf{nu}.  The \texttt{s},
\texttt{t}, and \texttt{v} components of $\mathcal{X}$ are stored in the
(\textsf{sid}, \textsf{t2}, \textsf{v2}) columns.  By definition, the sequence
of vertices in a route must form a path and the speed of adjacent waypoints
cannot exceed the limit $\nu^\textrm{max}$.  To enforce these rules, the
\emph{predecessor} waypoint is stored in the (\textsf{sid}, \textsf{t1},
\textsf{v1}) columns.  The (\textsf{v1}, \textsf{v2}) columns can thus identify
an edge. Columns \textsf{dd} and \textsf{nu} are added to store the weight and
speed limit on the edge, and (\textsf{v1}, \textsf{v2}, \textsf{dd},
\textsf{nu}) is referenced by foreign key to Table E ({\tt{}F19}) to validate the
values. A row-level \texttt{CHECK} constraint ({\tt{}C56}) validates that the
speed $\textsf{dd}/(\textsf{t2}-\textsf{t1})$ is not greater than the maximum
free-flow speed, \textsf{nu}.
\begin{table}[h]
\centering
\small
\begin{tabular}{|c|c|l|}
\hline
\rowcolor{TableTitle}
\multicolumn{3}{|c|}{Table W (Routes)} \\
\hline
\rowcolor{TableHeader}
Col. & Parent & Description \\
\hline
\textit{sid} & Table S & Identification for server $s\in\mathcal{S}$ \\
\hline
sid & \multirow{2}{*}{Table UE} & \multirow{2}{*}{Server early time $s_\texttt{e}$} \\
se & & \\
\hline
sid & \multirow{3}{*}{Table W} & \multirow{3}{*}{Predecessor waypoint $w_{i-1}$} \\
t1 & & \\
v1 & & \\
\hline
\textit{t2} & & \multirow{2}{*}{Waypoint $w_i$} \\
\textit{v2} & & \\
\hline
v1 & \multirow{4}{*}{Table E} & \multirow{4}{*}{Properties of edge $(\pi_\texttt{v}(w_{i-1}),\pi_\texttt{v}(w_i))$} \\
v2 & & \\
dd & & \\
nu & & \\
\hline
\end{tabular}
\end{table}
The below items are easily implemented in SQL and establish that each
(\textsf{sid}, \textsf{t1}, \textsf{v1}) is indeed the predecessor to
(\textsf{sid}, \textsf{t2}, \textsf{v2}) in the same row:
\begin{enumerate}
\item The predecessor (\textsf{sid}, \textsf{t1}, \textsf{v1}) must reference
an existing waypoint (\textsf{sid}, \textsf{t2}, \textsf{v2}) from the table
({\tt{}F20});
\item Out of all rows, (\textsf{sid}, \textsf{t1}) must be unique and
(\textsf{sid}, \textsf{t2}) must be unique ({\tt{}C54}, {\tt{}C55});
\item Column \textsf{t2} and \textsf{v2} cannot be null ({\tt{}C52}, {\tt{}C53});
\item Unless \textsf{t2} is equal to the server's early time, \textsf{t1}
cannot be null and it must be less than \textsf{t2}, otherwise \textsf{t1},
\textsf{v1}, \textsf{dd}, and \textsf{nu} must all be null ({\tt{}C56}).
\end{enumerate}
The (\textsf{sid}, \textsf{t2}, \textsf{v2}) columns are the primary key
({\tt{}P11}) in order to allow the self-referencing foreign key in the first item.
The last item handles the case where the first waypoint in a server's route has
no predecessor. Only in this case are \textsf{t1}, \textsf{v1}, \textsf{dd},
and \textsf{nu} are allowed to be null.  From rule R1, the first waypoint is
detected by checking if \textsf{t2} is equal to the server's early time, stored
in column \textsf{se}. The (\textsf{sid}, \textsf{se}) columns are referenced
to UE to validate the early time ({\tt{}F18}).
\nwenddocs{}\nwbegincode{23}\sublabel{NW27XAxz-2FnbXJ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2FnbXJ-1}}}\moddef{Create Table W statement~{\nwtagstyle{}\subpageref{NW27XAxz-2FnbXJ-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE W ("
  + "sid int  CONSTRAINT C50 NOT NULL,"
  + "se  int  CONSTRAINT C51 NOT NULL,"
  + "t1  int  ,"
  + "v1  int  ,"
  + "t2  int  CONSTRAINT C52 NOT NULL,"
  + "v2  int  CONSTRAINT C53 NOT NULL,"
  + "dd  int ,"
  + "nu  int ,"
  + "CONSTRAINT P11 PRIMARY KEY (sid, t2, v2),"
  + "CONSTRAINT F17 FOREIGN KEY (sid) REFERENCES S,"
  + "CONSTRAINT F18 FOREIGN KEY (sid, se) REFERENCES UE (uid, ue),"
  + "CONSTRAINT F19 FOREIGN KEY (v1, v2, dd, nu) REFERENCES E INITIALLY DEFERRED,"
  + "CONSTRAINT F20 FOREIGN KEY (sid, t1, v1) REFERENCES W (sid, t2, v2) INITIALLY DEFERRED,"
  + "CONSTRAINT C54 UNIQUE (sid, t1),"
  + "CONSTRAINT C55 UNIQUE (sid, t2),"
  + "CONSTRAINT C56 CHECK ("
  + "  CASE WHEN t1 IS NULL"
  + "    THEN t2 = se AND v1 IS NULL AND dd IS NULL AND nu IS NULL"
  + "    ELSE dd/(t2-t1) <= nu AND t1 < t2"
  + "  END"
  + ") INITIALLY DEFERRED"
  + ")"
\nwendcode{}\nwbegindocs{24}\nwdocspar

\subsubsection{Table PD (Labels Table)}
Table PD (for ``pick-ups and drop-offs'') contains four columns, \textsf{sid},
\textsf{t2}, \textsf{v2}, and \textsf{rid}.  The (\textsf{sid}, \textsf{t2},
\textsf{v2}) columns reference Table W ({\tt{}F23}), and the \textsf{rid} column
indicates the label on that waypoint.  Each row is its own primary key
({\tt{}P12}) in order to be referenced by the CPD constraint table.  A waypoint
can have multiple labels simply by listing the waypoint multiple times with
different values of \textsf{rid}.
\begin{table}[h]
\centering
\small
\begin{tabular}{|c|c|l|}
\hline
\rowcolor{TableTitle}
\multicolumn{3}{|c|}{Table PD (Pick-up and Drop-off Labels)}\\
\hline
\rowcolor{TableHeader}
Col. & Parent & Description \\
\hline
\textit{sid} & \multirow{3}{*}{Table W} & \multirow{3}{*}{Waypoint $w_i$ (schedule element $b_j$)} \\
\textit{t2} & & \\
\textit{v2} & & \\
\hline
\textit{rid} & Table R & Identification for request $r\in\mathcal{R}$ \\
\hline
\end{tabular}
\end{table}
\nwenddocs{}\nwbegincode{25}\sublabel{NW27XAxz-1aGcZB-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1aGcZB-1}}}\moddef{Create Table PD statement~{\nwtagstyle{}\subpageref{NW27XAxz-1aGcZB-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE PD ("
  + "sid int  CONSTRAINT C57 NOT NULL,"
  + "t2  int  CONSTRAINT C58 NOT NULL,"
  + "v2  int  CONSTRAINT C59 NOT NULL,"
  + "rid int  CONSTRAINT C60 NOT NULL,"
  + "CONSTRAINT P12 PRIMARY KEY (sid, t2, v2, rid),"
  + "CONSTRAINT F21 FOREIGN KEY (sid) REFERENCES S,"
  + "CONSTRAINT F22 FOREIGN KEY (rid) REFERENCES R,"
  + "CONSTRAINT F23 FOREIGN KEY (sid, t2, v2) REFERENCES W INITIALLY DEFERRED"
  + ")"
\nwendcode{}\nwbegindocs{26}\nwdocspar

\subsubsection{Table S and R (User Constraint Tables)}
Table S and Table R enforce the remaining user constraints.  Both tables have
six columns, one for each of \textsf{uq}, \textsf{ue}, \textsf{ul},
\textsf{uo}, \textsf{ud}, and \textsf{ub}, to store user data. A seventh column
stores the user identifier as the primary key. The identifier is stored in the
\textsf{sid} column for Table S and the \textsf{rid} column for Table R.  Each
(\textsf{sid}, column) or (\textsf{rid}, column) pair references the
corresponding user property table, for example (\textsf{sid}, \textsf{uq})
references Table UQ.
% An application must populate S and R for the \textsf{sid} and \textsf{rid} foreign keys in W and PD.

Properties P1 and P3 that could not be enforced in the user tables are now
enforced through simple constraints on S and R.  A \texttt{CHECK} constraint
validates that \textsf{uq} is less than 0 in Table S ({\tt{}C40}), and another
\texttt{CHECK} constraint validates it is greater than 0 in Table R ({\tt{}C48}),
corresponding to servers and requests (property P1). Likewise, a \texttt{CHECK}
constraint validates that \textsf{ue} is less than \textsf{ul} ({\tt{}C41},
{\tt{}C49}) (property P3). None of the columns can be null to prevent incomplete
users.
\begin{table}[h]
\centering
\small
\begin{tabular}{|c|l|}
\hline
\rowcolor{TableTitle}
\multicolumn{2}{|c|}{User Constraint Tables}\\
\hline
\rowcolor{TableHeader}
Table & Columns \\
\hline
Table S & \textit{sid}, sq, se, sl, so, sd, sb \\
Table R & \textit{rid}, rq, re, rl, ro, rd, rb \\
\hline
\end{tabular}
\end{table}
\nwenddocs{}\nwbegincode{27}\sublabel{NW27XAxz-2D0DN7-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2D0DN7-1}}}\moddef{Create Table S statement~{\nwtagstyle{}\subpageref{NW27XAxz-2D0DN7-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE S ("
  + "sid int  CONSTRAINT P9 PRIMARY KEY,"
  + "sq  int  CONSTRAINT C34 NOT NULL,"
  + "se  int  CONSTRAINT C35 NOT NULL,"
  + "sl  int  CONSTRAINT C36 NOT NULL,"
  + "so  int  CONSTRAINT C37 NOT NULL,"
  + "sd  int  CONSTRAINT C38 NOT NULL,"
  + "sb  int  CONSTRAINT C39 NOT NULL,"
  + "CONSTRAINT C40 CHECK (sq < 0),"
  + "CONSTRAINT F5 FOREIGN KEY (sid, sq) REFERENCES UQ (uid, uq),"
  + "CONSTRAINT F6 FOREIGN KEY (sid, se) REFERENCES UE (uid, ue),"
  + "CONSTRAINT F7 FOREIGN KEY (sid, sl) REFERENCES UL (uid, ul),"
  + "CONSTRAINT F8 FOREIGN KEY (sid, so) REFERENCES UO (uid, uo),"
  + "CONSTRAINT F9 FOREIGN KEY (sid, sd) REFERENCES UD (uid, ud),"
  + "CONSTRAINT F10 FOREIGN KEY (sid, sb) REFERENCES UB (uid, ub),"
  + "CONSTRAINT C41 CHECK (se < sl)"
  + ")"
\nwendcode{}\nwbegindocs{28}\nwdocspar
\nwenddocs{}\nwbegincode{29}\sublabel{NW27XAxz-Uo9HJ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-Uo9HJ-1}}}\moddef{Create Table R statement~{\nwtagstyle{}\subpageref{NW27XAxz-Uo9HJ-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE R ("
  + "rid int  CONSTRAINT P10 PRIMARY KEY,"
  + "rq  int  CONSTRAINT C42 NOT NULL,"
  + "re  int  CONSTRAINT C43 NOT NULL,"
  + "rl  int  CONSTRAINT C44 NOT NULL,"
  + "ro  int  CONSTRAINT C45 NOT NULL,"
  + "rd  int  CONSTRAINT C46 NOT NULL,"
  + "rb  int  CONSTRAINT C47 NOT NULL,"
  + "CONSTRAINT C48 CHECK (rq > 0),"
  + "CONSTRAINT F11 FOREIGN KEY (rid, rq) REFERENCES UQ (uid, uq),"
  + "CONSTRAINT F12 FOREIGN KEY (rid, re) REFERENCES UE (uid, ue),"
  + "CONSTRAINT F13 FOREIGN KEY (rid, rl) REFERENCES UL (uid, ul),"
  + "CONSTRAINT F14 FOREIGN KEY (rid, ro) REFERENCES UO (uid, uo),"
  + "CONSTRAINT F15 FOREIGN KEY (rid, rd) REFERENCES UD (uid, ud),"
  + "CONSTRAINT F16 FOREIGN KEY (rid, rb) REFERENCES UB (uid, ub),"
  + "CONSTRAINT C49 CHECK (re < rl)"
  + ")"
\nwendcode{}\nwbegindocs{30}\nwdocspar

\subsubsection{Table CW (Route Endpoint Constraints Table)}
Table CW stores the start and end waypoints of each server route.  The table
has nine columns, \textsf{sid}, \textsf{se}, \textsf{sl}, \textsf{so},
\textsf{sd}, \textsf{ts}, \textsf{vs}, \textsf{te}, and \textsf{ve}.  The start
waypoint is stored in (\textsf{sid}, \textsf{ts}, \textsf{vs}) and the end
waypoint is stored in (\textsf{sid}, \textsf{te}, \textsf{ve}). Both of these
groups reference the (\textsf{sid}, \textsf{t2}, \textsf{v2}) columns in Table
W ({\tt{}F29}, {\tt{}F30}).  The \textsf{sid} column is set to be \texttt{UNIQUE}
({\tt{}C70}) to prevent a server from being listed multiple times and having
``multiple'' start and end waypoints.  Rule R1 is enforced by adding the
server's early and late times into columns \textsf{se} and \textsf{sl},
referencing (\textsf{sid}, \textsf{se}) to UE ({\tt{}F25}) and (\textsf{sid},
\textsf{sl}) to UL ({\tt{}F26}).  A \texttt{CHECK} constraint validates the start
time \textsf{ts} equals \textsf{se} ({\tt{}C71}) and another one validates the end
time \textsf{te} is not beyond \textsf{sl} ({\tt{}C72}).  Rule 2 is enforced by
adding the server's origin and destination into columns \textsf{so} and
\textsf{sd}, referencing (\textsf{sid}, \textsf{so}) to UO ({\tt{}F27}) and
(\textsf{sid}, \textsf{sd}) to UD ({\tt{}F28}).  Likewise, constraint {\tt{}C71}
validates the start location \textsf{vs} equals \textsf{so} and {\tt{}C72}
validates the end location \textsf{ve} equals \textsf{sd}.
\begin{table}[h]
\centering
\small
\begin{tabular}{|c|c|l|}
\hline
\rowcolor{TableTitle}
\multicolumn{3}{|c|}{Table CW (Route Endpoint Constraints)}\\
\hline
\rowcolor{TableHeader}
Col. & Parent & Description\\
\hline
sid & \multirow{2}{*}{Table UE} & \multirow{2}{*}{Server early time $s_\texttt{e}$} \\
se & & \\
\hline
sid & \multirow{2}{*}{Table UL} & \multirow{2}{*}{Server late time $s_\texttt{l}$} \\
sl & & \\
\hline
sid & \multirow{2}{*}{Table UO} & \multirow{2}{*}{Server origin $s_\texttt{o}$} \\
so & &\\
\hline
sid & \multirow{2}{*}{Table UD} & \multirow{2}{*}{Server destination $s_\texttt{d}$} \\
sd & & \\
\hline
\textit{sid} & \multirow{3}{*}{Table W} & \multirow{3}{*}{Server $\textrm{pickup}(\mathcal{X},s)$}\\
\textit{ts} & & \\
vs & & \\
\hline
sid & \multirow{3}{*}{Table W} & \multirow{3}{*}{Server $\textrm{dropoff}(\mathcal{X},s)$}\\
\textit{te} & & \\
ve & & \\
\hline
\end{tabular}
\end{table}
\nwenddocs{}\nwbegincode{31}\sublabel{NW27XAxz-2HehGp-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2HehGp-1}}}\moddef{Create Table CW statement~{\nwtagstyle{}\subpageref{NW27XAxz-2HehGp-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE CW ("
  + "sid int  CONSTRAINT C61 NOT NULL,"
  + "se  int  CONSTRAINT C62 NOT NULL,"
  + "sl  int  CONSTRAINT C63 NOT NULL,"
  + "so  int  CONSTRAINT C64 NOT NULL,"
  + "sd  int  CONSTRAINT C65 NOT NULL,"
  + "ts  int  CONSTRAINT C66 NOT NULL,"
  + "vs  int  CONSTRAINT C67 NOT NULL,"
  + "te  int  CONSTRAINT C68 NOT NULL,"
  + "ve  int  CONSTRAINT C69 NOT NULL,"
  + "CONSTRAINT C70 UNIQUE (sid),"
  + "CONSTRAINT P13 PRIMARY KEY (sid, ts, te),"
  + "CONSTRAINT F24 FOREIGN KEY (sid) REFERENCES S,"
  + "CONSTRAINT F25 FOREIGN KEY (sid, se) REFERENCES UE (uid, ue),"
  + "CONSTRAINT F26 FOREIGN KEY (sid, sl) REFERENCES UL (uid, ul),"
  + "CONSTRAINT F27 FOREIGN KEY (sid, so) REFERENCES UO (uid, uo),"
  + "CONSTRAINT F28 FOREIGN KEY (sid, sd) REFERENCES UD (uid, ud),"
  + "CONSTRAINT F29 FOREIGN KEY (sid, ts, vs) REFERENCES W (sid, t2, v2) INITIALLY DEFERRED,"
  + "CONSTRAINT F30 FOREIGN KEY (sid, te, ve) REFERENCES W (sid, t2, v2) INITIALLY DEFERRED,"
  + "CONSTRAINT C71 CHECK (ts = se AND vs = so),"
  + "CONSTRAINT C72 CHECK (te <= sl AND ve = sd),"
  + "CONSTRAINT C73 CHECK (ts < te)"
  + ")"
\nwendcode{}\nwbegindocs{32}\nwdocspar

\subsubsection{Table CPD (Label Constraints Table)}
Table CPD enforces the pick-up and drop-off rules R5--R9. It contains twelve
columns, \textsf{sid}, \textsf{ts}, \textsf{te}, \textsf{tp}, \textsf{vp},
\textsf{td}, \textsf{vd}, \textsf{rid}, \textsf{re}, \textsf{rl}, \textsf{ro},
and \textsf{rd}.  The (\textsf{sid}, \textsf{tp}, \textsf{vp}, \textsf{rid})
and (\textsf{sid}, \textsf{td}, \textsf{vd}, \textsf{rid}) groups reference
rows in Table PD ({\tt{}F34}, {\tt{}F35}) and represent pick-up and drop-off
waypoints, respectively.  Rules R5 and R9 are enforced by setting \textsf{rid}
to \texttt{UNIQUE} ({\tt{}C86}), in other words any request identified in
\textsf{rid} has only one pick-up and drop-off pair.  Rule R6 is enforced by
adding columns for the request origin \textsf{ro} and destination \textsf{rd}
and validating that pick-up vertex \textsf{vp} equals \textsf{ro} ({\tt{}C89}) and
drop-off vertex \textsf{vd} equals \textsf{rd} ({\tt{}C90}). The (\textsf{rid},
\textsf{ro}) columns are referenced to UO ({\tt{}F38}) and (\textsf{rid},
\textsf{rd}) are referenced to UD ({\tt{}F39}).  Rules R7 and R8 are enforced by
simple \texttt{CHECK} constraints. Both \textsf{tp} and \textsf{td} are
validated to be between request early time \textsf{re} and late time
\textsf{rl} ({\tt{}C89}, {\tt{}C90}). The (\textsf{rid}, \textsf{re}) and
(\textsf{rid}, \textsf{rl}) columns are added and referenced to UE and UL
({\tt{}F36}, {\tt{}F37}) for this purpose.

So far, nothing prevents \textsf{tp} and \textsf{td} from falling outside the
server's start and end times. These times are thus added into (\textsf{sid},
\textsf{ts}, \textsf{te}) columns, referenced to Table CW ({\tt{}F33}).  Then,
\texttt{CHECK} constraints can validate that \textsf{tp} and \textsf{td} are
within the start time \textsf{ts} and the end time \textsf{te} ({\tt{}C87},
{\tt{}C88}).
\begin{table}[t]
\centering
\small
\begin{tabular}{|c|c|l|}
\hline
\rowcolor{TableTitle}
\multicolumn{3}{|c|}{Table CPD (Pick-up and Drop-off Constraints)}\\
\hline
\rowcolor{TableHeader}
Col. & Parent & Description \\
\hline
sid & \multirow{3}{*}{Table CW} & \multirow{3}{48mm}{Server start and end times $\pi_\texttt{t}(\textrm{pickup}(\mathcal{X},s))$, $\pi_\texttt{t}(\textrm{dropoff}(\mathcal{X},s))$} \\
ts & & \\
te & & \\
\hline
\textit{sid} & \multirow{4}{*}{Table PD} & \multirow{4}{*}{Request $\textrm{pickup}(\mathcal{X},r)$} \\
\textit{tp} & & \\
vp & & \\
rid & & \\
\hline
sid & \multirow{4}{*}{Table PD} & \multirow{4}{*}{Request $\textrm{dropoff}(\mathcal{X},r)$} \\
\textit{td} & & \\
vd & & \\
\textit{rid} & & \\
\hline
rid & \multirow{2}{*}{Table UE} & \multirow{2}{*}{Request early time $r_\texttt{e}$} \\
re & & \\
\hline
rid & \multirow{2}{*}{Table UL} & \multirow{2}{*}{Request late time $r_\texttt{l}$} \\
rl & & \\
\hline
rid & \multirow{2}{*}{Table UO} & \multirow{2}{*}{Request origin $r_\texttt{o}$} \\
ro & & \\
\hline
rid & \multirow{2}{*}{Table UD} & \multirow{2}{*}{Request destination $r_\texttt{d}$} \\
rd & & \\
\hline
\end{tabular}
\end{table}
\nwenddocs{}\nwbegincode{33}\sublabel{NW27XAxz-q5ofx-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-q5ofx-1}}}\moddef{Create Table CPD statement~{\nwtagstyle{}\subpageref{NW27XAxz-q5ofx-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE CPD ("
  + "sid int  CONSTRAINT C74 NOT NULL,"
  + "ts  int  CONSTRAINT C75 NOT NULL,"
  + "te  int  CONSTRAINT C76 NOT NULL,"
  + "tp  int  CONSTRAINT C77 NOT NULL,"
  + "vp  int  CONSTRAINT C78 NOT NULL,"
  + "td  int  CONSTRAINT C79 NOT NULL,"
  + "vd  int  CONSTRAINT C80 NOT NULL,"
  + "rid int  CONSTRAINT C81 NOT NULL,"
  + "re  int  CONSTRAINT C82 NOT NULL,"
  + "rl  int  CONSTRAINT C83 NOT NULL,"
  + "ro  int  CONSTRAINT C84 NOT NULL,"
  + "rd  int  CONSTRAINT C85 NOT NULL,"
  + "CONSTRAINT C86 UNIQUE (rid),"
  + "CONSTRAINT P14 PRIMARY KEY (sid, tp, td, rid),"
  + "CONSTRAINT F31 FOREIGN KEY (sid) REFERENCES S,"
  + "CONSTRAINT F32 FOREIGN KEY (rid) REFERENCES R,"
  + "CONSTRAINT F33 FOREIGN KEY (sid, ts, te) REFERENCES CW (sid, ts, te) "
  + "  INITIALLY DEFERRED,"
  + "CONSTRAINT F34 FOREIGN KEY (sid, tp, vp, rid) REFERENCES PD (sid, t2, v2, rid) "
  + "  INITIALLY DEFERRED,"
  + "CONSTRAINT F35 FOREIGN KEY (sid, td, vd, rid) REFERENCES PD (sid, t2, v2, rid) "
  + "  INITIALLY DEFERRED,"
  + "CONSTRAINT F36 FOREIGN KEY (rid, re) REFERENCES UE (uid, ue),"
  + "CONSTRAINT F37 FOREIGN KEY (rid, rl) REFERENCES UL (uid, ul),"
  + "CONSTRAINT F38 FOREIGN KEY (rid, ro) REFERENCES UO (uid, uo),"
  + "CONSTRAINT F39 FOREIGN KEY (rid, rd) REFERENCES UD (uid, ud),"
  + "CONSTRAINT C87 CHECK (tp BETWEEN ts AND td) INITIALLY DEFERRED,"
  + "CONSTRAINT C88 CHECK (td BETWEEN tp AND te) INITIALLY DEFERRED,"
  + "CONSTRAINT C89 CHECK (tp >= re AND vp = ro) INITIALLY DEFERRED,"
  + "CONSTRAINT C90 CHECK (td <= rl AND vd = rd) INITIALLY DEFERRED"
  + ")"
\nwendcode{}\nwbegindocs{34}\nwdocspar

\subsubsection{Table CQ (Load Constraints Table)}
Table CQ enforces the load rule R11. It has fourteen columns, \textsf{sid},
\textsf{sq}, \textsf{se}, \textsf{t1}, \textsf{t2}, \textsf{v2}, \textsf{q1},
\textsf{q2}, \textsf{rid}, \textsf{rq}, \textsf{tp}, \textsf{td}, \textsf{o1},
and \textsf{o2}.  From Eq.~\ref{eq:load}, the load burden only changes at the
times of waypoints labeled with a request. It increases when a waypoint
corresponds to a customer pick-up and decreases when the waypoint corresponds
to a customer drop-off. Each load-changing waypoint is stored in (\textsf{sid},
\textsf{t2}, \textsf{v2}, \textsf{rid}) and referenced to PD ({\tt{}F46}).  To
determine if the waypoint is a customer pick-up or drop-off, the pick-up and
drop-off times for \textsf{rid} are stored in (\textsf{sid}, \textsf{tp},
\textsf{td}, \textsf{rid}) and referenced to CPD ({\tt{}F47}).  If
$\textsf{t2}=\textsf{tp}$, then the waypoint represents a pick-up, otherwise it
represents a drop-off. The load of the server and request are stored in
(\textsf{sid}, \textsf{sq}) and (\textsf{rid}, \textsf{rq}), referenced to UQ
({\tt{}F44}, {\tt{}F45}).

To validate if the load burden is always within a server's capacity, CQ must
keep track of every load change. It does so by storing the \emph{predecessor}
load in columns (\textsf{sid}, \textsf{t1}, \textsf{q1}, \textsf{o1}) next to
the current load in columns (\textsf{sid}, \textsf{t2}, \textsf{q2},
\textsf{o2}).  If the waypoint in the row is a pick-up, CQ validates that
$\textsf{q1}+\textsf{rq}=\textsf{q2}$, otherwise that
$\textsf{q1}-\textsf{rq}=\textsf{q2}$ ({\tt{}C98}). As repetitive load changes can
occur at a single waypoint due to multiple pick-ups and drop-offs, the
\textsf{o1} and \textsf{o2} columns are introduced to store a unique
\emph{order number}. This number increments by 1 for each pick-up or drop-off
per server and can be handled by the application. Similar rules for
establishing predecessor waypoints in Table W can be used to establish
predecessor loads in CQ.  Subsequently, (\textsf{sid}, \textsf{t2},
\textsf{q2}, \textsf{o2}) is set to be the primary key ({\tt{}P15}) in order to
allow a self-referencing foreign key on (\textsf{sid}, \textsf{t1},
\textsf{q1}, \textsf{o1}) ({\tt{}F42}), and the server early time is stored in
(\textsf{sid}, \textsf{se}) and referenced to UE ({\tt{}F43}) in order to detect
the first load change.
\begin{table}[t]
\centering
\small
\begin{tabular}{|c|c|l|}
\hline
\rowcolor{TableTitle}
\multicolumn{3}{|c|}{Table CQ (Load Constraints)}\\
\hline
\rowcolor{TableHeader}
Col. & Parent & Description \\
\hline
sid & \multirow{2}{*}{Table UQ} & \multirow{2}{*}{Server load $s_q$} \\
sq & & \\
\hline
sid & \multirow{2}{*}{Table UE} & \multirow{2}{*}{Server early time $s_e$} \\
se & & \\
\hline
sid & \multirow{4}{*}{Table CQ} & \multirow{4}{48mm}{Load burden $\mathcal{Q}(\mathcal{X},s,\textrm{t1})$ up to order o1} \\
t1 & & \\
q1 & & \\
o1 & & \\
\hline
\textit{sid}& & \multirow{3}{48mm}{Load burden $\mathcal{Q}(\mathcal{X},s,\textrm{t2})$ up to order o2} \\
\textit{t2} & & \\
\textit{q2} & & \\
\textit{o2} & & \\
\hline
sid & \multirow{4}{*}{Table PD} & \multirow{4}{48mm}{Request pick-up or delivery waypoint} \\
t2 & & \\
v2 & & \\
rid& & \\
\hline
sid & \multirow{4}{*}{Table CPD} & \multirow{4}{48mm}{Request pick-up and delivery times $\pi_\texttt{t}(\textrm{pickup}(\mathcal{X},r))$, $\pi_\texttt{t}(\textrm{dropoff}(\mathcal{X},r))$} \\
tp & & \\
td & & \\
rid& & \\
\hline
rid & \multirow{2}{*}{Table UQ} & \multirow{2}{*}{Request load $r_q$} \\
rq & & \\
\hline
\end{tabular}
\end{table}
\nwenddocs{}\nwbegincode{35}\sublabel{NW27XAxz-2YsMAX-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2YsMAX-1}}}\moddef{Create Table CQ statement~{\nwtagstyle{}\subpageref{NW27XAxz-2YsMAX-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE TABLE CQ ("
  + "sid int  CONSTRAINT C91 NOT NULL,"
  + "sq  int  CONSTRAINT C92 NOT NULL,"
  + "se  int  CONSTRAINT C93 NOT NULL,"
  + "t1  int  ,"
  + "t2  int  CONSTRAINT C94 NOT NULL,"
  + "v2  int  ,"
  + "q1  int  ,"
  + "q2  int  CONSTRAINT C95 NOT NULL,"
  + "rid int  ,"
  + "rq  int  ,"
  + "tp  int  ,"
  + "td  int  ,"
  + "o1  int  ,"
  + "o2  int  CONSTRAINT C96 NOT NULL,"
  + "CONSTRAINT C97 CHECK (o2 > 0),"
  + "CONSTRAINT P15 PRIMARY KEY (sid, t2, q2, o2),"
  + "CONSTRAINT F40 FOREIGN KEY (sid) REFERENCES S,"
  + "CONSTRAINT F41 FOREIGN KEY (rid) REFERENCES R,"
  + "CONSTRAINT F42 FOREIGN KEY (sid, t1, q1, o1) REFERENCES CQ (sid, t2, q2, o2)"
  + "  INITIALLY DEFERRED,"
  + "CONSTRAINT F43 FOREIGN KEY (sid, se) REFERENCES UE (uid, ue),"
  + "CONSTRAINT F44 FOREIGN KEY (sid, sq) REFERENCES UQ (uid, uq),"
  + "CONSTRAINT F45 FOREIGN KEY (rid, rq) REFERENCES UQ (uid, uq),"
  + "CONSTRAINT F46 FOREIGN KEY (sid, t2, v2, rid) REFERENCES PD INITIALLY DEFERRED,"
  + "CONSTRAINT F47 FOREIGN KEY (sid, tp, td, rid) REFERENCES CPD INITIALLY DEFERRED,"
  + "CONSTRAINT C98 CHECK ("
  + "  CASE WHEN t1 IS NULL"
  + "    THEN t2 = se AND q1 IS NULL AND q2 = sq AND o1 IS NULL AND o2 = 1"
  + "      AND rid IS NULL AND rq IS NULL AND tp IS NULL AND td IS NULL"
  + "    ELSE q2 <= 0 AND o2 = o1 + 1 AND"
  + "      CASE WHEN t2 = tp"
  + "        THEN q2 = q1 + rq"
  + "        ELSE q2 = q1 - rq"
  + "      END"
  + "  END"
  + ") INITIALLY DEFERRED"
  + ")"
\nwendcode{}\nwbegindocs{36}\nwdocspar

\subsubsection{View r\_user (User Relation)}
The user relation $\mathcal{U}$ can be formed by a union of Table S and R.
\nwenddocs{}\nwbegincode{37}\sublabel{NW27XAxz-35s8QT-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-35s8QT-1}}}\moddef{Create View r\_user statement~{\nwtagstyle{}\subpageref{NW27XAxz-35s8QT-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW r_user (uid, uq, ue, ul, uo, ud, ub) AS "
  + "SELECT * from S UNION SELECT * from R"
\nwendcode{}\nwbegindocs{38}\nwdocspar

\subsubsection{View r\_server (Server Relation)}
The server relation $\mathcal{X}$ can be constructed by joining the routes in
Table W with the labels in CW and PD.
\nwenddocs{}\nwbegincode{39}\sublabel{NW27XAxz-3E22nZ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3E22nZ-1}}}\moddef{Create View r\_server statement~{\nwtagstyle{}\subpageref{NW27XAxz-3E22nZ-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW r_server (sid, t, v, Ls, Lr) AS "
  + "SELECT W.sid, W.t2, W.v2, CW.sid, PD.rid "
  + "FROM W LEFT OUTER JOIN CW ON W.sid = CW.sid AND (W.t2 = CW.ts OR W.t2 = CW.te) "
  + "  LEFT OUTER JOIN PD ON W.sid = PD.sid AND W.t2 = PD.t2"
\nwendcode{}\nwbegindocs{40}\nwdocspar

\subsubsection{View f\_distance\_blocks (Distance Partitions)}
The cruising and service distances $D^\textrm{cruise}$ and $D^\textrm{service}$
require an auxilliary view. This view joins Table W with
CQ in such a way that the distances in column \textsf{dd} of W
can be aggregated based on whether there is load burden at the time of the
waypoint.
\nwenddocs{}\nwbegincode{41}\sublabel{NW27XAxz-2SQlWK-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2SQlWK-1}}}\moddef{Create View f\_distance\_blocks statement~{\nwtagstyle{}\subpageref{NW27XAxz-2SQlWK-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW f_distance_blocks (sid, val, dtype) AS "
  + "SELECT d.sid, SUM (d.dd), d.dtype FROM ("
  + "  SELECT c.sid, c.dd, c.q2=c.sq as dtype FROM ("
  + "    SELECT b.sid, b.dd, b.q2, b.sq FROM ("
  + "      SELECT W.sid, W.t2, COALESCE (W.dd, 0) as dd, CQ.q2, CQ.sq, CQ.o2 "
  + "      FROM W LEFT OUTER JOIN CQ ON W.sid = CQ.sid AND W.t2 > CQ.t2"
  + "    ) AS b JOIN ("
  + "      SELECT W.sid, W.t2, MAX (CQ.o2) AS oprev "
  + "      FROM W LEFT OUTER JOIN CQ ON W.sid = CQ.sid AND W.t2 > CQ.t2 "
  + "      GROUP BY W.sid, W.t2"
  + "    ) AS a "
  + "    ON b.sid = a.sid AND b.t2 = a.t2 AND b.o2 = a.oprev"
  + "  ) AS c"
  + ") AS d "
  + "GROUP BY d.sid, d.dtype"
\nwendcode{}\nwbegindocs{42}Cruising and service distances are obtained by querying
f\_distance\_blocks where \textsf{dtype} is true or false, respectively.

\subsubsection{View f\_status (Request Status)}
Request status can also be obtained using an auxilliary view.  This view lists
the count of occurrences of a request in column \textsf{rid} of CQ,
corresponding to the request status.  Table CQ is used to get the counts over
time.  If the count is 0, it will not appear in the aggregation and the status
for the request is ``waiting''.
\nwenddocs{}\nwbegincode{43}\sublabel{NW27XAxz-qqtLb-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-qqtLb-1}}}\moddef{Create View f\_status statement (Eq.~\ref{eq:status})~{\nwtagstyle{}\subpageref{NW27XAxz-qqtLb-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW f_status (t, sid, rid, val) AS "
  + "SELECT a.t2, a.sid, a.rid, COUNT (b.rid) "
  + "FROM CQ AS a INNER JOIN CQ AS b ON a.t2 >= b.t2 "
  + "WHERE a.rid IS NOT NULL AND b.rid IS NOT NULL AND a.rid = b.rid "
  + "GROUP BY a.t2, a.sid, a.rid"
\nwendcode{}\nwbegindocs{44}\nwdocspar

\subsubsection{Analytical Views}
Most of the analytical measures in \S\ref{sec:ridesharing-metrics} can
be expressed using simple statements.

To list all assignments $\mathcal{A}$:
\nwenddocs{}\nwbegincode{45}\sublabel{NW27XAxz-4DFJnJ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4DFJnJ-1}}}\moddef{Create View assignments statement (Eq.~\ref{eq:assignments})~{\nwtagstyle{}\subpageref{NW27XAxz-4DFJnJ-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW assignments (t, sid, rid) AS "
  + "SELECT t, sid, rid FROM f_status WHERE val = 2 ORDER BY t ASC"
\nwendcode{}\nwbegindocs{46}\nwdocspar
To list assigned requests $\mathcal{R^\textrm{ok}}$:
\nwenddocs{}\nwbegincode{47}\sublabel{NW27XAxz-4Me5rv-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4Me5rv-1}}}\moddef{Create View assignments\_r statement (Eq.~\ref{eq:assigned-requests})~{\nwtagstyle{}\subpageref{NW27XAxz-4Me5rv-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW assignments_r (t, rid) AS "
  + "SELECT t, rid FROM assignments"
\nwendcode{}\nwbegindocs{48}\nwdocspar
To list service rate $\mu$:
\nwenddocs{}\nwbegincode{49}\sublabel{NW27XAxz-3taWHj-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3taWHj-1}}}\moddef{Create View service\_rate statement (Eq.~\ref{eq:service-rate})~{\nwtagstyle{}\subpageref{NW27XAxz-3taWHj-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW service_rate (val) AS "
  + "SELECT CAST(CAST(A.NUM AS FLOAT) / CAST(A.DENOM AS FLOAT) * 100 as INT)"
  + "FROM ( "
  + "SELECT (SELECT COUNT(*) FROM assignments_r) AS NUM, "
  + "       (SELECT COUNT(*) FROM R) AS DENOM "
  + "       FROM assignments_r FETCH FIRST ROW ONLY "
  + ") A"
\nwendcode{}\nwbegindocs{50}\nwdocspar
To list base distance $D^\textrm{base}$:
\nwenddocs{}\nwbegincode{51}\sublabel{NW27XAxz-Xwf4i-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-Xwf4i-1}}}\moddef{Create View dist\_base statement (Eq.~\ref{eq:base-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-Xwf4i-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dist_base (val) AS "
  + "SELECT SUM (ub) FROM UB"
\nwendcode{}\nwbegindocs{52}\nwdocspar
To list travel distances $D$ of all servers:
\nwenddocs{}\nwbegincode{53}\sublabel{NW27XAxz-I0bnu-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-I0bnu-1}}}\moddef{Create View dist\_s\_travel statement~{\nwtagstyle{}\subpageref{NW27XAxz-I0bnu-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dist_s_travel (sid, val) AS "
  + "SELECT W.sid, SUM (COALESCE (dd, 0)) "
  + "FROM W JOIN CW ON w.sid = cw.sid AND (t2 BETWEEN ts AND te) "
  + "GROUP BY W.sid"
\nwendcode{}\nwbegindocs{54}\nwdocspar
To list cruising distances $D^\textrm{cruise}$ of all servers:
\nwenddocs{}\nwbegincode{55}\sublabel{NW27XAxz-sPBsa-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-sPBsa-1}}}\moddef{Create View dist\_s\_cruising statement (Eq.~\ref{eq:cruising-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-sPBsa-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dist_s_cruising (sid, val) AS "
  + "SELECT sid, val FROM f_distance_blocks WHERE dtype = true"
\nwendcode{}\nwbegindocs{56}\nwdocspar
To list service distances $D^\textrm{service}$ of all servers:
\nwenddocs{}\nwbegincode{57}\sublabel{NW27XAxz-21lyOa-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-21lyOa-1}}}\moddef{Create View dist\_s\_service statement (Eq.~\ref{eq:service-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-21lyOa-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dist_s_service (sid, val) AS "
  + "SELECT sid, val FROM f_distance_blocks WHERE dtype = false"
\nwendcode{}\nwbegindocs{58}\nwdocspar
To list base distances $d$ of all servers:
\nwenddocs{}\nwbegincode{59}\sublabel{NW27XAxz-15VZds-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-15VZds-1}}}\moddef{Create View dist\_s\_base statement~{\nwtagstyle{}\subpageref{NW27XAxz-15VZds-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dist_s_base (val) AS "
  + "SELECT SUM (sb) FROM S"
\nwendcode{}\nwbegindocs{60}\nwdocspar
To list base distances $d$ of all requests:
\nwenddocs{}\nwbegincode{61}\sublabel{NW27XAxz-2qZ1kZ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2qZ1kZ-1}}}\moddef{Create View dist\_r\_base statement~{\nwtagstyle{}\subpageref{NW27XAxz-2qZ1kZ-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dist_r_base (val) AS "
  + "SELECT SUM (rb) FROM R"
\nwendcode{}\nwbegindocs{62}\nwdocspar
To list detour distances $D^\textrm{detour}$ of all requests:
\nwenddocs{}\nwbegincode{63}\sublabel{NW27XAxz-4OnMrk-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4OnMrk-1}}}\moddef{Create View dist\_r\_detour statement (Eq.~\ref{eq:detour-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-4OnMrk-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dist_r_detour (rid, val) AS "
  + "SELECT rid, val-ub FROM UB JOIN dist_r_transit ON uid = rid"
\nwendcode{}\nwbegindocs{64}\nwdocspar
To list transit distances $D^\textrm{transit}$ of all requests:
\nwenddocs{}\nwbegincode{65}\sublabel{NW27XAxz-eXH6J-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-eXH6J-1}}}\moddef{Create View dist\_r\_transit statement (Eq.~\ref{eq:transit-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-eXH6J-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dist_r_transit (rid, val) AS "
  + "SELECT rid, SUM (COALESCE (dd, 0)) "
  + "FROM CPD JOIN W ON CPD.sid = W.sid AND CPD.tp < W.t2 AND W.t2 <= CPD.td "
  + "GROUP BY rid"
\nwendcode{}\nwbegindocs{66}\nwdocspar
To list travel duration $\delta$ of all servers:
\nwenddocs{}\nwbegincode{67}\sublabel{NW27XAxz-3sQlba-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3sQlba-1}}}\moddef{Create View dur\_s\_travel statement~{\nwtagstyle{}\subpageref{NW27XAxz-3sQlba-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dur_s_travel (sid, val) AS "
  + "SELECT sid, te - ts FROM CW"
\nwendcode{}\nwbegindocs{68}\nwdocspar
To list pick-up delay $\delta^\textrm{pickup}$ of all requests:
\nwenddocs{}\nwbegincode{69}\sublabel{NW27XAxz-34NkTM-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-34NkTM-1}}}\moddef{Create View dur\_r\_pickup statement (Eq.~\ref{eq:pick-up delay})~{\nwtagstyle{}\subpageref{NW27XAxz-34NkTM-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dur_r_pickup (rid, val) AS "
  + "SELECT rid, tp - re FROM CPD"
\nwendcode{}\nwbegindocs{70}\nwdocspar
To list transit durations $\delta^\textrm{transit}$ of all requests:
\nwenddocs{}\nwbegincode{71}\sublabel{NW27XAxz-Puojq-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-Puojq-1}}}\moddef{Create View dur\_r\_transit statement (Eq.~\ref{eq:transit-duration})~{\nwtagstyle{}\subpageref{NW27XAxz-Puojq-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dur_r_transit (rid, val) AS "
  + "SELECT rid, td - tp FROM CPD"
\nwendcode{}\nwbegindocs{72}\nwdocspar
To list travel durations $\delta^\textrm{travel}$ of all requests:
\nwenddocs{}\nwbegincode{73}\sublabel{NW27XAxz-3a0WDv-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3a0WDv-1}}}\moddef{Create View dur\_r\_travel statement (Eq.~\ref{eq:travel-duration})~{\nwtagstyle{}\subpageref{NW27XAxz-3a0WDv-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW dur_r_travel (rid, val) AS "
  + "SELECT rid, td - re FROM CPD"
\nwendcode{}\nwbegindocs{74}\nwdocspar
To list departure times $t^\textrm{depart}$ of all requests:
\nwenddocs{}\nwbegincode{75}\sublabel{NW27XAxz-45SyYZ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-45SyYZ-1}}}\moddef{Create View t\_r\_depart statement (Eq.~\ref{eq:departure-time})~{\nwtagstyle{}\subpageref{NW27XAxz-45SyYZ-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW t_r_depart (rid, val) AS "
  + "SELECT rid, tp FROM CPD"
\nwendcode{}\nwbegindocs{76}\nwdocspar
To list departure times $t^\textrm{depart}$ of all servers:
\nwenddocs{}\nwbegincode{77}\sublabel{NW27XAxz-2riY0r-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2riY0r-1}}}\moddef{Create View t\_s\_depart statement (Eq.~\ref{eq:departure-time})~{\nwtagstyle{}\subpageref{NW27XAxz-2riY0r-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW t_s_depart (sid, val) AS "
  + "SELECT sid, ts FROM CW"
\nwendcode{}\nwbegindocs{78}\nwdocspar
To list arrival times $t^\textrm{arrive}$ of all requests:
\nwenddocs{}\nwbegincode{79}\sublabel{NW27XAxz-28E5sQ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-28E5sQ-1}}}\moddef{Create View t\_r\_arrive statement (Eq.~\ref{eq:arrival-time})~{\nwtagstyle{}\subpageref{NW27XAxz-28E5sQ-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW t_r_arrive (rid, val) AS "
  + "SELECT rid, td FROM CPD"
\nwendcode{}\nwbegindocs{80}\nwdocspar
To list arrival times $t^\textrm{arrive}$ of all servers:
\nwenddocs{}\nwbegincode{81}\sublabel{NW27XAxz-3oL4CY-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3oL4CY-1}}}\moddef{Create View t\_s\_arrive statement (Eq.~\ref{eq:arrival-time})~{\nwtagstyle{}\subpageref{NW27XAxz-3oL4CY-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}}
"CREATE VIEW t_s_arrive (sid, val) AS "
  + "SELECT sid, te FROM CW"
\nwendcode{}\nwbegindocs{82}\nwdocspar

% =============================================================================

\section{Implementation Overview}
\label{sec:implementation-overview}
The remaining sections are concerned with producing the Java code.  The code
consists of the \emph{preamble} (\S\ref{sec:preamble}) and the \emph{class
definition} (\S\ref{sec:class-definition}).
\nwenddocs{}\nwbegincode{83}\sublabel{NW27XAxz-203Bbj-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-203Bbj-1}}}\moddef{Storage.java~{\nwtagstyle{}\subpageref{NW27XAxz-203Bbj-1}}}\endmoddef\nwnotused{Storage.java}
\LA{}Storage.java preamble~{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-1}}\RA{}
\LA{}\code{}Storage\edoc{} definition~{\nwtagstyle{}\subpageref{NW27XAxz-3TAldU-1}}\RA{}
\nwendcode{}\nwbegindocs{84}\nwdocspar

\subsection{Preamble}
\label{sec:preamble}
The preamble declares the package and imports dependencies.
\nwenddocs{}\nwbegincode{85}\sublabel{NW27XAxz-FkGTW-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-1}}}\moddef{Storage.java preamble~{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-1}}}\endmoddef\nwalsodefined{\\{NW27XAxz-FkGTW-2}\\{NW27XAxz-FkGTW-3}\\{NW27XAxz-FkGTW-4}\\{NW27XAxz-FkGTW-5}}\nwused{\\{NW27XAxz-203Bbj-1}}
package com.github.jargors;
\nwendcode{}\nwbegindocs{86}\nwdocspar
We import:
\begin{itemize}
\item parts of the JDBC~API from {\tt{}java.sql}, for communication with Derby;
\nwenddocs{}\nwbegincode{87}\sublabel{NW27XAxz-FkGTW-2}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-2}}}\moddef{Storage.java preamble~{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-1}}}\plusendmoddef
import java.sql.CallableStatement;   import java.sql.Connection;
import java.sql.DriverManager;       import java.sql.PreparedStatement;
import java.sql.ResultSet;           import java.sql.SQLException;
import java.sql.Statement;           import java.sql.Types;
\nwendcode{}\nwbegindocs{88}\item Apache DBCP2 and Pool2, for connection pooling;
\nwenddocs{}\nwbegincode{89}\sublabel{NW27XAxz-FkGTW-3}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-3}}}\moddef{Storage.java preamble~{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-1}}}\plusendmoddef
import org.apache.commons.dbcp2.ConnectionFactory;
import org.apache.commons.dbcp2.DriverManagerConnectionFactory;
import org.apache.commons.dbcp2.PoolableConnection;
import org.apache.commons.dbcp2.PoolableConnectionFactory;
import org.apache.commons.dbcp2.PoolingDriver;
import org.apache.commons.pool2.ObjectPool;
import org.apache.commons.pool2.impl.GenericObjectPool;
\nwendcode{}\nwbegindocs{90}\item standard map classes for caching various items;
\nwenddocs{}\nwbegincode{91}\sublabel{NW27XAxz-FkGTW-4}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-4}}}\moddef{Storage.java preamble~{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-1}}}\plusendmoddef
import java.util.Map;
import java.util.HashMap;
\nwendcode{}\nwbegindocs{92}\item date-time class for printing timestamps.
\nwenddocs{}\nwbegincode{93}\sublabel{NW27XAxz-FkGTW-5}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-5}}}\moddef{Storage.java preamble~{\nwtagstyle{}\subpageref{NW27XAxz-FkGTW-1}}}\plusendmoddef
import java.time.LocalDateTime;
\nwendcode{}\nwbegindocs{94}\nwdocspar
\end{itemize}

\subsection{Class Definition}
\label{sec:class-definition}
\nwenddocs{}\nwbegincode{95}\sublabel{NW27XAxz-3TAldU-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3TAldU-1}}}\moddef{\code{}Storage\edoc{} definition~{\nwtagstyle{}\subpageref{NW27XAxz-3TAldU-1}}}\endmoddef\nwused{\\{NW27XAxz-203Bbj-1}}
public class Storage \{
  \LA{}\code{}Storage\edoc{} member variables~{\nwtagstyle{}\subpageref{NW27XAxz-17yXws-1}}\RA{}
  \LA{}\code{}Storage\edoc{} constructor~{\nwtagstyle{}\subpageref{NW27XAxz-36NvOs-1}}\RA{}
  \LA{}\code{}Storage\edoc{} public methods~{\nwtagstyle{}\subpageref{NW27XAxz-4PbjF-1}}\RA{}
  \LA{}\code{}Storage\edoc{} private methods~{\nwtagstyle{}\subpageref{NW27XAxz-XGFF1-1}}\RA{}
\}
\nwendcode{}\nwbegindocs{96}\nwdocspar

\subsection{Member Variables}
\label{sec:member-variables}
\begin{itemize}
\item We use a map to store statement strings, keyed by a string identifier.
We also cache the road network vertices and edges.
\nwenddocs{}\nwbegincode{97}\sublabel{NW27XAxz-17yXws-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-17yXws-1}}}\moddef{\code{}Storage\edoc{} member variables~{\nwtagstyle{}\subpageref{NW27XAxz-17yXws-1}}}\endmoddef\nwalsodefined{\\{NW27XAxz-17yXws-2}\\{NW27XAxz-17yXws-3}\\{NW27XAxz-17yXws-4}}\nwused{\\{NW27XAxz-3TAldU-1}}
private static Map<String, String> pstr = new HashMap<>();
private Map<Integer, int[]> lu_vertices = new HashMap<>();
private Map<Integer, Map<Integer, int[]>> lu_edges = new HashMap<>();
\nwindexdefn{pstr}{pstr}{NW27XAxz-17yXws-1}\nwindexdefn{lu{\char95}vertices}{lu:unvertices}{NW27XAxz-17yXws-1}\nwindexdefn{lu{\char95}edges}{lu:unedges}{NW27XAxz-17yXws-1}\eatline
\nwidentdefs{\\{{lu{\char95}edges}{lu:unedges}}\\{{lu{\char95}vertices}{lu:unvertices}}\\{{pstr}{pstr}}}\nwendcode{}\nwbegindocs{98}\item We declare configuration settings.
\nwenddocs{}\nwbegincode{99}\sublabel{NW27XAxz-17yXws-2}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-17yXws-2}}}\moddef{\code{}Storage\edoc{} member variables~{\nwtagstyle{}\subpageref{NW27XAxz-17yXws-1}}}\plusendmoddef
private String CONNECTIONS_URL = "jdbc:derby:memory:jargo;create=true";
private final String CONNECTIONS_DRIVER_URL = "jdbc:apache:commons:dbcp:";
private final String CONNECTIONS_POOL_NAME = "jargo";
private String CONNECTIONS_POOL_URL = (CONNECTIONS_DRIVER_URL + CONNECTIONS_POOL_NAME);
private final int STATEMENTS_MAX_COUNT = 20;
private final int DERBY_PAGECACHESIZE = 8000;  // default=1000
private final String DERBY_DUMPNAME = "db-lastgood";
\nwindexdefn{CONNECTIONS{\char95}URL}{CONNECTIONS:unURL}{NW27XAxz-17yXws-2}\nwindexdefn{CONNECTIONS{\char95}DRIVER{\char95}URL}{CONNECTIONS:unDRIVER:unURL}{NW27XAxz-17yXws-2}\nwindexdefn{CONNECTIONS{\char95}POOL{\char95}NAME}{CONNECTIONS:unPOOL:unNAME}{NW27XAxz-17yXws-2}\nwindexdefn{STATEMENTS{\char95}MAX{\char95}COUNT}{STATEMENTS:unMAX:unCOUNT}{NW27XAxz-17yXws-2}\nwindexdefn{DERBY{\char95}PAGECACHESIZE}{DERBY:unPAGECACHESIZE}{NW27XAxz-17yXws-2}\nwindexdefn{DERBY{\char95}DUMPNAME}{DERBY:unDUMPNAME}{NW27XAxz-17yXws-2}\eatline
\nwidentdefs{\\{{CONNECTIONS{\char95}DRIVER{\char95}URL}{CONNECTIONS:unDRIVER:unURL}}\\{{CONNECTIONS{\char95}POOL{\char95}NAME}{CONNECTIONS:unPOOL:unNAME}}\\{{CONNECTIONS{\char95}URL}{CONNECTIONS:unURL}}\\{{DERBY{\char95}DUMPNAME}{DERBY:unDUMPNAME}}\\{{DERBY{\char95}PAGECACHESIZE}{DERBY:unPAGECACHESIZE}}\\{{STATEMENTS{\char95}MAX{\char95}COUNT}{STATEMENTS:unMAX:unCOUNT}}}\nwendcode{}\nwbegindocs{100}\item We declare connection pool and factories.
\nwenddocs{}\nwbegincode{101}\sublabel{NW27XAxz-17yXws-3}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-17yXws-3}}}\moddef{\code{}Storage\edoc{} member variables~{\nwtagstyle{}\subpageref{NW27XAxz-17yXws-1}}}\plusendmoddef
private ConnectionFactory connection_factory;
private PoolableConnectionFactory poolableconnection_factory;
private ObjectPool<PoolableConnection> pool;
private PoolingDriver driver;
\nwendcode{}\nwbegindocs{102}\nwdocspar
\item We declare a version string.
\nwenddocs{}\nwbegincode{103}\sublabel{NW27XAxz-17yXws-4}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-17yXws-4}}}\moddef{\code{}Storage\edoc{} member variables~{\nwtagstyle{}\subpageref{NW27XAxz-17yXws-1}}}\plusendmoddef
private final String VERSION = "1.0.0";
\nwindexdefn{VERSION}{VERSION}{NW27XAxz-17yXws-4}\eatline
\nwidentdefs{\\{{VERSION}{VERSION}}}\nwendcode{}\nwbegindocs{104}\end{itemize}

\subsection{Constructor}
\label{sec:constructor}
The constructor simply establishes a connection to Derby and initializes the
prepared statement strings.
\nwenddocs{}\nwbegincode{105}\sublabel{NW27XAxz-36NvOs-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-36NvOs-1}}}\moddef{\code{}Storage\edoc{} constructor~{\nwtagstyle{}\subpageref{NW27XAxz-36NvOs-1}}}\endmoddef\nwused{\\{NW27XAxz-3TAldU-1}}
public Storage() \{
  Print("Initialize Storage Interface "+VERSION);
  try \{
    setupDriver();
    PSInit();
  \} catch (RuntimeException e) \{
    e.printStackTrace();
  \}
\}
\nwidentuses{\\{{Print}{Print}}\\{{PSInit}{PSInit}}\\{{setupDriver}{setupDriver}}\\{{VERSION}{VERSION}}}\nwindexuse{Print}{Print}{NW27XAxz-36NvOs-1}\nwindexuse{PSInit}{PSInit}{NW27XAxz-36NvOs-1}\nwindexuse{setupDriver}{setupDriver}{NW27XAxz-36NvOs-1}\nwindexuse{VERSION}{VERSION}{NW27XAxz-36NvOs-1}\nwendcode{}\nwbegindocs{106}\nwdocspar

\section{Public Methods}
\label{sec:public-methods}
This section introduces array diagrams to illustrate the expected shape of some
method parameters. These diagrams show each element in a box, with the contents
of each box taking the form $\textit{index}:\textit{value}$. For example,

\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:a$}; & \node {$1:b$}; & \node {$2:c$};\\
};
\end{tikzpicture}

\noindent shows an array with three elements. The value at index 0 is $a$; the
value at index 1 is $b$; the value at index 2 is $c$.

\subsection{Utilities}
\label{sec:utilities}

\subsubsection{{\tt{}\protect\nwindexuse{DBLoadDataModel}{DBLoadDataModel}{NW27XAxz-4P4YpK-1}DBLoadDataModel}(0)}
The {\tt{}\protect\nwindexuse{DBLoadDataModel}{DBLoadDataModel}{NW27XAxz-4P4YpK-1}DBLoadDataModel}(0) method loads the tables and views in
\S\ref{sec:ridesharing-data-model} into the database. If the model already
exists in the database, the method throws a {\tt{}RuntimeException}.
\nwenddocs{}\nwbegincode{107}\sublabel{NW27XAxz-4P4YpK-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4P4YpK-1}}}\moddef{Load data model~{\nwtagstyle{}\subpageref{NW27XAxz-4P4YpK-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-1}}
public void DBLoadDataModel() throws RuntimeException \{
  Print("Load data model");
  try \{
    Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
    Statement stmt = conn.createStatement();
    stmt.clearBatch();
    stmt.addBatch(\LA{}Create Table V statement~{\nwtagstyle{}\subpageref{NW27XAxz-RzwV3-1}}\RA{});
    stmt.addBatch(\LA{}Create Table E statement~{\nwtagstyle{}\subpageref{NW27XAxz-2WHSWQ-1}}\RA{});
    stmt.addBatch(\LA{}Create Table UQ statement~{\nwtagstyle{}\subpageref{NW27XAxz-llmAG-1}}\RA{});
    stmt.addBatch(\LA{}Create Table UE statement~{\nwtagstyle{}\subpageref{NW27XAxz-sBCgz-1}}\RA{});
    stmt.addBatch(\LA{}Create Table UL statement~{\nwtagstyle{}\subpageref{NW27XAxz-3Q8NSk-1}}\RA{});
    stmt.addBatch(\LA{}Create Table UO statement~{\nwtagstyle{}\subpageref{NW27XAxz-qCW00-1}}\RA{});
    stmt.addBatch(\LA{}Create Table UD statement~{\nwtagstyle{}\subpageref{NW27XAxz-1OVMyH-1}}\RA{});
    stmt.addBatch(\LA{}Create Table UB statement~{\nwtagstyle{}\subpageref{NW27XAxz-3QSM5L-1}}\RA{});
    stmt.addBatch(\LA{}Create Table S statement~{\nwtagstyle{}\subpageref{NW27XAxz-2D0DN7-1}}\RA{});
    stmt.addBatch(\LA{}Create Table R statement~{\nwtagstyle{}\subpageref{NW27XAxz-Uo9HJ-1}}\RA{});
    stmt.addBatch(\LA{}Create Table W statement~{\nwtagstyle{}\subpageref{NW27XAxz-2FnbXJ-1}}\RA{});
    stmt.addBatch(\LA{}Create Table PD statement~{\nwtagstyle{}\subpageref{NW27XAxz-1aGcZB-1}}\RA{});
    stmt.addBatch(\LA{}Create Table CW statement~{\nwtagstyle{}\subpageref{NW27XAxz-2HehGp-1}}\RA{});
    stmt.addBatch(\LA{}Create Table CPD statement~{\nwtagstyle{}\subpageref{NW27XAxz-q5ofx-1}}\RA{});
    stmt.addBatch(\LA{}Create Table CQ statement~{\nwtagstyle{}\subpageref{NW27XAxz-2YsMAX-1}}\RA{});
    stmt.addBatch(\LA{}Create View r\_user statement~{\nwtagstyle{}\subpageref{NW27XAxz-35s8QT-1}}\RA{});
    stmt.addBatch(\LA{}Create View r\_server statement~{\nwtagstyle{}\subpageref{NW27XAxz-3E22nZ-1}}\RA{});
    stmt.addBatch(\LA{}Create View f\_distance\_blocks statement~{\nwtagstyle{}\subpageref{NW27XAxz-2SQlWK-1}}\RA{});
    stmt.addBatch(\LA{}Create View f\_status statement (Eq.~\ref{eq:status})~{\nwtagstyle{}\subpageref{NW27XAxz-qqtLb-1}}\RA{});
    stmt.addBatch(\LA{}Create View assignments statement (Eq.~\ref{eq:assignments})~{\nwtagstyle{}\subpageref{NW27XAxz-4DFJnJ-1}}\RA{});
    stmt.addBatch(\LA{}Create View assignments\_r statement (Eq.~\ref{eq:assigned-requests})~{\nwtagstyle{}\subpageref{NW27XAxz-4Me5rv-1}}\RA{});
    stmt.addBatch(\LA{}Create View service\_rate statement (Eq.~\ref{eq:service-rate})~{\nwtagstyle{}\subpageref{NW27XAxz-3taWHj-1}}\RA{});
    stmt.addBatch(\LA{}Create View dist\_base statement (Eq.~\ref{eq:base-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-Xwf4i-1}}\RA{});
    stmt.addBatch(\LA{}Create View dist\_s\_travel statement~{\nwtagstyle{}\subpageref{NW27XAxz-I0bnu-1}}\RA{});
    stmt.addBatch(\LA{}Create View dist\_s\_cruising statement (Eq.~\ref{eq:cruising-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-sPBsa-1}}\RA{});
    stmt.addBatch(\LA{}Create View dist\_s\_service statement (Eq.~\ref{eq:service-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-21lyOa-1}}\RA{});
    stmt.addBatch(\LA{}Create View dist\_s\_base statement~{\nwtagstyle{}\subpageref{NW27XAxz-15VZds-1}}\RA{});
    stmt.addBatch(\LA{}Create View dist\_r\_base statement~{\nwtagstyle{}\subpageref{NW27XAxz-2qZ1kZ-1}}\RA{});
    stmt.addBatch(\LA{}Create View dist\_r\_transit statement (Eq.~\ref{eq:transit-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-eXH6J-1}}\RA{});
    stmt.addBatch(\LA{}Create View dist\_r\_detour statement (Eq.~\ref{eq:detour-distance})~{\nwtagstyle{}\subpageref{NW27XAxz-4OnMrk-1}}\RA{});
    stmt.addBatch(\LA{}Create View dur\_s\_travel statement~{\nwtagstyle{}\subpageref{NW27XAxz-3sQlba-1}}\RA{});
    stmt.addBatch(\LA{}Create View dur\_r\_pickup statement (Eq.~\ref{eq:pick-up delay})~{\nwtagstyle{}\subpageref{NW27XAxz-34NkTM-1}}\RA{});
    stmt.addBatch(\LA{}Create View dur\_r\_transit statement (Eq.~\ref{eq:transit-duration})~{\nwtagstyle{}\subpageref{NW27XAxz-Puojq-1}}\RA{});
    stmt.addBatch(\LA{}Create View dur\_r\_travel statement (Eq.~\ref{eq:travel-duration})~{\nwtagstyle{}\subpageref{NW27XAxz-3a0WDv-1}}\RA{});
    stmt.addBatch(\LA{}Create View t\_r\_depart statement (Eq.~\ref{eq:departure-time})~{\nwtagstyle{}\subpageref{NW27XAxz-45SyYZ-1}}\RA{});
    stmt.addBatch(\LA{}Create View t\_s\_depart statement (Eq.~\ref{eq:departure-time})~{\nwtagstyle{}\subpageref{NW27XAxz-2riY0r-1}}\RA{});
    stmt.addBatch(\LA{}Create View t\_r\_arrive statement (Eq.~\ref{eq:arrival-time})~{\nwtagstyle{}\subpageref{NW27XAxz-28E5sQ-1}}\RA{});
    stmt.addBatch(\LA{}Create View t\_s\_arrive statement (Eq.~\ref{eq:arrival-time})~{\nwtagstyle{}\subpageref{NW27XAxz-3oL4CY-1}}\RA{});
    stmt.executeBatch();
    conn.commit();
    conn.close();
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-4P4YpK-1-u39}\nwindexdefn{DBLoadDataModel}{DBLoadDataModel}{NW27XAxz-4P4YpK-1}\eatline
\nwidentdefs{\\{{DBLoadDataModel}{DBLoadDataModel}}}\nwidentuses{\\{{Print}{Print}}}\nwindexuse{Print}{Print}{NW27XAxz-4P4YpK-1}\nwendcode{}\nwbegindocs{108}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBLoadBackup}{DBLoadBackup}{NW27XAxz-b3Hn1-1}DBLoadBackup}(1)}
The {\tt{}\protect\nwindexuse{DBLoadBackup}{DBLoadBackup}{NW27XAxz-b3Hn1-1}DBLoadBackup}(1) method can load a previously saved database snapshot
into the storage layer. In this case, we need to reset the JDBC driver to use a
different connection URL that points to the on-disk snapshot. The snapshot is
then loaded into a new in-memory Derby instance.
\nwenddocs{}\nwbegincode{109}\sublabel{NW27XAxz-b3Hn1-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-b3Hn1-1}}}\moddef{Load backup~{\nwtagstyle{}\subpageref{NW27XAxz-b3Hn1-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-1}}
public void DBLoadBackup(String p) throws RuntimeException \{
  Print("Load database backup ("+p+")");
  try \{
    CONNECTIONS_URL = "jdbc:derby:memory:jargobak;createFrom="+p;
    setupDriver();
    \LA{}..configure database properties~{\nwtagstyle{}\subpageref{NW27XAxz-2WrnDp-1}}\RA{}
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-b3Hn1-1-u2}\nwindexdefn{DBLoadBackup}{DBLoadBackup}{NW27XAxz-b3Hn1-1}\eatline
\nwidentdefs{\\{{DBLoadBackup}{DBLoadBackup}}}\nwidentuses{\\{{CONNECTIONS{\char95}URL}{CONNECTIONS:unURL}}\\{{Print}{Print}}\\{{setupDriver}{setupDriver}}}\nwindexuse{CONNECTIONS{\char95}URL}{CONNECTIONS:unURL}{NW27XAxz-b3Hn1-1}\nwindexuse{Print}{Print}{NW27XAxz-b3Hn1-1}\nwindexuse{setupDriver}{setupDriver}{NW27XAxz-b3Hn1-1}\nwendcode{}\nwbegindocs{110}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBSaveBackup}{DBSaveBackup}{NW27XAxz-2OKmqF-1}DBSaveBackup}(1)}
The {\tt{}\protect\nwindexuse{DBSaveBackup}{DBSaveBackup}{NW27XAxz-2OKmqF-1}DBSaveBackup}(1) method can save a database snapshot to disk.
\nwenddocs{}\nwbegincode{111}\sublabel{NW27XAxz-2OKmqF-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2OKmqF-1}}}\moddef{Save backup~{\nwtagstyle{}\subpageref{NW27XAxz-2OKmqF-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-1}}
public void DBSaveBackup(String p) throws RuntimeException \{
  try \{
    Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
    CallableStatement cs = conn.prepareCall(
      "CALL SYSCS_UTIL.SYSCS_BACKUP_DATABASE(?)");
    cs.setString(1, p);
    cs.execute();
    conn.close();
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-2OKmqF-1-u1}\nwindexdefn{DBSaveBackup}{DBSaveBackup}{NW27XAxz-2OKmqF-1}\eatline
\nwidentdefs{\\{{DBSaveBackup}{DBSaveBackup}}}\nwendcode{}\nwbegindocs{112}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{printSQLDriverStatistics}{printSQLDriverStatistics}{NW27XAxz-1lVtry-1}printSQLDriverStatistics}(0)}
The following code comes from the Apache DBCP2 examples and is licensed by the
Apache Software Foundation. It prints the number of active and idle connections
in the JDBC connection pool.
\nwenddocs{}\nwbegincode{113}\sublabel{NW27XAxz-1lVtry-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1lVtry-1}}}\moddef{Print SQL driver statistics~{\nwtagstyle{}\subpageref{NW27XAxz-1lVtry-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-1}}
public void printSQLDriverStatistics() \{
  try \{
    PoolingDriver d = (PoolingDriver) DriverManager.getDriver(CONNECTIONS_DRIVER_URL);
    ObjectPool<? extends Connection> cp = d.getConnectionPool(CONNECTIONS_POOL_NAME);
    Print("Connections: "+cp.getNumActive()+" active; "+cp.getNumIdle()+" idle");
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-1lVtry-1-u1}\nwindexdefn{printSQLDriverStatistics}{printSQLDriverStatistics}{NW27XAxz-1lVtry-1}\eatline
\nwidentdefs{\\{{printSQLDriverStatistics}{printSQLDriverStatistics}}}\nwidentuses{\\{{CONNECTIONS{\char95}DRIVER{\char95}URL}{CONNECTIONS:unDRIVER:unURL}}\\{{CONNECTIONS{\char95}POOL{\char95}NAME}{CONNECTIONS:unPOOL:unNAME}}\\{{Print}{Print}}}\nwindexuse{CONNECTIONS{\char95}DRIVER{\char95}URL}{CONNECTIONS:unDRIVER:unURL}{NW27XAxz-1lVtry-1}\nwindexuse{CONNECTIONS{\char95}POOL{\char95}NAME}{CONNECTIONS:unPOOL:unNAME}{NW27XAxz-1lVtry-1}\nwindexuse{Print}{Print}{NW27XAxz-1lVtry-1}\nwendcode{}\nwbegindocs{114}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{printSQLException}{printSQLException}{NW27XAxz-31QNBg-1}printSQLException}(1)}
\label{sec:printSQLException(1)}
The {\tt{}\protect\nwindexuse{printSQLException}{printSQLException}{NW27XAxz-31QNBg-1}printSQLException} method  unwraps the entire exception chain to unveil
the real cause of a {\tt{}SQLException}.  This portion is licensed by the Apache
Software Foundation.
\nwenddocs{}\nwbegincode{115}\sublabel{NW27XAxz-31QNBg-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-31QNBg-1}}}\moddef{Print SQL exception~{\nwtagstyle{}\subpageref{NW27XAxz-31QNBg-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-1}}
public void printSQLException(SQLException e) \{
  while (e != null) \{
    System.err.println("\\n----- SQLException -----");
    System.err.println("  SQL State:  " + e.getSQLState());
    System.err.println("  Error Code: " + e.getErrorCode());
    System.err.println("  Message:    " + e.getMessage());
    e.printStackTrace(System.err);
    e = e.getNextException();
  \}
\}
\nwindexdefn{printSQLException}{printSQLException}{NW27XAxz-31QNBg-1}\eatline
\nwidentdefs{\\{{printSQLException}{printSQLException}}}\nwendcode{}\nwbegindocs{116}If {\tt{}SQLException} occurs anywhere in the storage interface, we handle it using:
\begin{itemize}
\item Catch-and-print, for top-level operations that can continue after the
exception. Prints {\tt{}SQLException}s arising out of low-level SQL operations.
Automatically exports the last good state of the database to disk for offline
analysis.
\nwenddocs{}\nwbegincode{117}\sublabel{NW27XAxz-4P0tKA-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}}\moddef{Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}}\endmoddef\nwused{\\{NW27XAxz-4P4YpK-1}\\{NW27XAxz-b3Hn1-1}\\{NW27XAxz-2OKmqF-1}\\{NW27XAxz-1lVtry-1}\\{NW27XAxz-28BJIM-1}\\{NW27XAxz-1r65Fb-1}\\{NW27XAxz-3SpUqj-1}\\{NW27XAxz-4ISWm4-1}\\{NW27XAxz-IYVQQ-1}\\{NW27XAxz-4VFddh-1}\\{NW27XAxz-y828a-1}\\{NW27XAxz-lMiTm-1}\\{NW27XAxz-1MI9ro-1}\\{NW27XAxz-3UaQCb-1}}
catch (SQLException e1) \{
  printSQLException(e1);
  DBSaveBackup(DERBY_DUMPNAME);
  throw new RuntimeException("database failure");
\}
\nwidentuses{\\{{DBSaveBackup}{DBSaveBackup}}\\{{DERBY{\char95}DUMPNAME}{DERBY:unDUMPNAME}}\\{{printSQLException}{printSQLException}}}\nwindexuse{DBSaveBackup}{DBSaveBackup}{NW27XAxz-4P0tKA-1}\nwindexuse{DERBY{\char95}DUMPNAME}{DERBY:unDUMPNAME}{NW27XAxz-4P0tKA-1}\nwindexuse{printSQLException}{printSQLException}{NW27XAxz-4P0tKA-1}\nwendcode{}\nwbegindocs{118}\item Catch-and-throw, for low-level SQL operations where an exception is
fatal. Simply re-throws the exception.
\nwenddocs{}\nwbegincode{119}\sublabel{NW27XAxz-2x6EhZ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2x6EhZ-1}}}\moddef{Catch and throw \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-2x6EhZ-1}}}\endmoddef\nwused{\\{NW27XAxz-4UQpM2-1}\\{NW27XAxz-17Zt8W-1}\\{NW27XAxz-1ZE0ye-1}\\{NW27XAxz-322zJf-1}}
catch (SQLException e) \{
  throw e;
\}
\nwendcode{}\nwbegindocs{120}\nwdocspar
\end{itemize}

\subsection{Write Methods}
\label{sec:write-methods}
None of the write methods perform input validation, instead delegating that
task to the database. If a method argument results in a database error, the
method uses catch-and-print (\S\ref{sec:printSQLException(1)}) to throw a
{\tt{}RuntimeException}.

All write methods do a commit-and-close on a database connection. To save
a little bit of space, we put this procedure into its own chunk here.
\nwenddocs{}\nwbegincode{121}\sublabel{NW27XAxz-3pffr6-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}}\moddef{..commit and close~{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}}\endmoddef\nwused{\\{NW27XAxz-28BJIM-1}\\{NW27XAxz-1r65Fb-1}\\{NW27XAxz-3SpUqj-1}\\{NW27XAxz-4ISWm4-1}\\{NW27XAxz-IYVQQ-1}\\{NW27XAxz-4VFddh-1}\\{NW27XAxz-y828a-1}\\{NW27XAxz-lMiTm-1}}
conn.commit();
conn.close();
\nwendcode{}\nwbegindocs{122}\nwdocspar

\subsubsection{{\tt{}\protect\nwindexuse{DBAddNewVertex}{DBAddNewVertex}{NW27XAxz-28BJIM-1}DBAddNewVertex}(3)}
The {\tt{}\protect\nwindexuse{DBAddNewVertex}{DBAddNewVertex}{NW27XAxz-28BJIM-1}DBAddNewVertex}(3) method is used by the Controller to load an on-disk
road network into the database. Duplicate-prevention is included here so the
Controller doesn't have to.
\nwenddocs{}\nwbegincode{123}\sublabel{NW27XAxz-28BJIM-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-28BJIM-1}}}\moddef{Add new vertex~{\nwtagstyle{}\subpageref{NW27XAxz-28BJIM-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-2}}
public void DBAddNewVertex(int v, int lng, int lat) throws RuntimeException \{
  if (!lu_vertices.containsKey(v)) \{
    try \{
      Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
      PreparedStatement pS0 = PS(conn, "S0");
      PSAdd(pS0, v, lng, lat);
      PSSubmit(pS0);
      \LA{}..commit and close~{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}\RA{}
      lu_vertices.put(v, new int[] \{ lng, lat \});
    \}
    \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
  \}
\}
\nosublabel{NW27XAxz-28BJIM-1-u2}\nwindexdefn{DBAddNewVertex}{DBAddNewVertex}{NW27XAxz-28BJIM-1}\eatline
\nwidentdefs{\\{{DBAddNewVertex}{DBAddNewVertex}}}\nwidentuses{\\{{lu{\char95}vertices}{lu:unvertices}}\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S0}{S0}}}\nwindexuse{lu{\char95}vertices}{lu:unvertices}{NW27XAxz-28BJIM-1}\nwindexuse{PS}{PS}{NW27XAxz-28BJIM-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-28BJIM-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-28BJIM-1}\nwindexuse{S0}{S0}{NW27XAxz-28BJIM-1}\nwendcode{}\nwbegindocs{124}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBAddNewEdge}{DBAddNewEdge}{NW27XAxz-1r65Fb-1}DBAddNewEdge}(4)}
The {\tt{}\protect\nwindexuse{DBAddNewEdge}{DBAddNewEdge}{NW27XAxz-1r65Fb-1}DBAddNewEdge}(4) method is also used to load an on-disk road network
into the database.
\nwenddocs{}\nwbegincode{125}\sublabel{NW27XAxz-1r65Fb-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1r65Fb-1}}}\moddef{Add new edge~{\nwtagstyle{}\subpageref{NW27XAxz-1r65Fb-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-2}}
public void DBAddNewEdge(int v1, int v2, int dd, int nu) throws RuntimeException \{
  if (!lu_edges.containsKey(v1)) \{
    lu_edges.put(v1, new HashMap<>());
  \}
  if (!lu_edges.get(v1).containsKey(v2)) \{
    try \{
      Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
      PreparedStatement pS1 = PS(conn, "S1");
      PSAdd(pS1, v1, v2, dd, nu);
      PSSubmit(pS1);
      \LA{}..commit and close~{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}\RA{}
      lu_edges.get(v1).put(v2, new int[] \{ dd, nu \});
    \}
    \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
  \}
\}
\nosublabel{NW27XAxz-1r65Fb-1-u2}\nwindexdefn{DBAddNewEdge}{DBAddNewEdge}{NW27XAxz-1r65Fb-1}\eatline
\nwidentdefs{\\{{DBAddNewEdge}{DBAddNewEdge}}}\nwidentuses{\\{{lu{\char95}edges}{lu:unedges}}\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S1}{S1}}}\nwindexuse{lu{\char95}edges}{lu:unedges}{NW27XAxz-1r65Fb-1}\nwindexuse{PS}{PS}{NW27XAxz-1r65Fb-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-1r65Fb-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-1r65Fb-1}\nwindexuse{S1}{S1}{NW27XAxz-1r65Fb-1}\nwendcode{}\nwbegindocs{126}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBUpdateEdgeSpeed}{DBUpdateEdgeSpeed}{NW27XAxz-3SpUqj-1}DBUpdateEdgeSpeed}(3)}
The {\tt{}\protect\nwindexuse{DBUpdateEdgeSpeed}{DBUpdateEdgeSpeed}{NW27XAxz-3SpUqj-1}DBUpdateEdgeSpeed}(3) method updates the maximum free-flow speed of an
edge in the road network (in meters per second).
\nwenddocs{}\nwbegincode{127}\sublabel{NW27XAxz-3SpUqj-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3SpUqj-1}}}\moddef{Update edge speed~{\nwtagstyle{}\subpageref{NW27XAxz-3SpUqj-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-2}}
public void DBUpdateEdgeSpeed(int v1, int v2, int nu) throws RuntimeException \{
  try \{
    Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
    PreparedStatement pS15 = PS(conn, "S15");
    PreparedStatement pS131 = PS(conn, "S131");
    PSAdd(pS15, nu, v1, v2);
    PSAdd(pS131, nu, v1, v2);
    PSSubmit(pS15, pS131);
    \LA{}..commit and close~{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}\RA{}
    \LA{}..update edges cache~{\nwtagstyle{}\subpageref{NW27XAxz-4E7vbl-1}}\RA{}
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-3SpUqj-1-u3}\nwindexdefn{DBUpdateEdgeSpeed}{DBUpdateEdgeSpeed}{NW27XAxz-3SpUqj-1}\eatline
\nwidentdefs{\\{{DBUpdateEdgeSpeed}{DBUpdateEdgeSpeed}}}\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S131}{S131}}\\{{S15}{S15}}}\nwindexuse{PS}{PS}{NW27XAxz-3SpUqj-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-3SpUqj-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-3SpUqj-1}\nwindexuse{S131}{S131}{NW27XAxz-3SpUqj-1}\nwindexuse{S15}{S15}{NW27XAxz-3SpUqj-1}\nwendcode{}\nwbegincode{128}\sublabel{NW27XAxz-4E7vbl-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4E7vbl-1}}}\moddef{..update edges cache~{\nwtagstyle{}\subpageref{NW27XAxz-4E7vbl-1}}}\endmoddef\nwused{\\{NW27XAxz-3SpUqj-1}}
int dd = lu_edges.get(v1).get(v2)[0];
lu_edges.get(v1).put(v2, new int[] \{ dd, nu \});
\nwidentuses{\\{{lu{\char95}edges}{lu:unedges}}}\nwindexuse{lu{\char95}edges}{lu:unedges}{NW27XAxz-4E7vbl-1}\nwendcode{}\nwbegindocs{129}\nwdocspar

\subsubsection{{\tt{}\protect\nwindexuse{DBAddNewRequest}{DBAddNewRequest}{NW27XAxz-4ISWm4-1}DBAddNewRequest}(1)}
Array {\tt{}u} =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:\textrm{user identifier}$};
 &\node {$1:u_q$}; & \node {$2:u_e$}; & \node {$3:u_l$};
 &\node {$4:u_o$}; & \node {$5:u_d$}; & \node {$6:d_u$};\\
};
\end{tikzpicture}

\noindent for user $u$, where $d_u$ is the base distance.
The value of $u_q$ \emph{must} be greater than 0.

\nwenddocs{}\nwbegincode{130}\sublabel{NW27XAxz-4ISWm4-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4ISWm4-1}}}\moddef{Add new request~{\nwtagstyle{}\subpageref{NW27XAxz-4ISWm4-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-2}}
public void DBAddNewRequest(int[] u) throws RuntimeException \{
  try \{
    Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
    int uid = u[0];
    \LA{}..insert new user into user tables~{\nwtagstyle{}\subpageref{NW27XAxz-4ROa6q-1}}\RA{}
    \LA{}..insert new request into r~{\nwtagstyle{}\subpageref{NW27XAxz-44Ff7c-1}}\RA{}
    \LA{}..commit and close~{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}\RA{}
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-4ISWm4-1-u4}\nwindexdefn{DBAddNewRequest}{DBAddNewRequest}{NW27XAxz-4ISWm4-1}\eatline
\nwidentdefs{\\{{DBAddNewRequest}{DBAddNewRequest}}}\nwendcode{}\nwbegincode{131}\sublabel{NW27XAxz-4ROa6q-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4ROa6q-1}}}\moddef{..insert new user into user tables~{\nwtagstyle{}\subpageref{NW27XAxz-4ROa6q-1}}}\endmoddef\nwused{\\{NW27XAxz-4ISWm4-1}\\{NW27XAxz-IYVQQ-1}}
PreparedStatement pS2 = PS(conn, "S2");
PreparedStatement pS3 = PS(conn, "S3");
PreparedStatement pS4 = PS(conn, "S4");
PreparedStatement pS5 = PS(conn, "S5");
PreparedStatement pS6 = PS(conn, "S6");
PreparedStatement pS7 = PS(conn, "S7");
PSAdd(pS2, uid, u[1]);
PSAdd(pS3, uid, u[2]);
PSAdd(pS4, uid, u[3]);
PSAdd(pS5, uid, u[4]);
PSAdd(pS6, uid, u[5]);
PSAdd(pS7, uid, u[6]);
PSSubmit(pS2, pS3, pS4, pS5, pS6, pS7);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S2}{S2}}\\{{S3}{S3}}\\{{S4}{S4}}\\{{S5}{S5}}\\{{S6}{S6}}\\{{S7}{S7}}}\nwindexuse{PS}{PS}{NW27XAxz-4ROa6q-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-4ROa6q-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-4ROa6q-1}\nwindexuse{S2}{S2}{NW27XAxz-4ROa6q-1}\nwindexuse{S3}{S3}{NW27XAxz-4ROa6q-1}\nwindexuse{S4}{S4}{NW27XAxz-4ROa6q-1}\nwindexuse{S5}{S5}{NW27XAxz-4ROa6q-1}\nwindexuse{S6}{S6}{NW27XAxz-4ROa6q-1}\nwindexuse{S7}{S7}{NW27XAxz-4ROa6q-1}\nwendcode{}\nwbegindocs{132}\nwdocspar
\nwenddocs{}\nwbegincode{133}\sublabel{NW27XAxz-44Ff7c-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-44Ff7c-1}}}\moddef{..insert new request into r~{\nwtagstyle{}\subpageref{NW27XAxz-44Ff7c-1}}}\endmoddef\nwused{\\{NW27XAxz-4ISWm4-1}}
PreparedStatement pS9 = PS(conn, "S9");
PSAdd(pS9, uid, u[1], u[2], u[3], u[4], u[5], u[6]);
PSSubmit(pS9);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S9}{S9}}}\nwindexuse{PS}{PS}{NW27XAxz-44Ff7c-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-44Ff7c-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-44Ff7c-1}\nwindexuse{S9}{S9}{NW27XAxz-44Ff7c-1}\nwendcode{}\nwbegindocs{134}\nwdocspar

\subsubsection{{\tt{}\protect\nwindexuse{DBAddNewServer}{DBAddNewServer}{NW27XAxz-IYVQQ-1}DBAddNewServer}(2)}
Array {\tt{}u} =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:\textrm{user identifier}$};
 &\node {$1:u_q$}; & \node {$2:u_e$}; & \node {$3:u_l$};
 &\node {$4:u_o$}; & \node {$5:u_d$}; & \node {$6:d_u$};\\
};
\end{tikzpicture}

\noindent for user $u$, where $d_u$ is the base distance.
The value of $u_q$ \emph{must} be less than 0. Array {\tt{}route} =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:t_i$}; & \node {$1:v_i$};
 &\node {$0:t_{i+1}$}; & \node {$1:v_{i+1}$};
 &\node[minimum width=12mm] {...};
 &\node {$(2|w|-2):t_{|w|}$}; & \node {$(2|w|-1):v_{|w|}$};\\
};
\end{tikzpicture}

\noindent for route $w$.

\nwenddocs{}\nwbegincode{135}\sublabel{NW27XAxz-IYVQQ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-IYVQQ-1}}}\moddef{Add new server~{\nwtagstyle{}\subpageref{NW27XAxz-IYVQQ-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-2}}
public void DBAddNewServer(int[] u, int[] route) throws RuntimeException \{
  try \{
    Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
    int uid = u[0];
    int se = u[2];
    \LA{}..insert new user into user tables~{\nwtagstyle{}\subpageref{NW27XAxz-4ROa6q-1}}\RA{}
    \LA{}..insert new server into s~{\nwtagstyle{}\subpageref{NW27XAxz-JGp6y-1}}\RA{}
    \LA{}..insert new server route into w~{\nwtagstyle{}\subpageref{NW27XAxz-3xg8Fp-1}}\RA{}
    \LA{}..insert new server route into cw~{\nwtagstyle{}\subpageref{NW27XAxz-2GDxmx-1}}\RA{}
    \LA{}..insert new server into cq~{\nwtagstyle{}\subpageref{NW27XAxz-404DhQ-1}}\RA{}
    \LA{}..commit and close~{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}\RA{}
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-IYVQQ-1-u7}\nwindexdefn{DBAddNewServer}{DBAddNewServer}{NW27XAxz-IYVQQ-1}\eatline
\nwidentdefs{\\{{DBAddNewServer}{DBAddNewServer}}}\nwendcode{}\nwbegincode{136}\sublabel{NW27XAxz-JGp6y-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-JGp6y-1}}}\moddef{..insert new server into s~{\nwtagstyle{}\subpageref{NW27XAxz-JGp6y-1}}}\endmoddef\nwused{\\{NW27XAxz-IYVQQ-1}}
PreparedStatement pS8 = PS(conn, "S8");
PSAdd(pS8, uid, u[1], u[2], u[3], u[4], u[5], u[6]);
PSSubmit(pS8);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S8}{S8}}}\nwindexuse{PS}{PS}{NW27XAxz-JGp6y-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-JGp6y-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-JGp6y-1}\nwindexuse{S8}{S8}{NW27XAxz-JGp6y-1}\nwendcode{}\nwbegindocs{137}\nwdocspar
The procedure to insert {\tt{}route} into Table W is written into its own chunk so
we can re-use it later. The procedure requires an integer array {\tt{}output}.
After the procedure, we can re-initialize prepared statement {\tt{}pS10} to add the first
waypoint, with {\tt{}null} as its predecessor, into the database.
\nwenddocs{}\nwbegincode{138}\sublabel{NW27XAxz-3xg8Fp-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3xg8Fp-1}}}\moddef{..insert new server route into w~{\nwtagstyle{}\subpageref{NW27XAxz-3xg8Fp-1}}}\endmoddef\nwused{\\{NW27XAxz-IYVQQ-1}}
int[] output = new int[] \{ \};
\LA{}Procedure to insert \code{}route\edoc{} into Table W~{\nwtagstyle{}\subpageref{NW27XAxz-1EP7t-1}}\RA{}
pS10 = PS(conn, "S10");
PSAdd(pS10, uid, se, null, null, route[0], route[1], null, null);
PSSubmit(pS10);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S10}{S10}}}\nwindexuse{PS}{PS}{NW27XAxz-3xg8Fp-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-3xg8Fp-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-3xg8Fp-1}\nwindexuse{S10}{S10}{NW27XAxz-3xg8Fp-1}\nwendcode{}\nwbegindocs{139}\nwdocspar
\nwenddocs{}\nwbegincode{140}\sublabel{NW27XAxz-1EP7t-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1EP7t-1}}}\moddef{Procedure to insert \code{}route\edoc{} into Table W~{\nwtagstyle{}\subpageref{NW27XAxz-1EP7t-1}}}\endmoddef\nwused{\\{NW27XAxz-3xg8Fp-1}\\{NW27XAxz-2BaQBV-1}}
PreparedStatement pS10 = PS(conn, "S10");
for (int i = 0; i < (route.length - 3); i += 2) \{
  int t1 = route[i];
  int v1 = route[(i + 1)];
  int t2 = route[(i + 2)];
  int v2 = route[(i + 3)];
  output = DBFetch("S46", 2, v1, v2);
  int dd = output[0];
  int nu = output[1];
  PSAdd(pS10, uid, se, t1, v1, t2, v2, dd, nu);
\}
PSSubmit(pS10);
\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S10}{S10}}\\{{S46}{S46}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1EP7t-1}\nwindexuse{PS}{PS}{NW27XAxz-1EP7t-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-1EP7t-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-1EP7t-1}\nwindexuse{S10}{S10}{NW27XAxz-1EP7t-1}\nwindexuse{S46}{S46}{NW27XAxz-1EP7t-1}\nwendcode{}\nwbegindocs{141}\nwdocspar
\nwenddocs{}\nwbegincode{142}\sublabel{NW27XAxz-2GDxmx-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2GDxmx-1}}}\moddef{..insert new server route into cw~{\nwtagstyle{}\subpageref{NW27XAxz-2GDxmx-1}}}\endmoddef\nwused{\\{NW27XAxz-IYVQQ-1}}
PreparedStatement pS11 = PS(conn, "S11");
int te = route[(route.length - 2)];
PSAdd(pS11, uid, u[2], u[3], u[4], u[5], u[2], u[4], te, u[5]);
PSSubmit(pS11);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S11}{S11}}}\nwindexuse{PS}{PS}{NW27XAxz-2GDxmx-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-2GDxmx-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-2GDxmx-1}\nwindexuse{S11}{S11}{NW27XAxz-2GDxmx-1}\nwendcode{}\nwbegindocs{143}\nwdocspar
\nwenddocs{}\nwbegincode{144}\sublabel{NW27XAxz-404DhQ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-404DhQ-1}}}\moddef{..insert new server into cq~{\nwtagstyle{}\subpageref{NW27XAxz-404DhQ-1}}}\endmoddef\nwused{\\{NW27XAxz-IYVQQ-1}}
PreparedStatement pS14 = PS(conn, "S14");
PSAdd(pS14, uid, u[1], u[2], null, u[2], u[4], null, u[1],
    null, null, null, null, null, 1);
PSSubmit(pS14);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S14}{S14}}}\nwindexuse{PS}{PS}{NW27XAxz-404DhQ-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-404DhQ-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-404DhQ-1}\nwindexuse{S14}{S14}{NW27XAxz-404DhQ-1}\nwendcode{}\nwbegindocs{145}\nwdocspar

\subsubsection{{\tt{}\protect\nwindexuse{DBUpdateServerRoute}{DBUpdateServerRoute}{NW27XAxz-4VFddh-1}DBUpdateServerRoute}(3)}
The {\tt{}\protect\nwindexuse{DBUpdateServerRoute}{DBUpdateServerRoute}{NW27XAxz-4VFddh-1}DBUpdateServerRoute}(3) method can be used to
\begin{enumerate}
\item update the route of a server with no schedule;
\item update the route of a server through the server's existing schedule;
\item update the ordering of the remaining stops in the server's schedule.
\end{enumerate}
To perform Item 1, pass the new route as {\tt{}route} and an empty array as
{\tt{}sched}. To perform Item 2, pass the new route as {\tt{}route}. Then as the
timing of the stops in the schedule may have changed, pass along the updated
timings in {\tt{}sched}. To perform Item 3, pass the new arrangement in {\tt{}sched}
and the new route through the arrangement as {\tt{}route}.

Array {\tt{}route} =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:t_i$}; & \node {$1:v_i$};
 &\node {$2:t_{i+1}$}; & \node {$3:v_{i+1}$};
 &\node[minimum width=12mm] {...};
 &\node {$(2|w|-2):t_{|w|}$}; & \node {$(2|w|-1):v_{|w|}$};\\
};
\end{tikzpicture}

\noindent for route $w$. Array {\tt{}sched} =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:t_{i_j}$}; & \node {$1:v_{i_j}$}; & \node {$2:L_{i_j}$};
 &\node {$3:t_{i_{j+1}}$}; & \node {$4:v_{i_{j+1}}$}; & \node {$5:L_{i_{j+1}}$};
 &\node[minimum width=12mm] {...};
 &\node {$(3|b|-3):t_{i_{|b|}}$};
 &\node {$(3|b|-2):v_{i_{|b|}}$};
 &\node {$(3|b|-1):L_{i_{|b|}}$}; \\
};
\end{tikzpicture}

\noindent for schedule $b$, where $(t_{i_j},v_{i_j})$ make up a waypoint and
$L_{i_j}$ is the label. Important notes:
\begin{itemize}
\item all waypoints beyond $t_i$ in the existing route will be replaced with
those in {\tt{}route};
\item all stops beyond $(t_{i_j},v_{i_j})$ in the existing schedule will be
replaced with those in {\tt{}sched};
\item waypoint $(t_i,v_i)$ \emph{must} exist in the current route;
\item index $i_j$ must \emph{not} equal $i$; in other words the first waypoint
in {\tt{}route} cannot be labeled.
\end{itemize}

\nwenddocs{}\nwbegincode{146}\sublabel{NW27XAxz-4VFddh-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4VFddh-1}}}\moddef{Update server route~{\nwtagstyle{}\subpageref{NW27XAxz-4VFddh-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-2}}
public void DBUpdateServerRoute(int sid, int[] route, int[] sched)
throws RuntimeException \{
  int[] output = new int[] \{ \};
  int se, sq;
  try \{
    Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
    \LA{}..fetch \code{}sq\edoc{} and \code{}se\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-2VNDCH-1}}\RA{}
    \LA{}..update route~{\nwtagstyle{}\subpageref{NW27XAxz-4LV9nl-1}}\RA{}
    if (sched.length > 0) \{
      Map<Integer, int[]> cache = new HashMap<>();
      \LA{}..update schedule~{\nwtagstyle{}\subpageref{NW27XAxz-2NqWTJ-1}}\RA{}
    \}
    \LA{}..commit and close~{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}\RA{}
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-4VFddh-1-u5}\nwindexdefn{DBUpdateServerRoute}{DBUpdateServerRoute}{NW27XAxz-4VFddh-1}\eatline
\nwidentdefs{\\{{DBUpdateServerRoute}{DBUpdateServerRoute}}}\nwendcode{}\nwbegincode{147}\sublabel{NW27XAxz-2VNDCH-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2VNDCH-1}}}\moddef{..fetch \code{}sq\edoc{} and \code{}se\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-2VNDCH-1}}}\endmoddef\nwused{\\{NW27XAxz-4VFddh-1}\\{NW27XAxz-y828a-1}\\{NW27XAxz-lMiTm-1}}
output = DBFetch("S48", 2, sid);
sq = output[0];
se = output[1];
\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S48}{S48}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-2VNDCH-1}\nwindexuse{S48}{S48}{NW27XAxz-2VNDCH-1}\nwendcode{}\nwbegindocs{148}\nwdocspar
\nwenddocs{}\nwbegincode{149}\sublabel{NW27XAxz-4LV9nl-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4LV9nl-1}}}\moddef{..update route~{\nwtagstyle{}\subpageref{NW27XAxz-4LV9nl-1}}}\endmoddef\nwused{\\{NW27XAxz-4VFddh-1}\\{NW27XAxz-y828a-1}\\{NW27XAxz-lMiTm-1}}
\LA{}....delete remaining route from w~{\nwtagstyle{}\subpageref{NW27XAxz-1n0DBP-1}}\RA{}
\LA{}....insert new remaining route into w~{\nwtagstyle{}\subpageref{NW27XAxz-2BaQBV-1}}\RA{}
\LA{}....update route endpoint in cw~{\nwtagstyle{}\subpageref{NW27XAxz-2JeImF-1}}\RA{}
\nwendcode{}\nwbegindocs{150}\nwdocspar
\nwenddocs{}\nwbegincode{151}\sublabel{NW27XAxz-1n0DBP-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1n0DBP-1}}}\moddef{....delete remaining route from w~{\nwtagstyle{}\subpageref{NW27XAxz-1n0DBP-1}}}\endmoddef\nwused{\\{NW27XAxz-4LV9nl-1}}
PreparedStatement pS76 = PS(conn, "S76");
PSAdd(pS76, sid, route[0]);
PSSubmit(pS76);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S76}{S76}}}\nwindexuse{PS}{PS}{NW27XAxz-1n0DBP-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-1n0DBP-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-1n0DBP-1}\nwindexuse{S76}{S76}{NW27XAxz-1n0DBP-1}\nwendcode{}\nwbegindocs{152}\nwdocspar
The chunk for inserting {\tt{}route} into Table W uses {\tt{}uid}, so we set it here.
\nwenddocs{}\nwbegincode{153}\sublabel{NW27XAxz-2BaQBV-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2BaQBV-1}}}\moddef{....insert new remaining route into w~{\nwtagstyle{}\subpageref{NW27XAxz-2BaQBV-1}}}\endmoddef\nwused{\\{NW27XAxz-4LV9nl-1}}
int uid = sid;
\LA{}Procedure to insert \code{}route\edoc{} into Table W~{\nwtagstyle{}\subpageref{NW27XAxz-1EP7t-1}}\RA{}
\nwendcode{}\nwbegindocs{154}\nwdocspar
\nwenddocs{}\nwbegincode{155}\sublabel{NW27XAxz-2JeImF-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2JeImF-1}}}\moddef{....update route endpoint in cw~{\nwtagstyle{}\subpageref{NW27XAxz-2JeImF-1}}}\endmoddef\nwused{\\{NW27XAxz-4LV9nl-1}}
PreparedStatement pS77 = PS(conn, "S77");
int te = route[(route.length - 2)];
int ve = route[(route.length - 1)];
PSAdd(pS77, te, ve, sid);
PSSubmit(pS77);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S77}{S77}}}\nwindexuse{PS}{PS}{NW27XAxz-2JeImF-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-2JeImF-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-2JeImF-1}\nwindexuse{S77}{S77}{NW27XAxz-2JeImF-1}\nwendcode{}\nwbegindocs{156}\nwdocspar
If a table needs to be accessed multiple times, the {\tt{}SELECT} statements
should go before any {\tt{}INSERT}, {\tt{}UPDATE}, or {\tt{}DELETE} statements in
order to avoid locking issues.
\nwenddocs{}\nwbegincode{157}\sublabel{NW27XAxz-2NqWTJ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2NqWTJ-1}}}\moddef{..update schedule~{\nwtagstyle{}\subpageref{NW27XAxz-2NqWTJ-1}}}\endmoddef\nwused{\\{NW27XAxz-4VFddh-1}\\{NW27XAxz-lMiTm-1}}
int bound = (sched.length/3);
\LA{}....update times in pd and cpd~{\nwtagstyle{}\subpageref{NW27XAxz-1cwA5Z-1}}\RA{}
\LA{}....populate the tp, td cache~{\nwtagstyle{}\subpageref{NW27XAxz-2G68mE-1}}\RA{}
\LA{}....select latest order number~{\nwtagstyle{}\subpageref{NW27XAxz-1gWfDY-1}}\RA{}
\LA{}....delete remaining schedule from cq~{\nwtagstyle{}\subpageref{NW27XAxz-4AIXfi-1}}\RA{}
\LA{}....insert new remaining schedule into cq~{\nwtagstyle{}\subpageref{NW27XAxz-2Ir9Yx-1}}\RA{}
\nwendcode{}\nwbegindocs{158}\nwdocspar
\nwenddocs{}\nwbegincode{159}\sublabel{NW27XAxz-1cwA5Z-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1cwA5Z-1}}}\moddef{....update times in pd and cpd~{\nwtagstyle{}\subpageref{NW27XAxz-1cwA5Z-1}}}\endmoddef\nwused{\\{NW27XAxz-2NqWTJ-1}\\{NW27XAxz-2VQLMF-1}}
PreparedStatement pS82 = PS(conn, "S82");
PreparedStatement pS83 = PS(conn, "S83");
PreparedStatement pS84 = PS(conn, "S84");
for (int j = 0; j < bound; j++) \{
  int tj = sched[(3*j)];
  int vj = sched[(3*j + 1)];
  int Lj = sched[(3*j + 2)];
  if (Lj != sid) \{
    PSAdd(pS82, tj, vj, Lj);
    PSAdd(pS83, tj, vj, Lj);
    PSAdd(pS84, tj, vj, Lj);
  \}
\}
PSSubmit(pS82, pS83, pS84);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S82}{S82}}\\{{S83}{S83}}\\{{S84}{S84}}}\nwindexuse{PS}{PS}{NW27XAxz-1cwA5Z-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-1cwA5Z-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-1cwA5Z-1}\nwindexuse{S82}{S82}{NW27XAxz-1cwA5Z-1}\nwindexuse{S83}{S83}{NW27XAxz-1cwA5Z-1}\nwindexuse{S84}{S84}{NW27XAxz-1cwA5Z-1}\nwendcode{}\nwbegindocs{160}\nwdocspar
\nwenddocs{}\nwbegincode{161}\sublabel{NW27XAxz-2G68mE-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2G68mE-1}}}\moddef{....populate the tp, td cache~{\nwtagstyle{}\subpageref{NW27XAxz-2G68mE-1}}}\endmoddef\nwused{\\{NW27XAxz-2NqWTJ-1}}
for (int j = 0; j < bound; j++) \{
  int Lj = sched[(3*j + 2)];
  if (Lj != sid) \{
    int rq, tp, td;
    if (!cache.containsKey(Lj)) \{
      rq = DBFetch("S85", 1, Lj)[0];
      output = DBFetch("S86", 2, Lj);
      tp = output[0];
      td = output[1];
      cache.put(Lj, new int[] \{ rq, tp, td \});
    \}
  \}
\}
\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S85}{S85}}\\{{S86}{S86}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-2G68mE-1}\nwindexuse{S85}{S85}{NW27XAxz-2G68mE-1}\nwindexuse{S86}{S86}{NW27XAxz-2G68mE-1}\nwendcode{}\nwbegindocs{162}\nwdocspar
\nwenddocs{}\nwbegincode{163}\sublabel{NW27XAxz-1gWfDY-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1gWfDY-1}}}\moddef{....select latest order number~{\nwtagstyle{}\subpageref{NW27XAxz-1gWfDY-1}}}\endmoddef\nwused{\\{NW27XAxz-2NqWTJ-1}\\{NW27XAxz-2VQLMF-1}}
int t1, q1, o1;
output = DBFetch("S87", 3, sid, sched[0]);
t1 = output[0];
q1 = output[1];
o1 = output[2];
\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S87}{S87}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1gWfDY-1}\nwindexuse{S87}{S87}{NW27XAxz-1gWfDY-1}\nwendcode{}\nwbegindocs{164}\nwdocspar
\nwenddocs{}\nwbegincode{165}\sublabel{NW27XAxz-4AIXfi-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4AIXfi-1}}}\moddef{....delete remaining schedule from cq~{\nwtagstyle{}\subpageref{NW27XAxz-4AIXfi-1}}}\endmoddef\nwused{\\{NW27XAxz-2NqWTJ-1}\\{NW27XAxz-2VQLMF-1}}
PreparedStatement pS80 = PS(conn, "S80");
PSAdd(pS80, sid, route[0]);
PSSubmit(pS80);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S80}{S80}}}\nwindexuse{PS}{PS}{NW27XAxz-4AIXfi-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-4AIXfi-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-4AIXfi-1}\nwindexuse{S80}{S80}{NW27XAxz-4AIXfi-1}\nwendcode{}\nwbegindocs{166}\nwdocspar
\nwenddocs{}\nwbegincode{167}\sublabel{NW27XAxz-2Ir9Yx-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2Ir9Yx-1}}}\moddef{....insert new remaining schedule into cq~{\nwtagstyle{}\subpageref{NW27XAxz-2Ir9Yx-1}}}\endmoddef\nwused{\\{NW27XAxz-2NqWTJ-1}\\{NW27XAxz-2VQLMF-1}}
PreparedStatement pS14 = PS(conn, "S14");
for (int j = 0; j < bound; j++) \{
  int t2 = sched[(3*j)];
  int v2 = sched[(3*j + 1)];
  int Lj = sched[(3*j + 2)];
  if (Lj != sid) \{
    int[] qpd = cache.get(Lj);
    int q2 = (t2 == qpd[1] ? q1 + qpd[0] : q1 - qpd[0]);
    int o2 = o1 + 1;
    PSAdd(pS14, sid, sq, se, t1, t2, v2, q1, q2, Lj,
          qpd[0], qpd[1], qpd[2], o1, o2);
    t1 = t2;
    q1 = q2;
    o1 = o2;
  \}
\}
PSSubmit(pS14);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S14}{S14}}}\nwindexuse{PS}{PS}{NW27XAxz-2Ir9Yx-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-2Ir9Yx-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-2Ir9Yx-1}\nwindexuse{S14}{S14}{NW27XAxz-2Ir9Yx-1}\nwendcode{}\nwbegindocs{168}\nwdocspar

\subsubsection{{\tt{}\protect\nwindexuse{DBUpdateServerAddToSchedule}{DBUpdateServerAddToSchedule}{NW27XAxz-y828a-1}DBUpdateServerAddToSchedule}(4)}
The {\tt{}\protect\nwindexuse{DBUpdateServerAddToSchedule}{DBUpdateServerAddToSchedule}{NW27XAxz-y828a-1}DBUpdateServerAddToSchedule}(4) method can be used to add new labeled
waypoints to a server's existing remaining schedule. The ordering of the
remaining waypoints in the existing schedule does not have to be the same
upon adding the new waypoints. Pass the new remaining schedule as {\tt{}sched} and
the new route through this schedule as {\tt{}route}. Pass the identifiers of all
the requests used to label the new waypoints, in other words the new
requests assigned to the server, as array {\tt{}rid}.

Array {\tt{}route} =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:t_i$}; & \node {$1:v_i$};
 &\node {$2:t_{i+1}$}; & \node {$3:v_{i+1}$};
 &\node[minimum width=12mm] {...};
 &\node {$(2|w|-2):t_{|w|}$}; & \node {$(2|w|-1):v_{|w|}$};\\
};
\end{tikzpicture}

\noindent for route $w$. Array {\tt{}sched} =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:t_{i_j}$}; & \node {$1:v_{i_j}$}; & \node {$2:L_{i_j}$};
 &\node {$3:t_{i_{j+1}}$}; & \node {$4:v_{i_{j+1}}$}; & \node {$5:L_{i_{j+1}}$};
 &\node[minimum width=12mm] {...};
 &\node {$(3|b|-3):t_{i_{|b|}}$};
 &\node {$(3|b|-2):v_{i_{|b|}}$};
 &\node {$(3|b|-1):L_{i_{|b|}}$}; \\
};
\end{tikzpicture}

\noindent for schedule $b$, where $(t_{i_j},v_{i_j})$ make up a waypoint and
$L_{i_j}$ is the label. Array {\tt{}rid} = any permutation of

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:L_{i_{j'}}$};
 &\node {$1:L_{i_{(j'+1)}}$};
 &\node[minimum width=12mm] {...};
 &\node {$(n-1):L_{i_{(j'+n-1)}}$};\\
};
\end{tikzpicture}

\noindent where $i_{j'},i_{j'+1},...i_{j'+n-1}$ identify the $n$ new labels
(request identifiers) not appearing in the server's existing remaining
schedule.

Important notes:
\begin{itemize}
\item all waypoints beyond $t_i$ in the existing route will be replaced with
those in {\tt{}route};
\item all stops beyond $(t_{i_j},v_{i_j})$ in the existing schedule will be
replaced with those in {\tt{}sched};
\item waypoint $(t_i,v_i)$ \emph{must} exist in the current route;
\item index $i_j$ must \emph{not} equal $i$; in other words the first waypoint
in {\tt{}route} cannot be labeled;
\item array {\tt{}rid} can be in any order.
\end{itemize}
\nwenddocs{}\nwbegincode{169}\sublabel{NW27XAxz-y828a-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-y828a-1}}}\moddef{Update server add to schedule~{\nwtagstyle{}\subpageref{NW27XAxz-y828a-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-2}}
public void DBUpdateServerAddToSchedule(
    int sid, int[] route, int[] sched, int[] rid)
throws RuntimeException \{
  Print("Call DBUpdateServerAddToSchedule(4)");
  Print("  sid="+sid);
  Print("  route.length="+route.length);
  Print("  schedule.length="+sched.length);
  Print("  rid=");
  for (int r : rid)
    System.out.print(r+" ");
  System.out.println();

  int[] output = new int[] \{ \};
  int se, sq;
  Map<Integer, int[]> cache = new HashMap<>();
  Map<Integer, int[]> cache2 = new HashMap<>();
  try \{
    Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
    \LA{}..fetch \code{}sq\edoc{} and \code{}se\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-2VNDCH-1}}\RA{}
    \LA{}..update route~{\nwtagstyle{}\subpageref{NW27XAxz-4LV9nl-1}}\RA{}
    \LA{}..update and add to schedule~{\nwtagstyle{}\subpageref{NW27XAxz-2VQLMF-1}}\RA{}
    \LA{}..commit and close~{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}\RA{}
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-y828a-1-u5}\nwindexdefn{DBUpdateServerAddToSchedule}{DBUpdateServerAddToSchedule}{NW27XAxz-y828a-1}\eatline
\nwidentdefs{\\{{DBUpdateServerAddToSchedule}{DBUpdateServerAddToSchedule}}}\nwidentuses{\\{{Print}{Print}}}\nwindexuse{Print}{Print}{NW27XAxz-y828a-1}\nwendcode{}\nwbegincode{170}\sublabel{NW27XAxz-2VQLMF-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2VQLMF-1}}}\moddef{..update and add to schedule~{\nwtagstyle{}\subpageref{NW27XAxz-2VQLMF-1}}}\endmoddef\nwused{\\{NW27XAxz-y828a-1}}
int bound = (sched.length/3);
\LA{}....update times in pd and cpd~{\nwtagstyle{}\subpageref{NW27XAxz-1cwA5Z-1}}\RA{}
\LA{}....populate the tp, td cache and vp, vd cache~{\nwtagstyle{}\subpageref{NW27XAxz-10xBjT-1}}\RA{}
\LA{}....select latest order number~{\nwtagstyle{}\subpageref{NW27XAxz-1gWfDY-1}}\RA{}
\LA{}....delete remaining schedule from cq~{\nwtagstyle{}\subpageref{NW27XAxz-4AIXfi-1}}\RA{}
\LA{}....insert new remaining schedule into cq~{\nwtagstyle{}\subpageref{NW27XAxz-2Ir9Yx-1}}\RA{}
\LA{}....insert into pd, cpd~{\nwtagstyle{}\subpageref{NW27XAxz-4fUZKI-1}}\RA{}
\nwendcode{}\nwbegindocs{171}\nwdocspar
\nwenddocs{}\nwbegincode{172}\sublabel{NW27XAxz-10xBjT-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-10xBjT-1}}}\moddef{....populate the tp, td cache and vp, vd cache~{\nwtagstyle{}\subpageref{NW27XAxz-10xBjT-1}}}\endmoddef\nwused{\\{NW27XAxz-2VQLMF-1}}
for (int j = 0; j < bound; j++) \{
  int Lj = sched[(3*j + 2)];
  if (Lj != sid) \{
    int rq, tp, vp;
    int td = -1;
    int vd = -1;
    if (!cache.containsKey(Lj)) \{
      rq = DBFetch("S85", 1, Lj)[0];
      boolean flagged = false;
      \LA{}......check if new job~{\nwtagstyle{}\subpageref{NW27XAxz-2Hq38w-1}}\RA{}
      if (flagged) \{
        \LA{}......get tp, vp, td, vd of new job~{\nwtagstyle{}\subpageref{NW27XAxz-pddDf-1}}\RA{}
      \} else \{
        output = DBFetch("S86", 2, Lj);
        tp = output[0];
        td = output[1];
      \}
      Print("cache.put("+Lj+", \{ "+rq+", "+tp+", "+td+" \})");
      cache.put(Lj, new int[] \{ rq, tp, td \});
    \}
  \}
\}
\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{Print}{Print}}\\{{S85}{S85}}\\{{S86}{S86}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-10xBjT-1}\nwindexuse{Print}{Print}{NW27XAxz-10xBjT-1}\nwindexuse{S85}{S85}{NW27XAxz-10xBjT-1}\nwindexuse{S86}{S86}{NW27XAxz-10xBjT-1}\nwendcode{}\nwbegindocs{173}\nwdocspar
\nwenddocs{}\nwbegincode{174}\sublabel{NW27XAxz-2Hq38w-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2Hq38w-1}}}\moddef{......check if new job~{\nwtagstyle{}\subpageref{NW27XAxz-2Hq38w-1}}}\endmoddef\nwused{\\{NW27XAxz-10xBjT-1}}
for (int r : rid) \{
  if (Lj == r) \{
    Print("set flagged=true");
    flagged = true;
    break;
  \}
\}
\nwidentuses{\\{{Print}{Print}}}\nwindexuse{Print}{Print}{NW27XAxz-2Hq38w-1}\nwendcode{}\nwbegindocs{175}\nwdocspar
A second cache, {\tt{}cache2}, is introduced to store the pick-up an drop-off
vertices so that we can use them when we insert into Table PD and CPD.
\nwenddocs{}\nwbegincode{176}\sublabel{NW27XAxz-pddDf-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-pddDf-1}}}\moddef{......get tp, vp, td, vd of new job~{\nwtagstyle{}\subpageref{NW27XAxz-pddDf-1}}}\endmoddef\nwused{\\{NW27XAxz-10xBjT-1}}
Print("get tp, vp, td, vd of new job");
tp = sched[(3*j)];
vp = sched[(3*j + 1)];
Print("set tp="+tp);
Print("set vd="+vd);
for (int k = (j + 1); k < bound; k++) \{
  Print(": k="+k);
  Print(":   Lj="+Lj);
  Print(":   sched[(3*k+2)]="+sched[3*k+2]);
  if (Lj == sched[(3*k + 2)]) \{
    td = sched[(3*k)];
    vd = sched[(3*k + 1)];
    Print(":   set td="+sched[3*k]);
    Print(":   set vd="+sched[3*k+1]);
  \}
\}
Print("set td="+td);
Print("set vd="+vd);
cache2.put(Lj, new int[] \{ vp, vd \});
\nwidentuses{\\{{Print}{Print}}}\nwindexuse{Print}{Print}{NW27XAxz-pddDf-1}\nwendcode{}\nwbegindocs{177}\nwdocspar
\nwenddocs{}\nwbegincode{178}\sublabel{NW27XAxz-4fUZKI-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4fUZKI-1}}}\moddef{....insert into pd, cpd~{\nwtagstyle{}\subpageref{NW27XAxz-4fUZKI-1}}}\endmoddef\nwused{\\{NW27XAxz-2VQLMF-1}}
PreparedStatement pS12 = PS(conn, "S12");
PreparedStatement pS13 = PS(conn, "S13");
int rq, re, rl, ro, rd;
int[] qpd, pd;
for (int r : rid) \{
  output = DBFetch("S51", 5, r);
  rq = output[0];
  re = output[1];
  rl = output[2];
  ro = output[3];
  rd = output[4];
  qpd = cache.get(r);
  pd = cache2.get(r);
  PSAdd(pS12, sid, qpd[1], pd[0], r);
  PSAdd(pS12, sid, qpd[2], pd[1], r);
  Print("INSERT INTO CPD VALUES "+sid+", "+se+", "+route[(route.length - 2)]
    +", "+qpd[1]+", "+pd[0]+", "+qpd[2]+", "+pd[1]+", "+r+", "+re+", "+rl
    +", "+ro+", "+rd+")");
  PSAdd(pS13, sid, se, route[(route.length - 2)], qpd[1], pd[0], qpd[2], pd[1],
        r, re, rl, ro, rd);
\}
PSSubmit(pS12, pS13);
\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{Print}{Print}}\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S12}{S12}}\\{{S13}{S13}}\\{{S51}{S51}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-4fUZKI-1}\nwindexuse{Print}{Print}{NW27XAxz-4fUZKI-1}\nwindexuse{PS}{PS}{NW27XAxz-4fUZKI-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-4fUZKI-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-4fUZKI-1}\nwindexuse{S12}{S12}{NW27XAxz-4fUZKI-1}\nwindexuse{S13}{S13}{NW27XAxz-4fUZKI-1}\nwindexuse{S51}{S51}{NW27XAxz-4fUZKI-1}\nwendcode{}\nwbegindocs{179}\nwdocspar

\subsubsection{{\tt{}\protect\nwindexuse{DBUpdateServerRemoveFromSchedule}{DBUpdateServerRemoveFromSchedule}{NW27XAxz-lMiTm-1}DBUpdateServerRemoveFromSchedule}(4)}
The {\tt{}\protect\nwindexuse{DBUpdateServerRemoveFromSchedule}{DBUpdateServerRemoveFromSchedule}{NW27XAxz-lMiTm-1}DBUpdateServerRemoveFromSchedule}(4) method can be used to remove
existing labeled waypoints from a server's existing remaining schedule. The
ordering of the remaining waypoints does not have to be the same as before.
Pass the new remaining schedule as {\tt{}sched} and the new route through this
schedule as {\tt{}route}. Pass the identifiers of all the requests used to label
the waypoints to be removed, in other words the requests to unassign from the
server, as array {\tt{}rid}.

Array {\tt{}route} =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:t_i$}; & \node {$1:v_i$};
 &\node {$2:t_{i+1}$}; & \node {$3:v_{i+1}$};
 &\node[minimum width=12mm] {...};
 &\node {$(2|w|-2):t_{|w|}$}; & \node {$(2|w|-1):v_{|w|}$};\\
};
\end{tikzpicture}

\noindent for route $w$. Array {\tt{}sched} =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:t_{i_j}$}; & \node {$1:v_{i_j}$}; & \node {$2:L_{i_j}$};
 &\node {$3:t_{i_{j+1}}$}; & \node {$4:v_{i_{j+1}}$}; & \node {$5:L_{i_{j+1}}$};
 &\node[minimum width=12mm] {...};
 &\node {$(3|b|-3):t_{i_{|b|}}$};
 &\node {$(3|b|-2):v_{i_{|b|}}$};
 &\node {$(3|b|-1):L_{i_{|b|}}$}; \\
};
\end{tikzpicture}

\noindent for schedule $b$, where $(t_{i_j},v_{i_j})$ make up a waypoint and
$L_{i_j}$ is the label. Array {\tt{}rid} = any permutation of

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:L_{i_{j'}}$};
 &\node {$1:L_{i_{(j'+1)}}$};
 &\node[minimum width=12mm] {...};
 &\node {$(n-1):L_{i_{(j'+n-1)}}$};\\
};
\end{tikzpicture}

\noindent where $i_{j'},i_{j'+1},...i_{j'+n-1}$ identify the $n$ labels
(request identifiers) appearing in the server's existing remaining
schedule but not in ${\tt{}sched}$, in other words the labels that will be removed.

Important notes:
\begin{itemize}
\item all waypoints beyond $t_i$ in the existing route will be replaced with
those in {\tt{}route};
\item all stops beyond $(t_{i_j},v_{i_j})$ in the existing schedule will be
replaced with those in {\tt{}sched};
\item waypoint $(t_i,v_i)$ \emph{must} exist in the current route;
\item index $i_j$ must \emph{not} equal $i$; in other words the first waypoint
in {\tt{}route} cannot be labeled;
\item array {\tt{}rid} can be in any order.
\end{itemize}
\nwenddocs{}\nwbegincode{180}\sublabel{NW27XAxz-lMiTm-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-lMiTm-1}}}\moddef{Update server remove from schedule~{\nwtagstyle{}\subpageref{NW27XAxz-lMiTm-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-2}}
public void DBUpdateServerRemoveFromSchedule(
    int sid, int[] route, int[] sched, int[] rid)
throws RuntimeException \{
  int[] output = new int[] \{ \};
  int se, sq;
  Map<Integer, int[]> cache = new HashMap<>();
  try \{
    Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
    \LA{}..fetch \code{}sq\edoc{} and \code{}se\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-2VNDCH-1}}\RA{}
    \LA{}..update route~{\nwtagstyle{}\subpageref{NW27XAxz-4LV9nl-1}}\RA{}
    \LA{}..update schedule~{\nwtagstyle{}\subpageref{NW27XAxz-2NqWTJ-1}}\RA{}
    \LA{}..remove jobs from pd, cpd~{\nwtagstyle{}\subpageref{NW27XAxz-2PX0wC-1}}\RA{}
    \LA{}..commit and close~{\nwtagstyle{}\subpageref{NW27XAxz-3pffr6-1}}\RA{}
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
\}
\nosublabel{NW27XAxz-lMiTm-1-u6}\nwindexdefn{DBUpdateServerRemoveFromSchedule}{DBUpdateServerRemoveFromSchedule}{NW27XAxz-lMiTm-1}\eatline
\nwidentdefs{\\{{DBUpdateServerRemoveFromSchedule}{DBUpdateServerRemoveFromSchedule}}}\nwendcode{}\nwbegincode{181}\sublabel{NW27XAxz-2PX0wC-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2PX0wC-1}}}\moddef{..remove jobs from pd, cpd~{\nwtagstyle{}\subpageref{NW27XAxz-2PX0wC-1}}}\endmoddef\nwused{\\{NW27XAxz-lMiTm-1}}
PreparedStatement pS42 = PS(conn, "S42");
PreparedStatement pS43 = PS(conn, "S43");
for (int r : rid) \{
  PSAdd(pS42, r);
  PSAdd(pS43, r);
\}
PSSubmit(pS42, pS43);
\nwidentuses{\\{{PS}{PS}}\\{{PSAdd}{PSAdd}}\\{{PSSubmit}{PSSubmit}}\\{{S42}{S42}}\\{{S43}{S43}}}\nwindexuse{PS}{PS}{NW27XAxz-2PX0wC-1}\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-2PX0wC-1}\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-2PX0wC-1}\nwindexuse{S42}{S42}{NW27XAxz-2PX0wC-1}\nwindexuse{S43}{S43}{NW27XAxz-2PX0wC-1}\nwendcode{}\nwbegindocs{182}\nwdocspar

\subsection{Read Methods}
\label{sec:read-methods}
Read methods (except for {\tt{}DBQuery}(2)) are implemented by wrapping
{\tt{}\protect\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-17Zt8W-1}DBFetch}(3...). As they all follow the same format, we chunk out the
common portions here in order to emphasize {\tt{}\protect\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-17Zt8W-1}DBFetch}.
\nwenddocs{}\nwbegincode{183}\sublabel{NW27XAxz-4MoB17-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}}\moddef{..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}}\endmoddef\nwused{\\{NW27XAxz-2FtqIZ-1}\\{NW27XAxz-3isdeu-1}\\{NW27XAxz-3isdeu-2}\\{NW27XAxz-1hFvVm-1}\\{NW27XAxz-3AGrxZ-1}\\{NW27XAxz-rvb17-1}\\{NW27XAxz-1AprqI-1}\\{NW27XAxz-1AprqI-2}\\{NW27XAxz-3yA8FQ-1}\\{NW27XAxz-3yA8FQ-2}\\{NW27XAxz-aKbeg-1}\\{NW27XAxz-1Ang64-1}\\{NW27XAxz-1Ang64-2}\\{NW27XAxz-1Ang64-5}\\{NW27XAxz-1Ang64-6}\\{NW27XAxz-1Ang64-7}\\{NW27XAxz-1Ang64-8}\\{NW27XAxz-1Ang64-9}\\{NW27XAxz-1Ang64-A}\\{NW27XAxz-1Ang64-B}\\{NW27XAxz-1Ang64-C}\\{NW27XAxz-1Ang64-D}\\{NW27XAxz-1Ang64-E}\\{NW27XAxz-1Ang64-F}\\{NW27XAxz-1Ang64-G}\\{NW27XAxz-1Ang64-H}\\{NW27XAxz-1Ang64-I}\\{NW27XAxz-1Ang64-J}\\{NW27XAxz-1Ang64-K}\\{NW27XAxz-1Ang64-L}\\{NW27XAxz-1Ang64-M}\\{NW27XAxz-1Ang64-N}\\{NW27XAxz-1Ang64-O}\\{NW27XAxz-1Ang64-P}\\{NW27XAxz-1Ang64-Q}\\{NW27XAxz-1Ang64-R}\\{NW27XAxz-1Ang64-S}\\{NW27XAxz-1Ang64-T}\\{NW27XAxz-1Ang64-U}\\{NW27XAxz-1Ang64-V}\\{NW27XAxz-1Ang64-W}\\{NW27XAxz-1Ang64-X}\\{NW27XAxz-1Ang64-Y}\\{NW27XAxz-1Ang64-Z}\\{NW27XAxz-1Ang64-a}}
int[] output = new int[] \{ \};
try \{
\nwendcode{}\nwbegindocs{184}\nwdocspar
\nwenddocs{}\nwbegincode{185}\sublabel{NW27XAxz-1MI9ro-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}}\moddef{..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}}\endmoddef\nwused{\\{NW27XAxz-2FtqIZ-1}\\{NW27XAxz-3isdeu-1}\\{NW27XAxz-3isdeu-2}\\{NW27XAxz-1hFvVm-1}\\{NW27XAxz-3AGrxZ-1}\\{NW27XAxz-rvb17-1}\\{NW27XAxz-1AprqI-1}\\{NW27XAxz-1AprqI-2}\\{NW27XAxz-3yA8FQ-1}\\{NW27XAxz-3yA8FQ-2}\\{NW27XAxz-aKbeg-1}\\{NW27XAxz-1Ang64-1}\\{NW27XAxz-1Ang64-2}\\{NW27XAxz-1Ang64-5}\\{NW27XAxz-1Ang64-6}\\{NW27XAxz-1Ang64-7}\\{NW27XAxz-1Ang64-8}\\{NW27XAxz-1Ang64-9}\\{NW27XAxz-1Ang64-A}\\{NW27XAxz-1Ang64-B}\\{NW27XAxz-1Ang64-C}\\{NW27XAxz-1Ang64-D}\\{NW27XAxz-1Ang64-E}\\{NW27XAxz-1Ang64-F}\\{NW27XAxz-1Ang64-G}\\{NW27XAxz-1Ang64-H}\\{NW27XAxz-1Ang64-I}\\{NW27XAxz-1Ang64-J}\\{NW27XAxz-1Ang64-K}\\{NW27XAxz-1Ang64-L}\\{NW27XAxz-1Ang64-M}\\{NW27XAxz-1Ang64-N}\\{NW27XAxz-1Ang64-O}\\{NW27XAxz-1Ang64-P}\\{NW27XAxz-1Ang64-Q}\\{NW27XAxz-1Ang64-R}\\{NW27XAxz-1Ang64-S}\\{NW27XAxz-1Ang64-T}\\{NW27XAxz-1Ang64-U}\\{NW27XAxz-1Ang64-V}\\{NW27XAxz-1Ang64-W}\\{NW27XAxz-1Ang64-X}\\{NW27XAxz-1Ang64-Y}\\{NW27XAxz-1Ang64-Z}\\{NW27XAxz-1Ang64-a}}
\}
\LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
return output;
\nwendcode{}\nwbegindocs{186}\nwdocspar

\subsubsection{{\tt{}DBQuery}(2)}
Run custom {\tt{}SELECT} queries against the database using {\tt{}DBQuery}. The
second parameter indicates the number of columns in the {\tt{}SELECT} statement.
\nwenddocs{}\nwbegincode{187}\sublabel{NW27XAxz-2FtqIZ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2FtqIZ-1}}}\moddef{Query custom statement~{\nwtagstyle{}\subpageref{NW27XAxz-2FtqIZ-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQuery(String sql, int ncols) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
  Statement stmt = conn.createStatement(
    ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);
  ResultSet res = stmt.executeQuery(sql);
  if (res.last()) \{
    \LA{}..flatten results~{\nwtagstyle{}\subpageref{NW27XAxz-2Xu6MS-1}}\RA{}
  \}
  conn.close();
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nwendcode{}\nwbegindocs{188}% def DBQuery

\subsubsection{{\tt{}\protect\nosublabel{NW27XAxz-2FtqIZ-1-u3}\protect\nwindexuse{DBQueryServer}{DBQueryServer}{NW27XAxz-3isdeu-1}DBQueryServer}(1)}
\nwenddocs{}\nwbegincode{189}\sublabel{NW27XAxz-3isdeu-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3isdeu-1}}}\moddef{Query ridesharing user~{\nwtagstyle{}\subpageref{NW27XAxz-3isdeu-1}}}\endmoddef\nwalsodefined{\\{NW27XAxz-3isdeu-2}}\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQueryServer(int sid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S70", 7, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-3isdeu-1-u2}\nwindexdefn{DBQueryServer}{DBQueryServer}{NW27XAxz-3isdeu-1}\eatline
\nwidentdefs{\\{{DBQueryServer}{DBQueryServer}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S70}{S70}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-3isdeu-1}\nwindexuse{S70}{S70}{NW27XAxz-3isdeu-1}\nwendcode{}\nwbegindocs{190}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequest}{DBQueryRequest}{NW27XAxz-3isdeu-2}DBQueryRequest}(1)}
\nwenddocs{}\nwbegincode{191}\sublabel{NW27XAxz-3isdeu-2}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3isdeu-2}}}\moddef{Query ridesharing user~{\nwtagstyle{}\subpageref{NW27XAxz-3isdeu-1}}}\plusendmoddef
public int[] DBQueryRequest(int rid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S75", 7, rid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-3isdeu-2-u2}\nwindexdefn{DBQueryRequest}{DBQueryRequest}{NW27XAxz-3isdeu-2}\eatline
\nwidentdefs{\\{{DBQueryRequest}{DBQueryRequest}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S75}{S75}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-3isdeu-2}\nwindexuse{S75}{S75}{NW27XAxz-3isdeu-2}\nwendcode{}\nwbegindocs{192}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestStatus}{DBQueryRequestStatus}{NW27XAxz-1hFvVm-1}DBQueryRequestStatus}(2)}
\nwenddocs{}\nwbegincode{193}\sublabel{NW27XAxz-1hFvVm-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1hFvVm-1}}}\moddef{Query request status~{\nwtagstyle{}\subpageref{NW27XAxz-1hFvVm-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQueryRequestStatus(int rid, int t) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S133", 1, rid, t);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1hFvVm-1-u2}\nwindexdefn{DBQueryRequestStatus}{DBQueryRequestStatus}{NW27XAxz-1hFvVm-1}\eatline
\nwidentdefs{\\{{DBQueryRequestStatus}{DBQueryRequestStatus}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S133}{S133}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1hFvVm-1}\nwindexuse{S133}{S133}{NW27XAxz-1hFvVm-1}\nwendcode{}\nwbegindocs{194}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryQueuedRequests}{DBQueryQueuedRequests}{NW27XAxz-3AGrxZ-1}DBQueryQueuedRequests}(1)}
\nwenddocs{}\nwbegincode{195}\sublabel{NW27XAxz-3AGrxZ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3AGrxZ-1}}}\moddef{Query queued requests~{\nwtagstyle{}\subpageref{NW27XAxz-3AGrxZ-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQueryQueuedRequests(int t) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S68", 7, t, t);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-3AGrxZ-1-u2}\nwindexdefn{DBQueryQueuedRequests}{DBQueryQueuedRequests}{NW27XAxz-3AGrxZ-1}\eatline
\nwidentdefs{\\{{DBQueryQueuedRequests}{DBQueryQueuedRequests}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S68}{S68}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-3AGrxZ-1}\nwindexuse{S68}{S68}{NW27XAxz-3AGrxZ-1}\nwendcode{}\nwbegindocs{196}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerLocationsAll}{DBQueryServerLocationsAll}{NW27XAxz-rvb17-1}DBQueryServerLocationsAll}(1)}
\nwenddocs{}\nwbegincode{197}\sublabel{NW27XAxz-rvb17-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-rvb17-1}}}\moddef{Query all server locations~{\nwtagstyle{}\subpageref{NW27XAxz-rvb17-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQueryServerLocationsAll(int t) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S59", 3, t, t, t, t);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-rvb17-1-u2}\nwindexdefn{DBQueryServerLocationsAll}{DBQueryServerLocationsAll}{NW27XAxz-rvb17-1}\eatline
\nwidentdefs{\\{{DBQueryServerLocationsAll}{DBQueryServerLocationsAll}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S59}{S59}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-rvb17-1}\nwindexuse{S59}{S59}{NW27XAxz-rvb17-1}\nwendcode{}\nwbegindocs{198}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerLocationsActive}{DBQueryServerLocationsActive}{NW27XAxz-3UaQCb-1}DBQueryServerLocationsActive}(1)}
\nwenddocs{}\nwbegincode{199}\sublabel{NW27XAxz-3UaQCb-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3UaQCb-1}}}\moddef{Query active server locations~{\nwtagstyle{}\subpageref{NW27XAxz-3UaQCb-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQueryServerLocationsActive(int t) throws RuntimeException \{
  int[] output = new int[] \{ \};
  int[] temp1 = new int[] \{ \};
  int[] temp2 = new int[] \{ \};
  try \{
    temp1 = DBFetch("S134", 1, t, t, t);
    output = new int[(temp1.length*3)];
    for (int i = 0; i < temp1.length; i++) \{
      int sid = temp1[i];
      output[3*i] = sid;
      temp2 = DBFetch("S135", 2, t, sid);
      output[(3*i + 1)] = temp2[0];
      output[(3*i + 2)] = temp2[1];
    \}
  \}
  \LA{}Catch and print \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-4P0tKA-1}}\RA{}
  return output;
\}
\nosublabel{NW27XAxz-3UaQCb-1-u1}\nwindexdefn{DBQueryServerLocationsActive}{DBQueryServerLocationsActive}{NW27XAxz-3UaQCb-1}\eatline
\nwidentdefs{\\{{DBQueryServerLocationsActive}{DBQueryServerLocationsActive}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S134}{S134}}\\{{S135}{S135}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-3UaQCb-1}\nwindexuse{S134}{S134}{NW27XAxz-3UaQCb-1}\nwindexuse{S135}{S135}{NW27XAxz-3UaQCb-1}\nwendcode{}\nwbegindocs{200}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRoute}{DBQueryRoute}{NW27XAxz-1AprqI-1}DBQueryRoute}(1)}
\nwenddocs{}\nwbegincode{201}\sublabel{NW27XAxz-1AprqI-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1AprqI-1}}}\moddef{Query routes~{\nwtagstyle{}\subpageref{NW27XAxz-1AprqI-1}}}\endmoddef\nwalsodefined{\\{NW27XAxz-1AprqI-2}}\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQueryRoute(int sid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S60", 2, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1AprqI-1-u2}\nwindexdefn{DBQueryRoute}{DBQueryRoute}{NW27XAxz-1AprqI-1}\eatline
\nwidentdefs{\\{{DBQueryRoute}{DBQueryRoute}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S60}{S60}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1AprqI-1}\nwindexuse{S60}{S60}{NW27XAxz-1AprqI-1}\nwendcode{}\nwbegindocs{202}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRouteRemaining}{DBQueryRouteRemaining}{NW27XAxz-1AprqI-2}DBQueryRouteRemaining}(2)}
\nwenddocs{}\nwbegincode{203}\sublabel{NW27XAxz-1AprqI-2}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1AprqI-2}}}\moddef{Query routes~{\nwtagstyle{}\subpageref{NW27XAxz-1AprqI-1}}}\plusendmoddef
public int[] DBQueryRouteRemaining(int sid, int t) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S129", 2, sid, t);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1AprqI-2-u2}\nwindexdefn{DBQueryRouteRemaining}{DBQueryRouteRemaining}{NW27XAxz-1AprqI-2}\eatline
\nwidentdefs{\\{{DBQueryRouteRemaining}{DBQueryRouteRemaining}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S129}{S129}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1AprqI-2}\nwindexuse{S129}{S129}{NW27XAxz-1AprqI-2}\nwendcode{}\nwbegindocs{204}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQuerySchedule}{DBQuerySchedule}{NW27XAxz-3yA8FQ-1}DBQuerySchedule}(1)}
Schedules may contain {\tt{}null} values in the labels. A null is recorded
as a 0 in the output array due to {\tt{}getInt} in {\tt{}\protect\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-17Zt8W-1}DBFetch}.
\nwenddocs{}\nwbegincode{205}\sublabel{NW27XAxz-3yA8FQ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3yA8FQ-1}}}\moddef{Query schedules~{\nwtagstyle{}\subpageref{NW27XAxz-3yA8FQ-1}}}\endmoddef\nwalsodefined{\\{NW27XAxz-3yA8FQ-2}}\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQuerySchedule(int sid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S61", 4, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-3yA8FQ-1-u2}\nwindexdefn{DBQuerySchedule}{DBQuerySchedule}{NW27XAxz-3yA8FQ-1}\eatline
\nwidentdefs{\\{{DBQuerySchedule}{DBQuerySchedule}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S61}{S61}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-3yA8FQ-1}\nwindexuse{S61}{S61}{NW27XAxz-3yA8FQ-1}\nwendcode{}\nwbegindocs{206}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryScheduleRemaining}{DBQueryScheduleRemaining}{NW27XAxz-3yA8FQ-2}DBQueryScheduleRemaining}(2)}
\nwenddocs{}\nwbegincode{207}\sublabel{NW27XAxz-3yA8FQ-2}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3yA8FQ-2}}}\moddef{Query schedules~{\nwtagstyle{}\subpageref{NW27XAxz-3yA8FQ-1}}}\plusendmoddef
public int[] DBQueryScheduleRemaining(int sid, int t) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S69", 4, sid, t);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-3yA8FQ-2-u2}\nwindexdefn{DBQueryScheduleRemaining}{DBQueryScheduleRemaining}{NW27XAxz-3yA8FQ-2}\eatline
\nwidentdefs{\\{{DBQueryScheduleRemaining}{DBQueryScheduleRemaining}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S69}{S69}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-3yA8FQ-2}\nwindexuse{S69}{S69}{NW27XAxz-3yA8FQ-2}\nwendcode{}\nwbegindocs{208}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryCurrentLoad}{DBQueryCurrentLoad}{NW27XAxz-aKbeg-1}DBQueryCurrentLoad}(2)}
\nwenddocs{}\nwbegincode{209}\sublabel{NW27XAxz-aKbeg-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-aKbeg-1}}}\moddef{Query current load~{\nwtagstyle{}\subpageref{NW27XAxz-aKbeg-1}}}\endmoddef\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQueryCurrentLoad(int sid, int t) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S73", 1, sid, t);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-aKbeg-1-u2}\nwindexdefn{DBQueryCurrentLoad}{DBQueryCurrentLoad}{NW27XAxz-aKbeg-1}\eatline
\nwidentdefs{\\{{DBQueryCurrentLoad}{DBQueryCurrentLoad}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S73}{S73}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-aKbeg-1}\nwindexuse{S73}{S73}{NW27XAxz-aKbeg-1}\nwendcode{}\nwbegindocs{210}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryCountVertices}{DBQueryCountVertices}{NW27XAxz-1Ang64-1}DBQueryCountVertices}(0)}
\nwenddocs{}\nwbegincode{211}\sublabel{NW27XAxz-1Ang64-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\endmoddef\nwalsodefined{\\{NW27XAxz-1Ang64-2}\\{NW27XAxz-1Ang64-3}\\{NW27XAxz-1Ang64-4}\\{NW27XAxz-1Ang64-5}\\{NW27XAxz-1Ang64-6}\\{NW27XAxz-1Ang64-7}\\{NW27XAxz-1Ang64-8}\\{NW27XAxz-1Ang64-9}\\{NW27XAxz-1Ang64-A}\\{NW27XAxz-1Ang64-B}\\{NW27XAxz-1Ang64-C}\\{NW27XAxz-1Ang64-D}\\{NW27XAxz-1Ang64-E}\\{NW27XAxz-1Ang64-F}\\{NW27XAxz-1Ang64-G}\\{NW27XAxz-1Ang64-H}\\{NW27XAxz-1Ang64-I}\\{NW27XAxz-1Ang64-J}\\{NW27XAxz-1Ang64-K}\\{NW27XAxz-1Ang64-L}\\{NW27XAxz-1Ang64-M}\\{NW27XAxz-1Ang64-N}\\{NW27XAxz-1Ang64-O}\\{NW27XAxz-1Ang64-P}\\{NW27XAxz-1Ang64-Q}\\{NW27XAxz-1Ang64-R}\\{NW27XAxz-1Ang64-S}\\{NW27XAxz-1Ang64-T}\\{NW27XAxz-1Ang64-U}\\{NW27XAxz-1Ang64-V}\\{NW27XAxz-1Ang64-W}\\{NW27XAxz-1Ang64-X}\\{NW27XAxz-1Ang64-Y}\\{NW27XAxz-1Ang64-Z}\\{NW27XAxz-1Ang64-a}}\nwused{\\{NW27XAxz-4PbjF-3}}
public int[] DBQueryCountVertices() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S62", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-1-u2}\nwindexdefn{DBQueryCountVertices}{DBQueryCountVertices}{NW27XAxz-1Ang64-1}\eatline
\nwidentdefs{\\{{DBQueryCountVertices}{DBQueryCountVertices}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S62}{S62}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-1}\nwindexuse{S62}{S62}{NW27XAxz-1Ang64-1}\nwendcode{}\nwbegindocs{212}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryCountEdges}{DBQueryCountEdges}{NW27XAxz-1Ang64-2}DBQueryCountEdges}(0)}
\nwenddocs{}\nwbegincode{213}\sublabel{NW27XAxz-1Ang64-2}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-2}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryCountEdges() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S63", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-2-u2}\nwindexdefn{DBQueryCountEdges}{DBQueryCountEdges}{NW27XAxz-1Ang64-2}\eatline
\nwidentdefs{\\{{DBQueryCountEdges}{DBQueryCountEdges}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S63}{S63}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-2}\nwindexuse{S63}{S63}{NW27XAxz-1Ang64-2}\nwendcode{}\nwbegindocs{214}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryVertex}{DBQueryVertex}{NW27XAxz-1Ang64-3}DBQueryVertex}(1)}
Returned array =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:\textrm{longitude of }v$};
& \node {$1:\textrm{latitude of }v$}; \\
};
\end{tikzpicture}

\noindent where parameter {\tt{}v} provides $v$.
\nwenddocs{}\nwbegincode{215}\sublabel{NW27XAxz-1Ang64-3}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-3}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryVertex(int v) throws RuntimeException \{
  return lu_vertices.get(v);
\}
\nwindexdefn{DBQueryVertex}{DBQueryVertex}{NW27XAxz-1Ang64-3}\eatline
\nwidentdefs{\\{{DBQueryVertex}{DBQueryVertex}}}\nwidentuses{\\{{lu{\char95}vertices}{lu:unvertices}}}\nwindexuse{lu{\char95}vertices}{lu:unvertices}{NW27XAxz-1Ang64-3}\nwendcode{}\nwbegindocs{216}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryEdge}{DBQueryEdge}{NW27XAxz-1Ang64-4}DBQueryEdge}(2)}
Returned array =

\noindent
\begin{tikzpicture}
\small
\matrix[nodes={draw,minimum size=6mm}] {
  \node {$0:d(v_1,v_2)$}; & \node {$1:v^\textrm{max}(v_1,v_2)$}; \\
};
\end{tikzpicture}

\noindent where parameter {\tt{}v1} provides $v_1$ and parameter
{\tt{}v2} provides $v_2$.
\nwenddocs{}\nwbegincode{217}\sublabel{NW27XAxz-1Ang64-4}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-4}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryEdge(int v1, int v2) throws RuntimeException \{
  return lu_edges.get(v1).get(v2);
\}
\nwindexdefn{DBQueryEdge}{DBQueryEdge}{NW27XAxz-1Ang64-4}\eatline
\nwidentdefs{\\{{DBQueryEdge}{DBQueryEdge}}}\nwidentuses{\\{{lu{\char95}edges}{lu:unedges}}}\nwindexuse{lu{\char95}edges}{lu:unedges}{NW27XAxz-1Ang64-4}\nwendcode{}\nwbegindocs{218}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryStatisticsEdges}{DBQueryStatisticsEdges}{NW27XAxz-1Ang64-5}DBQueryStatisticsEdges}(0)}
The following method returns six statistics: minimum edge weight,
maximum edge weight, average edge weight, minimum edge speed, maximum edge speed,
average edge speed.
\nwenddocs{}\nwbegincode{219}\sublabel{NW27XAxz-1Ang64-5}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-5}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryStatisticsEdges() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S65", 6);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-5-u2}\nwindexdefn{DBQueryStatisticsEdges}{DBQueryStatisticsEdges}{NW27XAxz-1Ang64-5}\eatline
\nwidentdefs{\\{{DBQueryStatisticsEdges}{DBQueryStatisticsEdges}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S65}{S65}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-5}\nwindexuse{S65}{S65}{NW27XAxz-1Ang64-5}\nwendcode{}\nwbegindocs{220}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryMBR}{DBQueryMBR}{NW27XAxz-1Ang64-6}DBQueryMBR}(0)}
The minimum bounding rectangle is
returned as four numbers: minimum longitude, maximum longitude, minimum
latitude, maximum latitude.
\nwenddocs{}\nwbegincode{221}\sublabel{NW27XAxz-1Ang64-6}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-6}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryMBR() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S64", 4);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-6-u2}\nwindexdefn{DBQueryMBR}{DBQueryMBR}{NW27XAxz-1Ang64-6}\eatline
\nwidentdefs{\\{{DBQueryMBR}{DBQueryMBR}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S64}{S64}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-6}\nwindexuse{S64}{S64}{NW27XAxz-1Ang64-6}\nwendcode{}\nwbegindocs{222}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryCountServers}{DBQueryCountServers}{NW27XAxz-1Ang64-7}DBQueryCountServers}(0)}
\nwenddocs{}\nwbegincode{223}\sublabel{NW27XAxz-1Ang64-7}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-7}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryCountServers() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S66", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-7-u2}\nwindexdefn{DBQueryCountServers}{DBQueryCountServers}{NW27XAxz-1Ang64-7}\eatline
\nwidentdefs{\\{{DBQueryCountServers}{DBQueryCountServers}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S66}{S66}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-7}\nwindexuse{S66}{S66}{NW27XAxz-1Ang64-7}\nwendcode{}\nwbegindocs{224}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryCountRequests}{DBQueryCountRequests}{NW27XAxz-1Ang64-8}DBQueryCountRequests}(0)}
\nwenddocs{}\nwbegincode{225}\sublabel{NW27XAxz-1Ang64-8}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-8}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryCountRequests() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S67", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-8-u2}\nwindexdefn{DBQueryCountRequests}{DBQueryCountRequests}{NW27XAxz-1Ang64-8}\eatline
\nwidentdefs{\\{{DBQueryCountRequests}{DBQueryCountRequests}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S67}{S67}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-8}\nwindexuse{S67}{S67}{NW27XAxz-1Ang64-8}\nwendcode{}\nwbegindocs{226}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerPendingAssignments}{DBQueryServerPendingAssignments}{NW27XAxz-1Ang64-9}DBQueryServerPendingAssignments}(2)}
\nwenddocs{}\nwbegincode{227}\sublabel{NW27XAxz-1Ang64-9}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-9}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerPendingAssignments(int sid, int t) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S100", 1, t, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-9-u2}\nwindexdefn{DBQueryServerPendingAssignments}{DBQueryServerPendingAssignments}{NW27XAxz-1Ang64-9}\eatline
\nwidentdefs{\\{{DBQueryServerPendingAssignments}{DBQueryServerPendingAssignments}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S100}{S100}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-9}\nwindexuse{S100}{S100}{NW27XAxz-1Ang64-9}\nwendcode{}\nwbegindocs{228}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerCompletedAssignments}{DBQueryServerCompletedAssignments}{NW27XAxz-1Ang64-A}DBQueryServerCompletedAssignments}(2)}
\nwenddocs{}\nwbegincode{229}\sublabel{NW27XAxz-1Ang64-A}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-A}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerCompletedAssignments(int sid, int t) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S101", 1, t, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-A-u2}\nwindexdefn{DBQueryServerCompletedAssignments}{DBQueryServerCompletedAssignments}{NW27XAxz-1Ang64-A}\eatline
\nwidentdefs{\\{{DBQueryServerCompletedAssignments}{DBQueryServerCompletedAssignments}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S101}{S101}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-A}\nwindexuse{S101}{S101}{NW27XAxz-1Ang64-A}\nwendcode{}\nwbegindocs{230}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServiceRate}{DBQueryServiceRate}{NW27XAxz-1Ang64-B}DBQueryServiceRate}(0)}
\nwenddocs{}\nwbegincode{231}\sublabel{NW27XAxz-1Ang64-B}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-B}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServiceRate() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S102", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-B-u2}\nwindexdefn{DBQueryServiceRate}{DBQueryServiceRate}{NW27XAxz-1Ang64-B}\eatline
\nwidentdefs{\\{{DBQueryServiceRate}{DBQueryServiceRate}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S102}{S102}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-B}\nwindexuse{S102}{S102}{NW27XAxz-1Ang64-B}\nwendcode{}\nwbegindocs{232}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryBaseDistanceTotal}{DBQueryBaseDistanceTotal}{NW27XAxz-1Ang64-C}DBQueryBaseDistanceTotal}(0)}
\nwenddocs{}\nwbegincode{233}\sublabel{NW27XAxz-1Ang64-C}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-C}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryBaseDistanceTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S103", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-C-u2}\nwindexdefn{DBQueryBaseDistanceTotal}{DBQueryBaseDistanceTotal}{NW27XAxz-1Ang64-C}\eatline
\nwidentdefs{\\{{DBQueryBaseDistanceTotal}{DBQueryBaseDistanceTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S103}{S103}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-C}\nwindexuse{S103}{S103}{NW27XAxz-1Ang64-C}\nwendcode{}\nwbegindocs{234}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerBaseDistanceTotal}{DBQueryServerBaseDistanceTotal}{NW27XAxz-1Ang64-D}DBQueryServerBaseDistanceTotal}(0)}
\nwenddocs{}\nwbegincode{235}\sublabel{NW27XAxz-1Ang64-D}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-D}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerBaseDistanceTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S110", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-D-u2}\nwindexdefn{DBQueryServerBaseDistanceTotal}{DBQueryServerBaseDistanceTotal}{NW27XAxz-1Ang64-D}\eatline
\nwidentdefs{\\{{DBQueryServerBaseDistanceTotal}{DBQueryServerBaseDistanceTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S110}{S110}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-D}\nwindexuse{S110}{S110}{NW27XAxz-1Ang64-D}\nwendcode{}\nwbegindocs{236}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestBaseDistanceTotal}{DBQueryRequestBaseDistanceTotal}{NW27XAxz-1Ang64-E}DBQueryRequestBaseDistanceTotal}(0)}
\nwenddocs{}\nwbegincode{237}\sublabel{NW27XAxz-1Ang64-E}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-E}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestBaseDistanceTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S111", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-E-u2}\nwindexdefn{DBQueryRequestBaseDistanceTotal}{DBQueryRequestBaseDistanceTotal}{NW27XAxz-1Ang64-E}\eatline
\nwidentdefs{\\{{DBQueryRequestBaseDistanceTotal}{DBQueryRequestBaseDistanceTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S111}{S111}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-E}\nwindexuse{S111}{S111}{NW27XAxz-1Ang64-E}\nwendcode{}\nwbegindocs{238}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerTravelDistance}{DBQueryServerTravelDistance}{NW27XAxz-1Ang64-F}DBQueryServerTravelDistance}(1)}
\nwenddocs{}\nwbegincode{239}\sublabel{NW27XAxz-1Ang64-F}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-F}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerTravelDistance(int sid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S104", 1, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-F-u2}\nwindexdefn{DBQueryServerTravelDistance}{DBQueryServerTravelDistance}{NW27XAxz-1Ang64-F}\eatline
\nwidentdefs{\\{{DBQueryServerTravelDistance}{DBQueryServerTravelDistance}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S104}{S104}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-F}\nwindexuse{S104}{S104}{NW27XAxz-1Ang64-F}\nwendcode{}\nwbegindocs{240}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerTravelDistanceTotal}{DBQueryServerTravelDistanceTotal}{NW27XAxz-1Ang64-G}DBQueryServerTravelDistanceTotal}(0)}
\nwenddocs{}\nwbegincode{241}\sublabel{NW27XAxz-1Ang64-G}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-G}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerTravelDistanceTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S105", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-G-u2}\nwindexdefn{DBQueryServerTravelDistanceTotal}{DBQueryServerTravelDistanceTotal}{NW27XAxz-1Ang64-G}\eatline
\nwidentdefs{\\{{DBQueryServerTravelDistanceTotal}{DBQueryServerTravelDistanceTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S105}{S105}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-G}\nwindexuse{S105}{S105}{NW27XAxz-1Ang64-G}\nwendcode{}\nwbegindocs{242}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerCruisingDistance}{DBQueryServerCruisingDistance}{NW27XAxz-1Ang64-H}DBQueryServerCruisingDistance}(1)}
\nwenddocs{}\nwbegincode{243}\sublabel{NW27XAxz-1Ang64-H}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-H}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerCruisingDistance(int sid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S106", 1, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-H-u2}\nwindexdefn{DBQueryServerCruisingDistance}{DBQueryServerCruisingDistance}{NW27XAxz-1Ang64-H}\eatline
\nwidentdefs{\\{{DBQueryServerCruisingDistance}{DBQueryServerCruisingDistance}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S106}{S106}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-H}\nwindexuse{S106}{S106}{NW27XAxz-1Ang64-H}\nwendcode{}\nwbegindocs{244}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerCruisingDistanceTotal}{DBQueryServerCruisingDistanceTotal}{NW27XAxz-1Ang64-I}DBQueryServerCruisingDistanceTotal}(0)}
\nwenddocs{}\nwbegincode{245}\sublabel{NW27XAxz-1Ang64-I}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-I}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerCruisingDistanceTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S107", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-I-u2}\nwindexdefn{DBQueryServerCruisingDistanceTotal}{DBQueryServerCruisingDistanceTotal}{NW27XAxz-1Ang64-I}\eatline
\nwidentdefs{\\{{DBQueryServerCruisingDistanceTotal}{DBQueryServerCruisingDistanceTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S107}{S107}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-I}\nwindexuse{S107}{S107}{NW27XAxz-1Ang64-I}\nwendcode{}\nwbegindocs{246}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerServiceDistance}{DBQueryServerServiceDistance}{NW27XAxz-1Ang64-J}DBQueryServerServiceDistance}(1)}
\nwenddocs{}\nwbegincode{247}\sublabel{NW27XAxz-1Ang64-J}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-J}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerServiceDistance(int sid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S108", 1, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-J-u2}\nwindexdefn{DBQueryServerServiceDistance}{DBQueryServerServiceDistance}{NW27XAxz-1Ang64-J}\eatline
\nwidentdefs{\\{{DBQueryServerServiceDistance}{DBQueryServerServiceDistance}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S108}{S108}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-J}\nwindexuse{S108}{S108}{NW27XAxz-1Ang64-J}\nwendcode{}\nwbegindocs{248}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerServiceDistanceTotal}{DBQueryServerServiceDistanceTotal}{NW27XAxz-1Ang64-K}DBQueryServerServiceDistanceTotal}(0)}
\nwenddocs{}\nwbegincode{249}\sublabel{NW27XAxz-1Ang64-K}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-K}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerServiceDistanceTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S109", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-K-u2}\nwindexdefn{DBQueryServerServiceDistanceTotal}{DBQueryServerServiceDistanceTotal}{NW27XAxz-1Ang64-K}\eatline
\nwidentdefs{\\{{DBQueryServerServiceDistanceTotal}{DBQueryServerServiceDistanceTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S109}{S109}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-K}\nwindexuse{S109}{S109}{NW27XAxz-1Ang64-K}\nwendcode{}\nwbegindocs{250}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestDetourDistance}{DBQueryRequestDetourDistance}{NW27XAxz-1Ang64-L}DBQueryRequestDetourDistance}(1)}
\nwenddocs{}\nwbegincode{251}\sublabel{NW27XAxz-1Ang64-L}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-L}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestDetourDistance(int rid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S112", 1, rid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-L-u2}\nwindexdefn{DBQueryRequestDetourDistance}{DBQueryRequestDetourDistance}{NW27XAxz-1Ang64-L}\eatline
\nwidentdefs{\\{{DBQueryRequestDetourDistance}{DBQueryRequestDetourDistance}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S112}{S112}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-L}\nwindexuse{S112}{S112}{NW27XAxz-1Ang64-L}\nwendcode{}\nwbegindocs{252}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestDetourDistanceTotal}{DBQueryRequestDetourDistanceTotal}{NW27XAxz-1Ang64-M}DBQueryRequestDetourDistanceTotal}(0)}
\nwenddocs{}\nwbegincode{253}\sublabel{NW27XAxz-1Ang64-M}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-M}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestDetourDistanceTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S113", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-M-u2}\nwindexdefn{DBQueryRequestDetourDistanceTotal}{DBQueryRequestDetourDistanceTotal}{NW27XAxz-1Ang64-M}\eatline
\nwidentdefs{\\{{DBQueryRequestDetourDistanceTotal}{DBQueryRequestDetourDistanceTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S113}{S113}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-M}\nwindexuse{S113}{S113}{NW27XAxz-1Ang64-M}\nwendcode{}\nwbegindocs{254}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestTransitDistance}{DBQueryRequestTransitDistance}{NW27XAxz-1Ang64-N}DBQueryRequestTransitDistance}(1)}
\nwenddocs{}\nwbegincode{255}\sublabel{NW27XAxz-1Ang64-N}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-N}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestTransitDistance(int rid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S114", 1, rid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-N-u2}\nwindexdefn{DBQueryRequestTransitDistance}{DBQueryRequestTransitDistance}{NW27XAxz-1Ang64-N}\eatline
\nwidentdefs{\\{{DBQueryRequestTransitDistance}{DBQueryRequestTransitDistance}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S114}{S114}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-N}\nwindexuse{S114}{S114}{NW27XAxz-1Ang64-N}\nwendcode{}\nwbegindocs{256}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestTransitDistanceTotal}{DBQueryRequestTransitDistanceTotal}{NW27XAxz-1Ang64-O}DBQueryRequestTransitDistanceTotal}(0)}
\nwenddocs{}\nwbegincode{257}\sublabel{NW27XAxz-1Ang64-O}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-O}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestTransitDistanceTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S115", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-O-u2}\nwindexdefn{DBQueryRequestTransitDistanceTotal}{DBQueryRequestTransitDistanceTotal}{NW27XAxz-1Ang64-O}\eatline
\nwidentdefs{\\{{DBQueryRequestTransitDistanceTotal}{DBQueryRequestTransitDistanceTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S115}{S115}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-O}\nwindexuse{S115}{S115}{NW27XAxz-1Ang64-O}\nwendcode{}\nwbegindocs{258}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerTravelDuration}{DBQueryServerTravelDuration}{NW27XAxz-1Ang64-P}DBQueryServerTravelDuration}(1)}
\nwenddocs{}\nwbegincode{259}\sublabel{NW27XAxz-1Ang64-P}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-P}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerTravelDuration(int sid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S116", 1, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-P-u2}\nwindexdefn{DBQueryServerTravelDuration}{DBQueryServerTravelDuration}{NW27XAxz-1Ang64-P}\eatline
\nwidentdefs{\\{{DBQueryServerTravelDuration}{DBQueryServerTravelDuration}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S116}{S116}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-P}\nwindexuse{S116}{S116}{NW27XAxz-1Ang64-P}\nwendcode{}\nwbegindocs{260}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerTravelDurationTotal}{DBQueryServerTravelDurationTotal}{NW27XAxz-1Ang64-Q}DBQueryServerTravelDurationTotal}(0)}
\nwenddocs{}\nwbegincode{261}\sublabel{NW27XAxz-1Ang64-Q}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-Q}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerTravelDurationTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S117", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-Q-u2}\nwindexdefn{DBQueryServerTravelDurationTotal}{DBQueryServerTravelDurationTotal}{NW27XAxz-1Ang64-Q}\eatline
\nwidentdefs{\\{{DBQueryServerTravelDurationTotal}{DBQueryServerTravelDurationTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S117}{S117}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-Q}\nwindexuse{S117}{S117}{NW27XAxz-1Ang64-Q}\nwendcode{}\nwbegindocs{262}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestPickupDuration}{DBQueryRequestPickupDuration}{NW27XAxz-1Ang64-R}DBQueryRequestPickupDuration}(1)}
\nwenddocs{}\nwbegincode{263}\sublabel{NW27XAxz-1Ang64-R}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-R}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestPickupDuration(int rid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S118", 1, rid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-R-u2}\nwindexdefn{DBQueryRequestPickupDuration}{DBQueryRequestPickupDuration}{NW27XAxz-1Ang64-R}\eatline
\nwidentdefs{\\{{DBQueryRequestPickupDuration}{DBQueryRequestPickupDuration}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S118}{S118}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-R}\nwindexuse{S118}{S118}{NW27XAxz-1Ang64-R}\nwendcode{}\nwbegindocs{264}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestPickupDurationTotal}{DBQueryRequestPickupDurationTotal}{NW27XAxz-1Ang64-S}DBQueryRequestPickupDurationTotal}(0)}
\nwenddocs{}\nwbegincode{265}\sublabel{NW27XAxz-1Ang64-S}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-S}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestPickupDurationTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S119", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-S-u2}\nwindexdefn{DBQueryRequestPickupDurationTotal}{DBQueryRequestPickupDurationTotal}{NW27XAxz-1Ang64-S}\eatline
\nwidentdefs{\\{{DBQueryRequestPickupDurationTotal}{DBQueryRequestPickupDurationTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S119}{S119}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-S}\nwindexuse{S119}{S119}{NW27XAxz-1Ang64-S}\nwendcode{}\nwbegindocs{266}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestTransitDuration}{DBQueryRequestTransitDuration}{NW27XAxz-1Ang64-T}DBQueryRequestTransitDuration}(1)}
\nwenddocs{}\nwbegincode{267}\sublabel{NW27XAxz-1Ang64-T}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-T}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestTransitDuration(int rid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S120", 1, rid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-T-u2}\nwindexdefn{DBQueryRequestTransitDuration}{DBQueryRequestTransitDuration}{NW27XAxz-1Ang64-T}\eatline
\nwidentdefs{\\{{DBQueryRequestTransitDuration}{DBQueryRequestTransitDuration}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S120}{S120}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-T}\nwindexuse{S120}{S120}{NW27XAxz-1Ang64-T}\nwendcode{}\nwbegindocs{268}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestTransitDurationTotal}{DBQueryRequestTransitDurationTotal}{NW27XAxz-1Ang64-U}DBQueryRequestTransitDurationTotal}(0)}
\nwenddocs{}\nwbegincode{269}\sublabel{NW27XAxz-1Ang64-U}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-U}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestTransitDurationTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S121", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-U-u2}\nwindexdefn{DBQueryRequestTransitDurationTotal}{DBQueryRequestTransitDurationTotal}{NW27XAxz-1Ang64-U}\eatline
\nwidentdefs{\\{{DBQueryRequestTransitDurationTotal}{DBQueryRequestTransitDurationTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S121}{S121}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-U}\nwindexuse{S121}{S121}{NW27XAxz-1Ang64-U}\nwendcode{}\nwbegindocs{270}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestTravelDuration}{DBQueryRequestTravelDuration}{NW27XAxz-1Ang64-V}DBQueryRequestTravelDuration}(1)}
\nwenddocs{}\nwbegincode{271}\sublabel{NW27XAxz-1Ang64-V}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-V}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestTravelDuration(int rid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S122", 1, rid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-V-u2}\nwindexdefn{DBQueryRequestTravelDuration}{DBQueryRequestTravelDuration}{NW27XAxz-1Ang64-V}\eatline
\nwidentdefs{\\{{DBQueryRequestTravelDuration}{DBQueryRequestTravelDuration}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S122}{S122}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-V}\nwindexuse{S122}{S122}{NW27XAxz-1Ang64-V}\nwendcode{}\nwbegindocs{272}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestTravelDurationTotal}{DBQueryRequestTravelDurationTotal}{NW27XAxz-1Ang64-W}DBQueryRequestTravelDurationTotal}(0)}
\nwenddocs{}\nwbegincode{273}\sublabel{NW27XAxz-1Ang64-W}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-W}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestTravelDurationTotal() throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S123", 1);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-W-u2}\nwindexdefn{DBQueryRequestTravelDurationTotal}{DBQueryRequestTravelDurationTotal}{NW27XAxz-1Ang64-W}\eatline
\nwidentdefs{\\{{DBQueryRequestTravelDurationTotal}{DBQueryRequestTravelDurationTotal}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S123}{S123}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-W}\nwindexuse{S123}{S123}{NW27XAxz-1Ang64-W}\nwendcode{}\nwbegindocs{274}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestDepartureTime}{DBQueryRequestDepartureTime}{NW27XAxz-1Ang64-X}DBQueryRequestDepartureTime}(1)}
\nwenddocs{}\nwbegincode{275}\sublabel{NW27XAxz-1Ang64-X}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-X}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestDepartureTime(int rid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S124", 1, rid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-X-u2}\nwindexdefn{DBQueryRequestDepartureTime}{DBQueryRequestDepartureTime}{NW27XAxz-1Ang64-X}\eatline
\nwidentdefs{\\{{DBQueryRequestDepartureTime}{DBQueryRequestDepartureTime}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S124}{S124}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-X}\nwindexuse{S124}{S124}{NW27XAxz-1Ang64-X}\nwendcode{}\nwbegindocs{276}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerDepartureTime}{DBQueryServerDepartureTime}{NW27XAxz-1Ang64-Y}DBQueryServerDepartureTime}(1)}
\nwenddocs{}\nwbegincode{277}\sublabel{NW27XAxz-1Ang64-Y}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-Y}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerDepartureTime(int sid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S125", 1, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-Y-u2}\nwindexdefn{DBQueryServerDepartureTime}{DBQueryServerDepartureTime}{NW27XAxz-1Ang64-Y}\eatline
\nwidentdefs{\\{{DBQueryServerDepartureTime}{DBQueryServerDepartureTime}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S125}{S125}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-Y}\nwindexuse{S125}{S125}{NW27XAxz-1Ang64-Y}\nwendcode{}\nwbegindocs{278}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryRequestArrivalTime}{DBQueryRequestArrivalTime}{NW27XAxz-1Ang64-Z}DBQueryRequestArrivalTime}(1)}
\nwenddocs{}\nwbegincode{279}\sublabel{NW27XAxz-1Ang64-Z}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-Z}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryRequestArrivalTime(int rid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S126", 1, rid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-Z-u2}\nwindexdefn{DBQueryRequestArrivalTime}{DBQueryRequestArrivalTime}{NW27XAxz-1Ang64-Z}\eatline
\nwidentdefs{\\{{DBQueryRequestArrivalTime}{DBQueryRequestArrivalTime}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S126}{S126}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-Z}\nwindexuse{S126}{S126}{NW27XAxz-1Ang64-Z}\nwendcode{}\nwbegindocs{280}\nwdocspar
\subsubsection{{\tt{}\protect\nwindexuse{DBQueryServerArrivalTime}{DBQueryServerArrivalTime}{NW27XAxz-1Ang64-a}DBQueryServerArrivalTime}(1)}
\nwenddocs{}\nwbegincode{281}\sublabel{NW27XAxz-1Ang64-a}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-a}}}\moddef{Query various metrics~{\nwtagstyle{}\subpageref{NW27XAxz-1Ang64-1}}}\plusendmoddef
public int[] DBQueryServerArrivalTime(int sid) throws RuntimeException \{
  \LA{}..read prepare~{\nwtagstyle{}\subpageref{NW27XAxz-4MoB17-1}}\RA{}
  output = DBFetch("S127", 1, sid);
  \LA{}..read return~{\nwtagstyle{}\subpageref{NW27XAxz-1MI9ro-1}}\RA{}
\}
\nosublabel{NW27XAxz-1Ang64-a-u2}\nwindexdefn{DBQueryServerArrivalTime}{DBQueryServerArrivalTime}{NW27XAxz-1Ang64-a}\eatline
\nwidentdefs{\\{{DBQueryServerArrivalTime}{DBQueryServerArrivalTime}}}\nwidentuses{\\{{DBFetch}{DBFetch}}\\{{S127}{S127}}}\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-1Ang64-a}\nwindexuse{S127}{S127}{NW27XAxz-1Ang64-a}\nwendcode{}\nwbegindocs{282}\nwdocspar
\section{Private Methods}
\label{sec:private}
\nwenddocs{}\nwbegincode{283}\sublabel{NW27XAxz-XGFF1-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-XGFF1-1}}}\moddef{\code{}Storage\edoc{} private methods~{\nwtagstyle{}\subpageref{NW27XAxz-XGFF1-1}}}\endmoddef\nwused{\\{NW27XAxz-3TAldU-1}}
  \LA{}Print a message~{\nwtagstyle{}\subpageref{NW27XAxz-2wEn3G-1}}\RA{}
  \LA{}Setup JDBC driver~{\nwtagstyle{}\subpageref{NW27XAxz-33Wt2A-1}}\RA{}
  \LA{}Initialize statements~{\nwtagstyle{}\subpageref{NW27XAxz-1g2xnv-1}}\RA{}
  \LA{}Prepare a prepared statement~{\nwtagstyle{}\subpageref{NW27XAxz-4UQpM2-1}}\RA{}
  \LA{}Fetch items from database~{\nwtagstyle{}\subpageref{NW27XAxz-17Zt8W-1}}\RA{}
  \LA{}Fill prepared statement~{\nwtagstyle{}\subpageref{NW27XAxz-1ZE0ye-1}}\RA{}
  \LA{}Submit prepared statement batch~{\nwtagstyle{}\subpageref{NW27XAxz-322zJf-1}}\RA{}
\nwendcode{}\nwbegindocs{284}\nwdocspar

\subsection{{\tt{}\protect\nosublabel{NW27XAxz-XGFF1-1-u7}\protect\nwindexuse{Print}{Print}{NW27XAxz-2wEn3G-1}Print}(1)}
\nwenddocs{}\nwbegincode{285}\sublabel{NW27XAxz-2wEn3G-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2wEn3G-1}}}\moddef{Print a message~{\nwtagstyle{}\subpageref{NW27XAxz-2wEn3G-1}}}\endmoddef\nwused{\\{NW27XAxz-XGFF1-1}}
private void Print(String msg) \{
  System.out.println("[Jargo][Storage]["+LocalDateTime.now()+"] "+msg);
\}
\nwindexdefn{Print}{Print}{NW27XAxz-2wEn3G-1}\eatline
\nwidentdefs{\\{{Print}{Print}}}\nwendcode{}\nwbegindocs{286}\nwdocspar
\subsection{{\tt{}\protect\nwindexuse{setupDriver}{setupDriver}{NW27XAxz-33Wt2A-1}setupDriver}(0)}
The following code registers a connection pool to the JDBC driver.  Portions of
this code are licensed by the Apache Software Foundation.  The connection pool
allows us to concurrently submit multiple SQL commands against the database
from different threads. For example, a client ridesharing algorithm in one
thread may be querying from the database at the same time that the engine
thread in the simulation controller is performing updates on server routes
in response to simulated traffic.
\nwenddocs{}\nwbegincode{287}\sublabel{NW27XAxz-33Wt2A-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-33Wt2A-1}}}\moddef{Setup JDBC driver~{\nwtagstyle{}\subpageref{NW27XAxz-33Wt2A-1}}}\endmoddef\nwused{\\{NW27XAxz-XGFF1-1}}
private void setupDriver() throws RuntimeException \{
  try \{
    \LA{}..initialize connection factory~{\nwtagstyle{}\subpageref{NW27XAxz-bkt9c-1}}\RA{}
    \LA{}..initialize poolable-connection factory using connection factory~{\nwtagstyle{}\subpageref{NW27XAxz-3Flrgj-1}}\RA{}
    \LA{}..initialize connection pool using poolable-connection factory~{\nwtagstyle{}\subpageref{NW27XAxz-4fNbUS-1}}\RA{}
    \LA{}..register pool to poolable-connection factory and driver~{\nwtagstyle{}\subpageref{NW27XAxz-MaeyE-1}}\RA{}
    \LA{}..configure database properties~{\nwtagstyle{}\subpageref{NW27XAxz-2WrnDp-1}}\RA{}
  \} catch (Exception e) \{
    throw new RuntimeException(e);
  \}
\}
\nosublabel{NW27XAxz-33Wt2A-1-u5}\nwindexdefn{setupDriver}{setupDriver}{NW27XAxz-33Wt2A-1}\eatline
\nwidentdefs{\\{{setupDriver}{setupDriver}}}\nwendcode{}\nwbegincode{288}\sublabel{NW27XAxz-bkt9c-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-bkt9c-1}}}\moddef{..initialize connection factory~{\nwtagstyle{}\subpageref{NW27XAxz-bkt9c-1}}}\endmoddef\nwused{\\{NW27XAxz-33Wt2A-1}}
connection_factory = new DriverManagerConnectionFactory(CONNECTIONS_URL);
\nwidentuses{\\{{CONNECTIONS{\char95}URL}{CONNECTIONS:unURL}}}\nwindexuse{CONNECTIONS{\char95}URL}{CONNECTIONS:unURL}{NW27XAxz-bkt9c-1}\nwendcode{}\nwbegindocs{289}\nwdocspar
\nwenddocs{}\nwbegincode{290}\sublabel{NW27XAxz-3Flrgj-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3Flrgj-1}}}\moddef{..initialize poolable-connection factory using connection factory~{\nwtagstyle{}\subpageref{NW27XAxz-3Flrgj-1}}}\endmoddef\nwused{\\{NW27XAxz-33Wt2A-1}}
poolableconnection_factory = new PoolableConnectionFactory(connection_factory, null);
poolableconnection_factory.setPoolStatements(true);
poolableconnection_factory.setDefaultAutoCommit(false);
poolableconnection_factory.setMaxOpenPreparedStatements(STATEMENTS_MAX_COUNT);
\nwidentuses{\\{{STATEMENTS{\char95}MAX{\char95}COUNT}{STATEMENTS:unMAX:unCOUNT}}}\nwindexuse{STATEMENTS{\char95}MAX{\char95}COUNT}{STATEMENTS:unMAX:unCOUNT}{NW27XAxz-3Flrgj-1}\nwendcode{}\nwbegindocs{291}\nwdocspar
\nwenddocs{}\nwbegincode{292}\sublabel{NW27XAxz-4fNbUS-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4fNbUS-1}}}\moddef{..initialize connection pool using poolable-connection factory~{\nwtagstyle{}\subpageref{NW27XAxz-4fNbUS-1}}}\endmoddef\nwused{\\{NW27XAxz-33Wt2A-1}}
pool = new GenericObjectPool<>(poolableconnection_factory);
\nwendcode{}\nwbegindocs{293}\nwdocspar
\nwenddocs{}\nwbegincode{294}\sublabel{NW27XAxz-MaeyE-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-MaeyE-1}}}\moddef{..register pool to poolable-connection factory and driver~{\nwtagstyle{}\subpageref{NW27XAxz-MaeyE-1}}}\endmoddef\nwused{\\{NW27XAxz-33Wt2A-1}}
poolableconnection_factory.setPool(pool);
Class.forName("org.apache.commons.dbcp2.PoolingDriver");
driver = (PoolingDriver) DriverManager.getDriver(CONNECTIONS_DRIVER_URL);
driver.registerPool(CONNECTIONS_POOL_NAME, pool);
\nwidentuses{\\{{CONNECTIONS{\char95}DRIVER{\char95}URL}{CONNECTIONS:unDRIVER:unURL}}\\{{CONNECTIONS{\char95}POOL{\char95}NAME}{CONNECTIONS:unPOOL:unNAME}}}\nwindexuse{CONNECTIONS{\char95}DRIVER{\char95}URL}{CONNECTIONS:unDRIVER:unURL}{NW27XAxz-MaeyE-1}\nwindexuse{CONNECTIONS{\char95}POOL{\char95}NAME}{CONNECTIONS:unPOOL:unNAME}{NW27XAxz-MaeyE-1}\nwendcode{}\nwbegindocs{295}\nwdocspar
We increase the page size\footnote{Even though the database is in-memory, the
page size still needs to be set; see the Derby Tuning Guide for details.}.
\nwenddocs{}\nwbegincode{296}\sublabel{NW27XAxz-2WrnDp-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2WrnDp-1}}}\moddef{..configure database properties~{\nwtagstyle{}\subpageref{NW27XAxz-2WrnDp-1}}}\endmoddef\nwused{\\{NW27XAxz-b3Hn1-1}\\{NW27XAxz-33Wt2A-1}}
Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
CallableStatement cs = conn.prepareCall(
  "CALL SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY(?, ?)");
cs.setString(1, "derby.storage.pageCacheSize");
cs.setInt(2, DERBY_PAGECACHESIZE);
cs.execute();
conn.close();
\nwidentuses{\\{{DERBY{\char95}PAGECACHESIZE}{DERBY:unPAGECACHESIZE}}}\nwindexuse{DERBY{\char95}PAGECACHESIZE}{DERBY:unPAGECACHESIZE}{NW27XAxz-2WrnDp-1}\nwendcode{}\nwbegindocs{297}\nwdocspar

\subsection{{\tt{}\protect\nwindexuse{PS}{PS}{NW27XAxz-4UQpM2-1}PS}(1)}
The {\tt{}\protect\nwindexuse{PS}{PS}{NW27XAxz-4UQpM2-1}PS}(1) method is our factory method for generating prepared statements.
We retrieve the statement string from {\tt{}\protect\nwindexuse{pstr}{pstr}{NW27XAxz-17yXws-1}pstr}.  We set the result set to
scroll-insensitive and read-only in order to allow cursor movements.
\nwenddocs{}\nwbegincode{298}\sublabel{NW27XAxz-4UQpM2-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4UQpM2-1}}}\moddef{Prepare a prepared statement~{\nwtagstyle{}\subpageref{NW27XAxz-4UQpM2-1}}}\endmoddef\nwused{\\{NW27XAxz-XGFF1-1}}
private PreparedStatement PS(Connection conn, String k) throws SQLException \{
  PreparedStatement p = null;
  try \{
    p = conn.prepareStatement(pstr.get(k),
      ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);
    p.clearBatch();
    p.clearParameters();
  \}
  \LA{}Catch and throw \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-2x6EhZ-1}}\RA{}
  return p;
\}
\nosublabel{NW27XAxz-4UQpM2-1-u1}\nwindexdefn{PS}{PS}{NW27XAxz-4UQpM2-1}\eatline
\nwidentdefs{\\{{PS}{PS}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4UQpM2-1}\nwendcode{}\nwbegindocs{299}\nwdocspar
\subsection{{\tt{}\protect\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-17Zt8W-1}DBFetch}(3...)}
The {\tt{}\protect\nwindexuse{DBFetch}{DBFetch}{NW27XAxz-17Zt8W-1}DBFetch}(3...) method executes queries against the database.  Query
results are serialized into arrays so that callers do not need to deal with
JDBC {\tt{}ResultSet}s. For debugging purposes, some commented {\tt{}\protect\nwindexuse{Print}{Print}{NW27XAxz-2wEn3G-1}Print} commands
are inside the method.
\nwenddocs{}\nwbegincode{300}\sublabel{NW27XAxz-17Zt8W-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-17Zt8W-1}}}\moddef{Fetch items from database~{\nwtagstyle{}\subpageref{NW27XAxz-17Zt8W-1}}}\endmoddef\nwused{\\{NW27XAxz-XGFF1-1}}
private int[] DBFetch(String k, int ncols, Integer... values) throws SQLException \{
  Connection conn = DriverManager.getConnection(CONNECTIONS_POOL_URL);
  PreparedStatement p = PS(conn, k);
  // FOR DEBUGGING
  // Print("DBFetch("+pstr.get(k)+")");
  // Print("DBFetch use conn "+conn.toString());
  // Print("DBFetch use thread "+Thread.currentThread().getName());
  int[] output = new int[] \{ \};
  \LA{}..set values for statement~{\nwtagstyle{}\subpageref{NW27XAxz-2m6DFc-1}}\RA{}
  try \{
    ResultSet res = p.executeQuery();  // <-- if stuck here, investigate locks
    if (res.last() == true) \{
      \LA{}..flatten results~{\nwtagstyle{}\subpageref{NW27XAxz-2Xu6MS-1}}\RA{}
    \}
    res.close();
  \}
  \LA{}Catch and throw \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-2x6EhZ-1}}\RA{}
  p.close();
  // Print("DBFetch close conn "+conn.toString());
  conn.close();
  if (output.length == 0) \{
    Print("WARNING: DBFetch(3...) returned empty!");
  \}
  return output;
\}
\nwindexdefn{DBFetch}{DBFetch}{NW27XAxz-17Zt8W-1}\eatline
\nwidentdefs{\\{{DBFetch}{DBFetch}}}\nwidentuses{\\{{Print}{Print}}\\{{PS}{PS}}\\{{pstr}{pstr}}}\nwindexuse{Print}{Print}{NW27XAxz-17Zt8W-1}\nwindexuse{PS}{PS}{NW27XAxz-17Zt8W-1}\nwindexuse{pstr}{pstr}{NW27XAxz-17Zt8W-1}\nwendcode{}\nwbegincode{301}\sublabel{NW27XAxz-2m6DFc-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2m6DFc-1}}}\moddef{..set values for statement~{\nwtagstyle{}\subpageref{NW27XAxz-2m6DFc-1}}}\endmoddef\nwused{\\{NW27XAxz-17Zt8W-1}\\{NW27XAxz-1ZE0ye-1}}
for (int i = 0; i < values.length; i++) \{
  if (values[i] == null) \{
    p.setNull((i + 1), java.sql.Types.INTEGER);
  \} else \{
    p.setInt ((i + 1), values[i]);
  \}
\}
\nwendcode{}\nwbegindocs{302}\nwdocspar
\nwenddocs{}\nwbegincode{303}\sublabel{NW27XAxz-2Xu6MS-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2Xu6MS-1}}}\moddef{..flatten results~{\nwtagstyle{}\subpageref{NW27XAxz-2Xu6MS-1}}}\endmoddef\nwused{\\{NW27XAxz-2FtqIZ-1}\\{NW27XAxz-17Zt8W-1}}
output = new int[(ncols*res.getRow())];
res.first();
do \{
  for (int j = 1; j <= ncols; j++) \{
    output[((res.getRow() - 1)*ncols + (j - 1))] = res.getInt(j);
  \}
\} while (res.next());
\nwendcode{}\nwbegindocs{304}\nwdocspar

\subsection{{\tt{}\protect\nwindexuse{PSAdd}{PSAdd}{NW27XAxz-1ZE0ye-1}PSAdd}(2...)}
\nwenddocs{}\nwbegincode{305}\sublabel{NW27XAxz-1ZE0ye-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1ZE0ye-1}}}\moddef{Fill prepared statement~{\nwtagstyle{}\subpageref{NW27XAxz-1ZE0ye-1}}}\endmoddef\nwused{\\{NW27XAxz-XGFF1-1}}
private void PSAdd(PreparedStatement p, Integer... values) throws SQLException \{
  p.clearParameters();
  \LA{}..set values for statement~{\nwtagstyle{}\subpageref{NW27XAxz-2m6DFc-1}}\RA{}
  try \{
    p.addBatch();
  \}
  \LA{}Catch and throw \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-2x6EhZ-1}}\RA{}
\}
\nosublabel{NW27XAxz-1ZE0ye-1-u2}\nwindexdefn{PSAdd}{PSAdd}{NW27XAxz-1ZE0ye-1}\eatline
\nwidentdefs{\\{{PSAdd}{PSAdd}}}\nwendcode{}\nwbegindocs{306}\nwdocspar
\subsection{{\tt{}\protect\nwindexuse{PSSubmit}{PSSubmit}{NW27XAxz-322zJf-1}PSSubmit}(1...)}
\nwenddocs{}\nwbegincode{307}\sublabel{NW27XAxz-322zJf-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-322zJf-1}}}\moddef{Submit prepared statement batch~{\nwtagstyle{}\subpageref{NW27XAxz-322zJf-1}}}\endmoddef\nwused{\\{NW27XAxz-XGFF1-1}}
private void PSSubmit(PreparedStatement... statements) throws SQLException \{
  try \{
    for (PreparedStatement p : statements) \{
      p.executeBatch();
      p.close();
    \}
  \}
  \LA{}Catch and throw \code{}SQLException\edoc{}~{\nwtagstyle{}\subpageref{NW27XAxz-2x6EhZ-1}}\RA{}
\}
\nosublabel{NW27XAxz-322zJf-1-u1}\nwindexdefn{PSSubmit}{PSSubmit}{NW27XAxz-322zJf-1}\eatline
\nwidentdefs{\\{{PSSubmit}{PSSubmit}}}\nwendcode{}\nwbegindocs{308}\nwdocspar
\subsection{{\tt{}\protect\nwindexuse{PSInit}{PSInit}{NW27XAxz-1g2xnv-1}PSInit}(0)}
The {\tt{}\protect\nwindexuse{PSInit}{PSInit}{NW27XAxz-1g2xnv-1}PSInit}(0) method initializes the statement cache {\tt{}\protect\nwindexuse{pstr}{pstr}{NW27XAxz-17yXws-1}pstr}. Each
statement is placed in its own chunk so it can be referenced wherever the
statement is used.
\nwenddocs{}\nwbegincode{309}\sublabel{NW27XAxz-1g2xnv-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1g2xnv-1}}}\moddef{Initialize statements~{\nwtagstyle{}\subpageref{NW27XAxz-1g2xnv-1}}}\endmoddef\nwused{\\{NW27XAxz-XGFF1-1}}
private static void PSInit() \{
  pstr = new HashMap<>();
  String INS = "INSERT INTO ";
  String UPD = "UPDATE ";
  String DEL = "DELETE FROM ";
  String SEL = "SELECT ";
  String q2  = "(?,?)";
  String q3  = "(?,?,?)";
  String q4  = "(?,?,?,?)";
  String q7  = "(?,?,?,?,?,?,?)";
  String q8  = "(?,?,?,?,?,?,?,?)";
  String q9  = "(?,?,?,?,?,?,?,?,?)";
  String q12 = "(?,?,?,?,?,?,?,?,?,?,?,?)";
  String q14 = "(?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
  \LA{}S0~{\nwtagstyle{}\subpageref{NW27XAxz-9czRY-1}}\RA{}
  \LA{}S1~{\nwtagstyle{}\subpageref{NW27XAxz-4dnsum-1}}\RA{}
  \LA{}S2~{\nwtagstyle{}\subpageref{NW27XAxz-26Y6r2-1}}\RA{}
  \LA{}S3~{\nwtagstyle{}\subpageref{NW27XAxz-2UOPmS-1}}\RA{}
  \LA{}S4~{\nwtagstyle{}\subpageref{NW27XAxz-yRBj6-1}}\RA{}
  \LA{}S5~{\nwtagstyle{}\subpageref{NW27XAxz-3WGA2y-1}}\RA{}
  \LA{}S6~{\nwtagstyle{}\subpageref{NW27XAxz-1SWfVw-1}}\RA{}
  \LA{}S7~{\nwtagstyle{}\subpageref{NW27XAxz-3Q0zBY-1}}\RA{}
  \LA{}S8~{\nwtagstyle{}\subpageref{NW27XAxz-PwvQG-1}}\RA{}
  \LA{}S9~{\nwtagstyle{}\subpageref{NW27XAxz-4Ai05A-1}}\RA{}
  \LA{}S10~{\nwtagstyle{}\subpageref{NW27XAxz-96fbA-1}}\RA{}
  \LA{}S11~{\nwtagstyle{}\subpageref{NW27XAxz-4dHZ4O-1}}\RA{}
  \LA{}S12~{\nwtagstyle{}\subpageref{NW27XAxz-261n0e-1}}\RA{}
  \LA{}S13~{\nwtagstyle{}\subpageref{NW27XAxz-2Ts5w4-1}}\RA{}
  \LA{}S14~{\nwtagstyle{}\subpageref{NW27XAxz-yU48q-1}}\RA{}
  \LA{}S15~{\nwtagstyle{}\subpageref{NW27XAxz-3WJ2Si-1}}\RA{}
  \LA{}S131~{\nwtagstyle{}\subpageref{NW27XAxz-3WHOrj-1}}\RA{}
  \LA{}S77~{\nwtagstyle{}\subpageref{NW27XAxz-3PlVaO-1}}\RA{}
  \LA{}S84~{\nwtagstyle{}\subpageref{NW27XAxz-yx2fc-1}}\RA{}
  \LA{}S82~{\nwtagstyle{}\subpageref{NW27XAxz-25vZHI-1}}\RA{}
  \LA{}S83~{\nwtagstyle{}\subpageref{NW27XAxz-2TlsCi-1}}\RA{}
  \LA{}S76~{\nwtagstyle{}\subpageref{NW27XAxz-1SHBum-1}}\RA{}
  \LA{}S42~{\nwtagstyle{}\subpageref{NW27XAxz-25mK0a-1}}\RA{}
  \LA{}S43~{\nwtagstyle{}\subpageref{NW27XAxz-2Tccw0-1}}\RA{}
  \LA{}S80~{\nwtagstyle{}\subpageref{NW27XAxz-A8qO4-1}}\RA{}
  \LA{}S62~{\nwtagstyle{}\subpageref{NW27XAxz-25gPSO-1}}\RA{}
  \LA{}S64~{\nwtagstyle{}\subpageref{NW27XAxz-zH56q-1}}\RA{}
  \LA{}S63~{\nwtagstyle{}\subpageref{NW27XAxz-2TWiNo-1}}\RA{}
  \LA{}S65~{\nwtagstyle{}\subpageref{NW27XAxz-3X63Qi-1}}\RA{}
  \LA{}S46~{\nwtagstyle{}\subpageref{NW27XAxz-1RksfU-1}}\RA{}
  \LA{}S130~{\nwtagstyle{}\subpageref{NW27XAxz-ySQXr-1}}\RA{}
  \LA{}S70~{\nwtagstyle{}\subpageref{NW27XAxz-9NVqO-1}}\RA{}
  \LA{}S48~{\nwtagstyle{}\subpageref{NW27XAxz-PSjhs-1}}\RA{}
  \LA{}S66~{\nwtagstyle{}\subpageref{NW27XAxz-1SEANQ-1}}\RA{}
  \LA{}S75~{\nwtagstyle{}\subpageref{NW27XAxz-3W0gRo-1}}\RA{}
  \LA{}S51~{\nwtagstyle{}\subpageref{NW27XAxz-4dVWIm-1}}\RA{}
  \LA{}S67~{\nwtagstyle{}\subpageref{NW27XAxz-3PiU32-1}}\RA{}
  \LA{}S59~{\nwtagstyle{}\subpageref{NW27XAxz-4APdTA-1}}\RA{}
  \LA{}S128~{\nwtagstyle{}\subpageref{NW27XAxz-nIIRf-1}}\RA{}
  \LA{}S60~{\nwtagstyle{}\subpageref{NW27XAxz-9tgZA-1}}\RA{}
  \LA{}S129~{\nwtagstyle{}\subpageref{NW27XAxz-44X5Zr-1}}\RA{}
  \LA{}S61~{\nwtagstyle{}\subpageref{NW27XAxz-4e4a2O-1}}\RA{}
  \LA{}S69~{\nwtagstyle{}\subpageref{NW27XAxz-49qIgW-1}}\RA{}
  \LA{}S68~{\nwtagstyle{}\subpageref{NW27XAxz-P5E1c-1}}\RA{}
  \LA{}S85~{\nwtagstyle{}\subpageref{NW27XAxz-3Wm0zU-1}}\RA{}
  \LA{}S86~{\nwtagstyle{}\subpageref{NW27XAxz-1Ru7wC-1}}\RA{}
  \LA{}S73~{\nwtagstyle{}\subpageref{NW27XAxz-2U8wBI-1}}\RA{}
  \LA{}S87~{\nwtagstyle{}\subpageref{NW27XAxz-3PORbo-1}}\RA{}
  \LA{}S100~{\nwtagstyle{}\subpageref{NW27XAxz-yxMXz-1}}\RA{}
  \LA{}S101~{\nwtagstyle{}\subpageref{NW27XAxz-3WmKrr-1}}\RA{}
  \LA{}S102~{\nwtagstyle{}\subpageref{NW27XAxz-1RuRoZ-1}}\RA{}
  \LA{}S103~{\nwtagstyle{}\subpageref{NW27XAxz-3POlUB-1}}\RA{}
  \LA{}S104~{\nwtagstyle{}\subpageref{NW27XAxz-A9AGR-1}}\RA{}
  \LA{}S105~{\nwtagstyle{}\subpageref{NW27XAxz-4eK3jf-1}}\RA{}
  \LA{}S106~{\nwtagstyle{}\subpageref{NW27XAxz-25vt9f-1}}\RA{}
  \LA{}S107~{\nwtagstyle{}\subpageref{NW27XAxz-2TmC55-1}}\RA{}
  \LA{}S108~{\nwtagstyle{}\subpageref{NW27XAxz-mtPWF-1}}\RA{}
  \LA{}S109~{\nwtagstyle{}\subpageref{NW27XAxz-448CeR-1}}\RA{}
  \LA{}S110~{\nwtagstyle{}\subpageref{NW27XAxz-yTwJX-1}}\RA{}
  \LA{}S111~{\nwtagstyle{}\subpageref{NW27XAxz-3WIudP-1}}\RA{}
  \LA{}S112~{\nwtagstyle{}\subpageref{NW27XAxz-1SZQ6N-1}}\RA{}
  \LA{}S113~{\nwtagstyle{}\subpageref{NW27XAxz-3Q3jlz-1}}\RA{}
  \LA{}S114~{\nwtagstyle{}\subpageref{NW27XAxz-96Xlr-1}}\RA{}
  \LA{}S115~{\nwtagstyle{}\subpageref{NW27XAxz-4dHRF5-1}}\RA{}
  \LA{}S116~{\nwtagstyle{}\subpageref{NW27XAxz-261fBL-1}}\RA{}
  \LA{}S117~{\nwtagstyle{}\subpageref{NW27XAxz-2Try6l-1}}\RA{}
  \LA{}S118~{\nwtagstyle{}\subpageref{NW27XAxz-npyw7-1}}\RA{}
  \LA{}S119~{\nwtagstyle{}\subpageref{NW27XAxz-454m4J-1}}\RA{}
  \LA{}S120~{\nwtagstyle{}\subpageref{NW27XAxz-z4eLL-1}}\RA{}
  \LA{}S121~{\nwtagstyle{}\subpageref{NW27XAxz-3WtcfD-1}}\RA{}
  \LA{}S122~{\nwtagstyle{}\subpageref{NW27XAxz-1S1jbv-1}}\RA{}
  \LA{}S123~{\nwtagstyle{}\subpageref{NW27XAxz-3PW3HX-1}}\RA{}
  \LA{}S124~{\nwtagstyle{}\subpageref{NW27XAxz-9hFnf-1}}\RA{}
  \LA{}S125~{\nwtagstyle{}\subpageref{NW27XAxz-4ds9Gt-1}}\RA{}
  \LA{}S126~{\nwtagstyle{}\subpageref{NW27XAxz-25Tygt-1}}\RA{}
  \LA{}S127~{\nwtagstyle{}\subpageref{NW27XAxz-2TKHcJ-1}}\RA{}
  \LA{}S133~{\nwtagstyle{}\subpageref{NW27XAxz-3Q2E0J-1}}\RA{}
  \LA{}S134~{\nwtagstyle{}\subpageref{NW27XAxz-9eEGJ-1}}\RA{}
  \LA{}S135~{\nwtagstyle{}\subpageref{NW27XAxz-4dp7jX-1}}\RA{}
\}
\nosublabel{NW27XAxz-1g2xnv-1-u79}\nwindexdefn{PSInit}{PSInit}{NW27XAxz-1g2xnv-1}\eatline
\nwidentdefs{\\{{PSInit}{PSInit}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-1g2xnv-1}\nwendcode{}\nwbegincode{310}\sublabel{NW27XAxz-9czRY-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-9czRY-1}}}\moddef{S0~{\nwtagstyle{}\subpageref{NW27XAxz-9czRY-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S0", INS+"V VALUES "+q3);
\nwindexdefn{S0}{S0}{NW27XAxz-9czRY-1}\eatline
\nwidentdefs{\\{{S0}{S0}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-9czRY-1}\nwendcode{}\nwbegincode{311}\sublabel{NW27XAxz-4dnsum-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4dnsum-1}}}\moddef{S1~{\nwtagstyle{}\subpageref{NW27XAxz-4dnsum-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S1", INS+"E VALUES "+q4);
\nwindexdefn{S1}{S1}{NW27XAxz-4dnsum-1}\eatline
\nwidentdefs{\\{{S1}{S1}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4dnsum-1}\nwendcode{}\nwbegincode{312}\sublabel{NW27XAxz-26Y6r2-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-26Y6r2-1}}}\moddef{S2~{\nwtagstyle{}\subpageref{NW27XAxz-26Y6r2-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S2", INS+"UQ VALUES "+q2);
\nwindexdefn{S2}{S2}{NW27XAxz-26Y6r2-1}\eatline
\nwidentdefs{\\{{S2}{S2}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-26Y6r2-1}\nwendcode{}\nwbegincode{313}\sublabel{NW27XAxz-2UOPmS-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2UOPmS-1}}}\moddef{S3~{\nwtagstyle{}\subpageref{NW27XAxz-2UOPmS-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S3", INS+"UE VALUES "+q2);
\nwindexdefn{S3}{S3}{NW27XAxz-2UOPmS-1}\eatline
\nwidentdefs{\\{{S3}{S3}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-2UOPmS-1}\nwendcode{}\nwbegincode{314}\sublabel{NW27XAxz-yRBj6-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-yRBj6-1}}}\moddef{S4~{\nwtagstyle{}\subpageref{NW27XAxz-yRBj6-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S4", INS+"UL VALUES "+q2);
\nwindexdefn{S4}{S4}{NW27XAxz-yRBj6-1}\eatline
\nwidentdefs{\\{{S4}{S4}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-yRBj6-1}\nwendcode{}\nwbegincode{315}\sublabel{NW27XAxz-3WGA2y-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3WGA2y-1}}}\moddef{S5~{\nwtagstyle{}\subpageref{NW27XAxz-3WGA2y-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S5", INS+"UO VALUES "+q2);
\nwindexdefn{S5}{S5}{NW27XAxz-3WGA2y-1}\eatline
\nwidentdefs{\\{{S5}{S5}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3WGA2y-1}\nwendcode{}\nwbegincode{316}\sublabel{NW27XAxz-1SWfVw-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1SWfVw-1}}}\moddef{S6~{\nwtagstyle{}\subpageref{NW27XAxz-1SWfVw-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S6", INS+"UD VALUES "+q2);
\nwindexdefn{S6}{S6}{NW27XAxz-1SWfVw-1}\eatline
\nwidentdefs{\\{{S6}{S6}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-1SWfVw-1}\nwendcode{}\nwbegincode{317}\sublabel{NW27XAxz-3Q0zBY-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3Q0zBY-1}}}\moddef{S7~{\nwtagstyle{}\subpageref{NW27XAxz-3Q0zBY-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S7", INS+"UB VALUES "+q2);
\nwindexdefn{S7}{S7}{NW27XAxz-3Q0zBY-1}\eatline
\nwidentdefs{\\{{S7}{S7}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3Q0zBY-1}\nwendcode{}\nwbegincode{318}\sublabel{NW27XAxz-PwvQG-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-PwvQG-1}}}\moddef{S8~{\nwtagstyle{}\subpageref{NW27XAxz-PwvQG-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S8", INS+"S VALUES "+q7);
\nwindexdefn{S8}{S8}{NW27XAxz-PwvQG-1}\eatline
\nwidentdefs{\\{{S8}{S8}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-PwvQG-1}\nwendcode{}\nwbegincode{319}\sublabel{NW27XAxz-4Ai05A-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4Ai05A-1}}}\moddef{S9~{\nwtagstyle{}\subpageref{NW27XAxz-4Ai05A-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S9", INS+"R VALUES "+q7);
\nwindexdefn{S9}{S9}{NW27XAxz-4Ai05A-1}\eatline
\nwidentdefs{\\{{S9}{S9}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4Ai05A-1}\nwendcode{}\nwbegincode{320}\sublabel{NW27XAxz-96fbA-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-96fbA-1}}}\moddef{S10~{\nwtagstyle{}\subpageref{NW27XAxz-96fbA-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S10", INS+"W VALUES "+q8);
\nwindexdefn{S10}{S10}{NW27XAxz-96fbA-1}\eatline
\nwidentdefs{\\{{S10}{S10}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-96fbA-1}\nwendcode{}\nwbegincode{321}\sublabel{NW27XAxz-9NVqO-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-9NVqO-1}}}\moddef{S70~{\nwtagstyle{}\subpageref{NW27XAxz-9NVqO-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S70", SEL+"sid, sq, se, sl, so, sd, sb FROM S WHERE sid=?");
\nwindexdefn{S70}{S70}{NW27XAxz-9NVqO-1}\eatline
\nwidentdefs{\\{{S70}{S70}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-9NVqO-1}\nwendcode{}\nwbegincode{322}\sublabel{NW27XAxz-4dHZ4O-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4dHZ4O-1}}}\moddef{S11~{\nwtagstyle{}\subpageref{NW27XAxz-4dHZ4O-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S11", INS+"CW VALUES "+q9);
\nwindexdefn{S11}{S11}{NW27XAxz-4dHZ4O-1}\eatline
\nwidentdefs{\\{{S11}{S11}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4dHZ4O-1}\nwendcode{}\nwbegincode{323}\sublabel{NW27XAxz-261n0e-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-261n0e-1}}}\moddef{S12~{\nwtagstyle{}\subpageref{NW27XAxz-261n0e-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S12", INS+"PD VALUES "+q4);
\nwindexdefn{S12}{S12}{NW27XAxz-261n0e-1}\eatline
\nwidentdefs{\\{{S12}{S12}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-261n0e-1}\nwendcode{}\nwbegincode{324}\sublabel{NW27XAxz-2Ts5w4-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2Ts5w4-1}}}\moddef{S13~{\nwtagstyle{}\subpageref{NW27XAxz-2Ts5w4-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S13", INS+"CPD VALUES "+q12);
\nwindexdefn{S13}{S13}{NW27XAxz-2Ts5w4-1}\eatline
\nwidentdefs{\\{{S13}{S13}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-2Ts5w4-1}\nwendcode{}\nwbegincode{325}\sublabel{NW27XAxz-yU48q-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-yU48q-1}}}\moddef{S14~{\nwtagstyle{}\subpageref{NW27XAxz-yU48q-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S14", INS+"CQ VALUES "+q14);
\nwindexdefn{S14}{S14}{NW27XAxz-yU48q-1}\eatline
\nwidentdefs{\\{{S14}{S14}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-yU48q-1}\nwendcode{}\nwbegincode{326}\sublabel{NW27XAxz-3WJ2Si-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3WJ2Si-1}}}\moddef{S15~{\nwtagstyle{}\subpageref{NW27XAxz-3WJ2Si-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S15", UPD+"E SET nu=? WHERE v1=? AND v2=?");
\nwindexdefn{S15}{S15}{NW27XAxz-3WJ2Si-1}\eatline
\nwidentdefs{\\{{S15}{S15}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3WJ2Si-1}\nwendcode{}\nwbegincode{327}\sublabel{NW27XAxz-3WHOrj-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3WHOrj-1}}}\moddef{S131~{\nwtagstyle{}\subpageref{NW27XAxz-3WHOrj-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S131", UPD+"W SET nu=? WHERE v1=? AND v2=?");
\nwindexdefn{S131}{S131}{NW27XAxz-3WHOrj-1}\eatline
\nwidentdefs{\\{{S131}{S131}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3WHOrj-1}\nwendcode{}\nwbegincode{328}\sublabel{NW27XAxz-3PlVaO-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3PlVaO-1}}}\moddef{S77~{\nwtagstyle{}\subpageref{NW27XAxz-3PlVaO-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S77", UPD+"CW SET te=?, ve=? WHERE sid=?");
\nwindexdefn{S77}{S77}{NW27XAxz-3PlVaO-1}\eatline
\nwidentdefs{\\{{S77}{S77}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3PlVaO-1}\nwendcode{}\nwbegincode{329}\sublabel{NW27XAxz-yx2fc-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-yx2fc-1}}}\moddef{S84~{\nwtagstyle{}\subpageref{NW27XAxz-yx2fc-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S84", UPD+"PD SET t2=? WHERE v2=? AND rid=?");
\nwindexdefn{S84}{S84}{NW27XAxz-yx2fc-1}\eatline
\nwidentdefs{\\{{S84}{S84}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-yx2fc-1}\nwendcode{}\nwbegincode{330}\sublabel{NW27XAxz-25vZHI-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-25vZHI-1}}}\moddef{S82~{\nwtagstyle{}\subpageref{NW27XAxz-25vZHI-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S82", UPD+"CPD SET tp=? WHERE vp=? AND rid=?");
\nwindexdefn{S82}{S82}{NW27XAxz-25vZHI-1}\eatline
\nwidentdefs{\\{{S82}{S82}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-25vZHI-1}\nwendcode{}\nwbegincode{331}\sublabel{NW27XAxz-2TlsCi-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2TlsCi-1}}}\moddef{S83~{\nwtagstyle{}\subpageref{NW27XAxz-2TlsCi-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S83", UPD+"CPD SET td=? WHERE vd=? AND rid=?");
\nwindexdefn{S83}{S83}{NW27XAxz-2TlsCi-1}\eatline
\nwidentdefs{\\{{S83}{S83}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-2TlsCi-1}\nwendcode{}\nwbegincode{332}\sublabel{NW27XAxz-1SHBum-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1SHBum-1}}}\moddef{S76~{\nwtagstyle{}\subpageref{NW27XAxz-1SHBum-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S76", DEL+"W WHERE sid=? AND t2>?");
\nwindexdefn{S76}{S76}{NW27XAxz-1SHBum-1}\eatline
\nwidentdefs{\\{{S76}{S76}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-1SHBum-1}\nwendcode{}\nwbegincode{333}\sublabel{NW27XAxz-25mK0a-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-25mK0a-1}}}\moddef{S42~{\nwtagstyle{}\subpageref{NW27XAxz-25mK0a-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S42", DEL+"PD WHERE rid=?");
\nwindexdefn{S42}{S42}{NW27XAxz-25mK0a-1}\eatline
\nwidentdefs{\\{{S42}{S42}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-25mK0a-1}\nwendcode{}\nwbegincode{334}\sublabel{NW27XAxz-2Tccw0-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2Tccw0-1}}}\moddef{S43~{\nwtagstyle{}\subpageref{NW27XAxz-2Tccw0-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S43", DEL+"CPD WHERE rid=?");
\nwindexdefn{S43}{S43}{NW27XAxz-2Tccw0-1}\eatline
\nwidentdefs{\\{{S43}{S43}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-2Tccw0-1}\nwendcode{}\nwbegincode{335}\sublabel{NW27XAxz-A8qO4-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-A8qO4-1}}}\moddef{S80~{\nwtagstyle{}\subpageref{NW27XAxz-A8qO4-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S80", DEL+"CQ WHERE sid=? AND t2>?");
\nwindexdefn{S80}{S80}{NW27XAxz-A8qO4-1}\eatline
\nwidentdefs{\\{{S80}{S80}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-A8qO4-1}\nwendcode{}\nwbegincode{336}\sublabel{NW27XAxz-25gPSO-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-25gPSO-1}}}\moddef{S62~{\nwtagstyle{}\subpageref{NW27XAxz-25gPSO-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S62", SEL+"COUNT (*) FROM V WHERE v<>0");
\nwindexdefn{S62}{S62}{NW27XAxz-25gPSO-1}\eatline
\nwidentdefs{\\{{S62}{S62}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-25gPSO-1}\nwendcode{}\nwbegincode{337}\sublabel{NW27XAxz-zH56q-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-zH56q-1}}}\moddef{S64~{\nwtagstyle{}\subpageref{NW27XAxz-zH56q-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S64", SEL+"MIN (lng), MAX (lng), MIN (lat), MAX (lat) "
      + "FROM V WHERE v<>0");
\nwindexdefn{S64}{S64}{NW27XAxz-zH56q-1}\eatline
\nwidentdefs{\\{{S64}{S64}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-zH56q-1}\nwendcode{}\nwbegincode{338}\sublabel{NW27XAxz-2TWiNo-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2TWiNo-1}}}\moddef{S63~{\nwtagstyle{}\subpageref{NW27XAxz-2TWiNo-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S63", SEL+"COUNT (*) FROM E WHERE v1<>0 AND v2<>0");
\nwindexdefn{S63}{S63}{NW27XAxz-2TWiNo-1}\eatline
\nwidentdefs{\\{{S63}{S63}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-2TWiNo-1}\nwendcode{}\nwbegincode{339}\sublabel{NW27XAxz-3X63Qi-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3X63Qi-1}}}\moddef{S65~{\nwtagstyle{}\subpageref{NW27XAxz-3X63Qi-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S65", SEL+"MIN (dd), MAX (dd), SUM (dd) / COUNT (dd), "
      + "MIN (nu), MAX (nu), SUM (nu) / COUNT (nu) "
      + "FROM E WHERE v1<>0 AND v2<>0");
\nwindexdefn{S65}{S65}{NW27XAxz-3X63Qi-1}\eatline
\nwidentdefs{\\{{S65}{S65}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3X63Qi-1}\nwendcode{}\nwbegincode{340}\sublabel{NW27XAxz-1RksfU-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1RksfU-1}}}\moddef{S46~{\nwtagstyle{}\subpageref{NW27XAxz-1RksfU-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S46", SEL+"dd, nu FROM E WHERE v1=? AND v2=?");
\nwindexdefn{S46}{S46}{NW27XAxz-1RksfU-1}\eatline
\nwidentdefs{\\{{S46}{S46}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-1RksfU-1}\nwendcode{}\nwbegincode{341}\sublabel{NW27XAxz-ySQXr-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-ySQXr-1}}}\moddef{S130~{\nwtagstyle{}\subpageref{NW27XAxz-ySQXr-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S130", SEL+"lng, lat FROM V WHERE v=?");
\nwindexdefn{S130}{S130}{NW27XAxz-ySQXr-1}\eatline
\nwidentdefs{\\{{S130}{S130}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-ySQXr-1}\nwendcode{}\nwbegincode{342}\sublabel{NW27XAxz-PSjhs-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-PSjhs-1}}}\moddef{S48~{\nwtagstyle{}\subpageref{NW27XAxz-PSjhs-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S48", SEL+"sq, se FROM S WHERE sid=?");
\nwindexdefn{S48}{S48}{NW27XAxz-PSjhs-1}\eatline
\nwidentdefs{\\{{S48}{S48}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-PSjhs-1}\nwendcode{}\nwbegincode{343}\sublabel{NW27XAxz-1SEANQ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1SEANQ-1}}}\moddef{S66~{\nwtagstyle{}\subpageref{NW27XAxz-1SEANQ-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S66", SEL+"COUNT (*) FROM S");
\nwindexdefn{S66}{S66}{NW27XAxz-1SEANQ-1}\eatline
\nwidentdefs{\\{{S66}{S66}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-1SEANQ-1}\nwendcode{}\nwbegincode{344}\sublabel{NW27XAxz-3W0gRo-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3W0gRo-1}}}\moddef{S75~{\nwtagstyle{}\subpageref{NW27XAxz-3W0gRo-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S75", SEL+"rid, rq, re, rl, ro, rd, rb FROM R WHERE rid=?");
\nwindexdefn{S75}{S75}{NW27XAxz-3W0gRo-1}\eatline
\nwidentdefs{\\{{S75}{S75}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3W0gRo-1}\nwendcode{}\nwbegincode{345}\sublabel{NW27XAxz-4dVWIm-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4dVWIm-1}}}\moddef{S51~{\nwtagstyle{}\subpageref{NW27XAxz-4dVWIm-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S51", SEL+"rq, re, rl, ro, rd FROM R WHERE rid=?");
\nwindexdefn{S51}{S51}{NW27XAxz-4dVWIm-1}\eatline
\nwidentdefs{\\{{S51}{S51}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4dVWIm-1}\nwendcode{}\nwbegincode{346}\sublabel{NW27XAxz-3PiU32-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3PiU32-1}}}\moddef{S67~{\nwtagstyle{}\subpageref{NW27XAxz-3PiU32-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S67", SEL+"COUNT (*) FROM R");
\nwindexdefn{S67}{S67}{NW27XAxz-3PiU32-1}\eatline
\nwidentdefs{\\{{S67}{S67}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3PiU32-1}\nwendcode{}\nwbegincode{347}\sublabel{NW27XAxz-4APdTA-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4APdTA-1}}}\moddef{S59~{\nwtagstyle{}\subpageref{NW27XAxz-4APdTA-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S59", SEL+"a.sid, a.t2, a.v2 FROM W AS a INNER JOIN ("
      + "SELECT sid, MIN(ABS(t2-?)) as tdiff FROM W WHERE t2<=? AND v2<>0 "
      + "GROUP BY sid"
      + ") as b ON a.sid=b.sid AND ABS(a.t2-?)=b.tdiff AND a.t2<=?");
\nwindexdefn{S59}{S59}{NW27XAxz-4APdTA-1}\eatline
\nwidentdefs{\\{{S59}{S59}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4APdTA-1}\nwendcode{}\nwbegincode{348}\sublabel{NW27XAxz-nIIRf-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-nIIRf-1}}}\moddef{S128~{\nwtagstyle{}\subpageref{NW27XAxz-nIIRf-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S128", SEL+"a.sid, a.t2, a.v2 FROM W AS a INNER JOIN ("
      + "SELECT sid FROM CW WHERE te>? OR (ve=0 AND sl>?)"
      + ") as b ON a.sid=b.sid INNER JOIN ("
      + "SELECT sid, MIN(ABS(t2-?)) as tdiff FROM W WHERE t2<=? AND v2<>0 "
      + "GROUP BY sid"
      + ") as c ON a.sid=c.sid AND ABS(a.t2-?)=c.tdiff AND a.t2<=?");
\nwindexdefn{S128}{S128}{NW27XAxz-nIIRf-1}\eatline
\nwidentdefs{\\{{S128}{S128}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-nIIRf-1}\nwendcode{}\nwbegincode{349}\sublabel{NW27XAxz-9tgZA-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-9tgZA-1}}}\moddef{S60~{\nwtagstyle{}\subpageref{NW27XAxz-9tgZA-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S60", SEL+"t, v FROM r_server WHERE sid=? ORDER BY t ASC");
\nwindexdefn{S60}{S60}{NW27XAxz-9tgZA-1}\eatline
\nwidentdefs{\\{{S60}{S60}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-9tgZA-1}\nwendcode{}\nwbegincode{350}\sublabel{NW27XAxz-44X5Zr-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-44X5Zr-1}}}\moddef{S129~{\nwtagstyle{}\subpageref{NW27XAxz-44X5Zr-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S129", SEL+"t, v FROM r_server WHERE sid=? AND t>? ORDER BY t ASC");
\nwindexdefn{S129}{S129}{NW27XAxz-44X5Zr-1}\eatline
\nwidentdefs{\\{{S129}{S129}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-44X5Zr-1}\nwendcode{}\nwbegincode{351}\sublabel{NW27XAxz-4e4a2O-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4e4a2O-1}}}\moddef{S61~{\nwtagstyle{}\subpageref{NW27XAxz-4e4a2O-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S61", SEL+"t, v, Ls, Lr FROM r_server WHERE sid=?"
      + "AND (Ls IS NOT NULL OR Lr IS NOT NULL) ORDER BY t ASC");
\nwindexdefn{S61}{S61}{NW27XAxz-4e4a2O-1}\eatline
\nwidentdefs{\\{{S61}{S61}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4e4a2O-1}\nwendcode{}\nwbegincode{352}\sublabel{NW27XAxz-49qIgW-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-49qIgW-1}}}\moddef{S69~{\nwtagstyle{}\subpageref{NW27XAxz-49qIgW-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
// Always return a dummy destination
pstr.put("S69", SEL+"t, v, Ls, Lr FROM r_server WHERE sid=? "
      + "AND (t>? OR v=0) "
      + "AND (Ls IS NOT NULL OR Lr IS NOT NULL) ORDER BY t ASC");
\nwindexdefn{S69}{S69}{NW27XAxz-49qIgW-1}\eatline
\nwidentdefs{\\{{S69}{S69}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-49qIgW-1}\nwendcode{}\nwbegincode{353}\sublabel{NW27XAxz-P5E1c-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-P5E1c-1}}}\moddef{S68~{\nwtagstyle{}\subpageref{NW27XAxz-P5E1c-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
// A "timeout" of 30 seconds is hard-coded here
pstr.put("S68", SEL+"* FROM R WHERE re<=? AND ?<=re+30 AND rid NOT IN  "
      + "(SELECT rid FROM assignments_r)");
\nwindexdefn{S68}{S68}{NW27XAxz-P5E1c-1}\eatline
\nwidentdefs{\\{{S68}{S68}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-P5E1c-1}\nwendcode{}\nwbegincode{354}\sublabel{NW27XAxz-3Wm0zU-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3Wm0zU-1}}}\moddef{S85~{\nwtagstyle{}\subpageref{NW27XAxz-3Wm0zU-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S85", SEL+"uq FROM UQ WHERE uid=?");
\nwindexdefn{S85}{S85}{NW27XAxz-3Wm0zU-1}\eatline
\nwidentdefs{\\{{S85}{S85}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3Wm0zU-1}\nwendcode{}\nwbegincode{355}\sublabel{NW27XAxz-1Ru7wC-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1Ru7wC-1}}}\moddef{S86~{\nwtagstyle{}\subpageref{NW27XAxz-1Ru7wC-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S86", SEL+"tp, td FROM CPD WHERE rid=?");
\nwindexdefn{S86}{S86}{NW27XAxz-1Ru7wC-1}\eatline
\nwidentdefs{\\{{S86}{S86}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-1Ru7wC-1}\nwendcode{}\nwbegincode{356}\sublabel{NW27XAxz-2U8wBI-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2U8wBI-1}}}\moddef{S73~{\nwtagstyle{}\subpageref{NW27XAxz-2U8wBI-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S73", SEL+"q2 FROM CQ WHERE sid=? AND t2<=? "
      + "ORDER BY t2 DESC, o2 DESC FETCH FIRST ROW ONLY");
\nwindexdefn{S73}{S73}{NW27XAxz-2U8wBI-1}\eatline
\nwidentdefs{\\{{S73}{S73}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-2U8wBI-1}\nwendcode{}\nwbegincode{357}\sublabel{NW27XAxz-3PORbo-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3PORbo-1}}}\moddef{S87~{\nwtagstyle{}\subpageref{NW27XAxz-3PORbo-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S87", SEL+"t2, q2, o2 FROM CQ WHERE sid=? AND t2<? "
      + "ORDER BY t2 DESC, o2 DESC FETCH FIRST ROW ONLY");
\nwindexdefn{S87}{S87}{NW27XAxz-3PORbo-1}\eatline
\nwidentdefs{\\{{S87}{S87}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3PORbo-1}\nwendcode{}\nwbegincode{358}\sublabel{NW27XAxz-yxMXz-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-yxMXz-1}}}\moddef{S100~{\nwtagstyle{}\subpageref{NW27XAxz-yxMXz-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S100", SEL+"rid FROM assignments WHERE t>? AND sid=?");
\nwindexdefn{S100}{S100}{NW27XAxz-yxMXz-1}\eatline
\nwidentdefs{\\{{S100}{S100}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-yxMXz-1}\nwendcode{}\nwbegincode{359}\sublabel{NW27XAxz-3WmKrr-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3WmKrr-1}}}\moddef{S101~{\nwtagstyle{}\subpageref{NW27XAxz-3WmKrr-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S101", SEL+"rid FROM assignments WHERE t<=? AND sid=?");
\nwindexdefn{S101}{S101}{NW27XAxz-3WmKrr-1}\eatline
\nwidentdefs{\\{{S101}{S101}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3WmKrr-1}\nwendcode{}\nwbegincode{360}\sublabel{NW27XAxz-1RuRoZ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1RuRoZ-1}}}\moddef{S102~{\nwtagstyle{}\subpageref{NW27XAxz-1RuRoZ-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S102", SEL+"* FROM service_rate");
\nwindexdefn{S102}{S102}{NW27XAxz-1RuRoZ-1}\eatline
\nwidentdefs{\\{{S102}{S102}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-1RuRoZ-1}\nwendcode{}\nwbegincode{361}\sublabel{NW27XAxz-3POlUB-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3POlUB-1}}}\moddef{S103~{\nwtagstyle{}\subpageref{NW27XAxz-3POlUB-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S103", SEL+"* FROM dist_base");
\nwindexdefn{S103}{S103}{NW27XAxz-3POlUB-1}\eatline
\nwidentdefs{\\{{S103}{S103}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3POlUB-1}\nwendcode{}\nwbegincode{362}\sublabel{NW27XAxz-A9AGR-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-A9AGR-1}}}\moddef{S104~{\nwtagstyle{}\subpageref{NW27XAxz-A9AGR-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S104", SEL+"val FROM dist_s_travel WHERE sid=?");
\nwindexdefn{S104}{S104}{NW27XAxz-A9AGR-1}\eatline
\nwidentdefs{\\{{S104}{S104}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-A9AGR-1}\nwendcode{}\nwbegincode{363}\sublabel{NW27XAxz-4eK3jf-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4eK3jf-1}}}\moddef{S105~{\nwtagstyle{}\subpageref{NW27XAxz-4eK3jf-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S105", SEL+"SUM (val) FROM dist_s_travel");
\nwindexdefn{S105}{S105}{NW27XAxz-4eK3jf-1}\eatline
\nwidentdefs{\\{{S105}{S105}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4eK3jf-1}\nwendcode{}\nwbegincode{364}\sublabel{NW27XAxz-25vt9f-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-25vt9f-1}}}\moddef{S106~{\nwtagstyle{}\subpageref{NW27XAxz-25vt9f-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S106", SEL+"val FROM dist_s_cruising WHERE sid=?");
\nwindexdefn{S106}{S106}{NW27XAxz-25vt9f-1}\eatline
\nwidentdefs{\\{{S106}{S106}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-25vt9f-1}\nwendcode{}\nwbegincode{365}\sublabel{NW27XAxz-2TmC55-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2TmC55-1}}}\moddef{S107~{\nwtagstyle{}\subpageref{NW27XAxz-2TmC55-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S107", SEL+"SUM (val) FROM dist_s_cruising");
\nwindexdefn{S107}{S107}{NW27XAxz-2TmC55-1}\eatline
\nwidentdefs{\\{{S107}{S107}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-2TmC55-1}\nwendcode{}\nwbegincode{366}\sublabel{NW27XAxz-mtPWF-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-mtPWF-1}}}\moddef{S108~{\nwtagstyle{}\subpageref{NW27XAxz-mtPWF-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S108", SEL+"val FROM dist_s_service WHERE sid=?");
\nwindexdefn{S108}{S108}{NW27XAxz-mtPWF-1}\eatline
\nwidentdefs{\\{{S108}{S108}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-mtPWF-1}\nwendcode{}\nwbegincode{367}\sublabel{NW27XAxz-448CeR-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-448CeR-1}}}\moddef{S109~{\nwtagstyle{}\subpageref{NW27XAxz-448CeR-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S109", SEL+"SUM (val) FROM dist_s_service");
\nwindexdefn{S109}{S109}{NW27XAxz-448CeR-1}\eatline
\nwidentdefs{\\{{S109}{S109}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-448CeR-1}\nwendcode{}\nwbegincode{368}\sublabel{NW27XAxz-yTwJX-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-yTwJX-1}}}\moddef{S110~{\nwtagstyle{}\subpageref{NW27XAxz-yTwJX-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S110", SEL+"val FROM dist_s_base");
\nwindexdefn{S110}{S110}{NW27XAxz-yTwJX-1}\eatline
\nwidentdefs{\\{{S110}{S110}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-yTwJX-1}\nwendcode{}\nwbegincode{369}\sublabel{NW27XAxz-3WIudP-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3WIudP-1}}}\moddef{S111~{\nwtagstyle{}\subpageref{NW27XAxz-3WIudP-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S111", SEL+"val FROM dist_r_base");
\nwindexdefn{S111}{S111}{NW27XAxz-3WIudP-1}\eatline
\nwidentdefs{\\{{S111}{S111}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3WIudP-1}\nwendcode{}\nwbegincode{370}\sublabel{NW27XAxz-1SZQ6N-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1SZQ6N-1}}}\moddef{S112~{\nwtagstyle{}\subpageref{NW27XAxz-1SZQ6N-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S112", SEL+"val FROM dist_r_detour WHERE rid=?");
\nwindexdefn{S112}{S112}{NW27XAxz-1SZQ6N-1}\eatline
\nwidentdefs{\\{{S112}{S112}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-1SZQ6N-1}\nwendcode{}\nwbegincode{371}\sublabel{NW27XAxz-3Q3jlz-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3Q3jlz-1}}}\moddef{S113~{\nwtagstyle{}\subpageref{NW27XAxz-3Q3jlz-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S113", SEL+"SUM (val) FROM dist_r_detour");
\nwindexdefn{S113}{S113}{NW27XAxz-3Q3jlz-1}\eatline
\nwidentdefs{\\{{S113}{S113}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3Q3jlz-1}\nwendcode{}\nwbegincode{372}\sublabel{NW27XAxz-96Xlr-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-96Xlr-1}}}\moddef{S114~{\nwtagstyle{}\subpageref{NW27XAxz-96Xlr-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S114", SEL+"val FROM dist_r_transit WHERE rid=?");
\nwindexdefn{S114}{S114}{NW27XAxz-96Xlr-1}\eatline
\nwidentdefs{\\{{S114}{S114}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-96Xlr-1}\nwendcode{}\nwbegincode{373}\sublabel{NW27XAxz-4dHRF5-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4dHRF5-1}}}\moddef{S115~{\nwtagstyle{}\subpageref{NW27XAxz-4dHRF5-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S115", SEL+"SUM (val) FROM dist_r_transit");
\nwindexdefn{S115}{S115}{NW27XAxz-4dHRF5-1}\eatline
\nwidentdefs{\\{{S115}{S115}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4dHRF5-1}\nwendcode{}\nwbegincode{374}\sublabel{NW27XAxz-261fBL-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-261fBL-1}}}\moddef{S116~{\nwtagstyle{}\subpageref{NW27XAxz-261fBL-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S116", SEL+"val FROM dur_s_travel WHERE sid=?");
\nwindexdefn{S116}{S116}{NW27XAxz-261fBL-1}\eatline
\nwidentdefs{\\{{S116}{S116}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-261fBL-1}\nwendcode{}\nwbegincode{375}\sublabel{NW27XAxz-2Try6l-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2Try6l-1}}}\moddef{S117~{\nwtagstyle{}\subpageref{NW27XAxz-2Try6l-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S117", SEL+"SUM (val) FROM dur_s_travel");
\nwindexdefn{S117}{S117}{NW27XAxz-2Try6l-1}\eatline
\nwidentdefs{\\{{S117}{S117}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-2Try6l-1}\nwendcode{}\nwbegincode{376}\sublabel{NW27XAxz-npyw7-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-npyw7-1}}}\moddef{S118~{\nwtagstyle{}\subpageref{NW27XAxz-npyw7-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S118", SEL+"val FROM dur_r_pickup WHERE rid=?");
\nwindexdefn{S118}{S118}{NW27XAxz-npyw7-1}\eatline
\nwidentdefs{\\{{S118}{S118}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-npyw7-1}\nwendcode{}\nwbegincode{377}\sublabel{NW27XAxz-454m4J-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-454m4J-1}}}\moddef{S119~{\nwtagstyle{}\subpageref{NW27XAxz-454m4J-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S119", SEL+"SUM (val) FROM dur_r_pickup");
\nwindexdefn{S119}{S119}{NW27XAxz-454m4J-1}\eatline
\nwidentdefs{\\{{S119}{S119}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-454m4J-1}\nwendcode{}\nwbegincode{378}\sublabel{NW27XAxz-z4eLL-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-z4eLL-1}}}\moddef{S120~{\nwtagstyle{}\subpageref{NW27XAxz-z4eLL-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S120", SEL+"val FROM dur_r_transit WHERE rid=?");
\nwindexdefn{S120}{S120}{NW27XAxz-z4eLL-1}\eatline
\nwidentdefs{\\{{S120}{S120}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-z4eLL-1}\nwendcode{}\nwbegincode{379}\sublabel{NW27XAxz-3WtcfD-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3WtcfD-1}}}\moddef{S121~{\nwtagstyle{}\subpageref{NW27XAxz-3WtcfD-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S121", SEL+"SUM (val) FROM dur_r_transit");
\nwindexdefn{S121}{S121}{NW27XAxz-3WtcfD-1}\eatline
\nwidentdefs{\\{{S121}{S121}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3WtcfD-1}\nwendcode{}\nwbegincode{380}\sublabel{NW27XAxz-1S1jbv-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-1S1jbv-1}}}\moddef{S122~{\nwtagstyle{}\subpageref{NW27XAxz-1S1jbv-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S122", SEL+"val FROM dur_r_travel WHERE rid=?");
\nwindexdefn{S122}{S122}{NW27XAxz-1S1jbv-1}\eatline
\nwidentdefs{\\{{S122}{S122}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-1S1jbv-1}\nwendcode{}\nwbegincode{381}\sublabel{NW27XAxz-3PW3HX-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3PW3HX-1}}}\moddef{S123~{\nwtagstyle{}\subpageref{NW27XAxz-3PW3HX-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S123", SEL+"SUM (val) FROM dur_r_travel");
\nwindexdefn{S123}{S123}{NW27XAxz-3PW3HX-1}\eatline
\nwidentdefs{\\{{S123}{S123}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3PW3HX-1}\nwendcode{}\nwbegincode{382}\sublabel{NW27XAxz-9hFnf-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-9hFnf-1}}}\moddef{S124~{\nwtagstyle{}\subpageref{NW27XAxz-9hFnf-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S124", SEL+"val FROM t_r_depart WHERE rid=?");
\nwindexdefn{S124}{S124}{NW27XAxz-9hFnf-1}\eatline
\nwidentdefs{\\{{S124}{S124}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-9hFnf-1}\nwendcode{}\nwbegincode{383}\sublabel{NW27XAxz-4ds9Gt-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4ds9Gt-1}}}\moddef{S125~{\nwtagstyle{}\subpageref{NW27XAxz-4ds9Gt-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S125", SEL+"val FROM t_s_depart WHERE sid=?");
\nwindexdefn{S125}{S125}{NW27XAxz-4ds9Gt-1}\eatline
\nwidentdefs{\\{{S125}{S125}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4ds9Gt-1}\nwendcode{}\nwbegincode{384}\sublabel{NW27XAxz-25Tygt-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-25Tygt-1}}}\moddef{S126~{\nwtagstyle{}\subpageref{NW27XAxz-25Tygt-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S126", SEL+"val FROM t_r_arrive WHERE rid=?");
\nwindexdefn{S126}{S126}{NW27XAxz-25Tygt-1}\eatline
\nwidentdefs{\\{{S126}{S126}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-25Tygt-1}\nwendcode{}\nwbegincode{385}\sublabel{NW27XAxz-2TKHcJ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-2TKHcJ-1}}}\moddef{S127~{\nwtagstyle{}\subpageref{NW27XAxz-2TKHcJ-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S127", SEL+"val FROM t_s_arrive WHERE sid=?");
\nwindexdefn{S127}{S127}{NW27XAxz-2TKHcJ-1}\eatline
\nwidentdefs{\\{{S127}{S127}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-2TKHcJ-1}\nwendcode{}\nwbegincode{386}\sublabel{NW27XAxz-3Q2E0J-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-3Q2E0J-1}}}\moddef{S133~{\nwtagstyle{}\subpageref{NW27XAxz-3Q2E0J-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S133", SEL+"val FROM f_status WHERE rid=? AND t<=? "
    + "ORDER BY t DESC FETCH FIRST ROW ONLY");
\nwindexdefn{S133}{S133}{NW27XAxz-3Q2E0J-1}\eatline
\nwidentdefs{\\{{S133}{S133}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-3Q2E0J-1}\nwendcode{}\nwbegincode{387}\sublabel{NW27XAxz-9eEGJ-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-9eEGJ-1}}}\moddef{S134~{\nwtagstyle{}\subpageref{NW27XAxz-9eEGJ-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S134", SEL+"sid FROM CW WHERE se<=? AND (?<te OR (ve=0 AND sl>?))");
\nwindexdefn{S134}{S134}{NW27XAxz-9eEGJ-1}\eatline
\nwidentdefs{\\{{S134}{S134}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-9eEGJ-1}\nwendcode{}\nwbegincode{388}\sublabel{NW27XAxz-4dp7jX-1}\nwmargintag{{\nwtagstyle{}\subpageref{NW27XAxz-4dp7jX-1}}}\moddef{S135~{\nwtagstyle{}\subpageref{NW27XAxz-4dp7jX-1}}}\endmoddef\nwused{\\{NW27XAxz-1g2xnv-1}}
pstr.put("S135", SEL+"t2, v2 FROM W WHERE t2<=? AND v2<>0 AND sid=? "
      + "ORDER BY t2 DESC FETCH FIRST ROW ONLY");
\nwindexdefn{S135}{S135}{NW27XAxz-4dp7jX-1}\eatline
\nwidentdefs{\\{{S135}{S135}}}\nwidentuses{\\{{pstr}{pstr}}}\nwindexuse{pstr}{pstr}{NW27XAxz-4dp7jX-1}\nwendcode{}

\nwixlogsorted{c}{{......check if new job}{NW27XAxz-2Hq38w-1}{\nwixu{NW27XAxz-10xBjT-1}\nwixd{NW27XAxz-2Hq38w-1}}}%
\nwixlogsorted{c}{{......get tp, vp, td, vd of new job}{NW27XAxz-pddDf-1}{\nwixu{NW27XAxz-10xBjT-1}\nwixd{NW27XAxz-pddDf-1}}}%
\nwixlogsorted{c}{{....delete remaining route from w}{NW27XAxz-1n0DBP-1}{\nwixu{NW27XAxz-4LV9nl-1}\nwixd{NW27XAxz-1n0DBP-1}}}%
\nwixlogsorted{c}{{....delete remaining schedule from cq}{NW27XAxz-4AIXfi-1}{\nwixu{NW27XAxz-2NqWTJ-1}\nwixd{NW27XAxz-4AIXfi-1}\nwixu{NW27XAxz-2VQLMF-1}}}%
\nwixlogsorted{c}{{....insert into pd, cpd}{NW27XAxz-4fUZKI-1}{\nwixu{NW27XAxz-2VQLMF-1}\nwixd{NW27XAxz-4fUZKI-1}}}%
\nwixlogsorted{c}{{....insert new remaining route into w}{NW27XAxz-2BaQBV-1}{\nwixu{NW27XAxz-4LV9nl-1}\nwixd{NW27XAxz-2BaQBV-1}}}%
\nwixlogsorted{c}{{....insert new remaining schedule into cq}{NW27XAxz-2Ir9Yx-1}{\nwixu{NW27XAxz-2NqWTJ-1}\nwixd{NW27XAxz-2Ir9Yx-1}\nwixu{NW27XAxz-2VQLMF-1}}}%
\nwixlogsorted{c}{{....populate the tp, td cache}{NW27XAxz-2G68mE-1}{\nwixu{NW27XAxz-2NqWTJ-1}\nwixd{NW27XAxz-2G68mE-1}}}%
\nwixlogsorted{c}{{....populate the tp, td cache and vp, vd cache}{NW27XAxz-10xBjT-1}{\nwixu{NW27XAxz-2VQLMF-1}\nwixd{NW27XAxz-10xBjT-1}}}%
\nwixlogsorted{c}{{....select latest order number}{NW27XAxz-1gWfDY-1}{\nwixu{NW27XAxz-2NqWTJ-1}\nwixd{NW27XAxz-1gWfDY-1}\nwixu{NW27XAxz-2VQLMF-1}}}%
\nwixlogsorted{c}{{....update route endpoint in cw}{NW27XAxz-2JeImF-1}{\nwixu{NW27XAxz-4LV9nl-1}\nwixd{NW27XAxz-2JeImF-1}}}%
\nwixlogsorted{c}{{....update times in pd and cpd}{NW27XAxz-1cwA5Z-1}{\nwixu{NW27XAxz-2NqWTJ-1}\nwixd{NW27XAxz-1cwA5Z-1}\nwixu{NW27XAxz-2VQLMF-1}}}%
\nwixlogsorted{c}{{..commit and close}{NW27XAxz-3pffr6-1}{\nwixd{NW27XAxz-3pffr6-1}\nwixu{NW27XAxz-28BJIM-1}\nwixu{NW27XAxz-1r65Fb-1}\nwixu{NW27XAxz-3SpUqj-1}\nwixu{NW27XAxz-4ISWm4-1}\nwixu{NW27XAxz-IYVQQ-1}\nwixu{NW27XAxz-4VFddh-1}\nwixu{NW27XAxz-y828a-1}\nwixu{NW27XAxz-lMiTm-1}}}%
\nwixlogsorted{c}{{..configure database properties}{NW27XAxz-2WrnDp-1}{\nwixu{NW27XAxz-b3Hn1-1}\nwixu{NW27XAxz-33Wt2A-1}\nwixd{NW27XAxz-2WrnDp-1}}}%
\nwixlogsorted{c}{{..fetch \code{}sq\edoc{} and \code{}se\edoc{}}{NW27XAxz-2VNDCH-1}{\nwixu{NW27XAxz-4VFddh-1}\nwixd{NW27XAxz-2VNDCH-1}\nwixu{NW27XAxz-y828a-1}\nwixu{NW27XAxz-lMiTm-1}}}%
\nwixlogsorted{c}{{..flatten results}{NW27XAxz-2Xu6MS-1}{\nwixu{NW27XAxz-2FtqIZ-1}\nwixu{NW27XAxz-17Zt8W-1}\nwixd{NW27XAxz-2Xu6MS-1}}}%
\nwixlogsorted{c}{{..initialize connection factory}{NW27XAxz-bkt9c-1}{\nwixu{NW27XAxz-33Wt2A-1}\nwixd{NW27XAxz-bkt9c-1}}}%
\nwixlogsorted{c}{{..initialize connection pool using poolable-connection factory}{NW27XAxz-4fNbUS-1}{\nwixu{NW27XAxz-33Wt2A-1}\nwixd{NW27XAxz-4fNbUS-1}}}%
\nwixlogsorted{c}{{..initialize poolable-connection factory using connection factory}{NW27XAxz-3Flrgj-1}{\nwixu{NW27XAxz-33Wt2A-1}\nwixd{NW27XAxz-3Flrgj-1}}}%
\nwixlogsorted{c}{{..insert new request into r}{NW27XAxz-44Ff7c-1}{\nwixu{NW27XAxz-4ISWm4-1}\nwixd{NW27XAxz-44Ff7c-1}}}%
\nwixlogsorted{c}{{..insert new server into cq}{NW27XAxz-404DhQ-1}{\nwixu{NW27XAxz-IYVQQ-1}\nwixd{NW27XAxz-404DhQ-1}}}%
\nwixlogsorted{c}{{..insert new server into s}{NW27XAxz-JGp6y-1}{\nwixu{NW27XAxz-IYVQQ-1}\nwixd{NW27XAxz-JGp6y-1}}}%
\nwixlogsorted{c}{{..insert new server route into cw}{NW27XAxz-2GDxmx-1}{\nwixu{NW27XAxz-IYVQQ-1}\nwixd{NW27XAxz-2GDxmx-1}}}%
\nwixlogsorted{c}{{..insert new server route into w}{NW27XAxz-3xg8Fp-1}{\nwixu{NW27XAxz-IYVQQ-1}\nwixd{NW27XAxz-3xg8Fp-1}}}%
\nwixlogsorted{c}{{..insert new user into user tables}{NW27XAxz-4ROa6q-1}{\nwixu{NW27XAxz-4ISWm4-1}\nwixd{NW27XAxz-4ROa6q-1}\nwixu{NW27XAxz-IYVQQ-1}}}%
\nwixlogsorted{c}{{..read prepare}{NW27XAxz-4MoB17-1}{\nwixd{NW27XAxz-4MoB17-1}\nwixu{NW27XAxz-2FtqIZ-1}\nwixu{NW27XAxz-3isdeu-1}\nwixu{NW27XAxz-3isdeu-2}\nwixu{NW27XAxz-1hFvVm-1}\nwixu{NW27XAxz-3AGrxZ-1}\nwixu{NW27XAxz-rvb17-1}\nwixu{NW27XAxz-1AprqI-1}\nwixu{NW27XAxz-1AprqI-2}\nwixu{NW27XAxz-3yA8FQ-1}\nwixu{NW27XAxz-3yA8FQ-2}\nwixu{NW27XAxz-aKbeg-1}\nwixu{NW27XAxz-1Ang64-1}\nwixu{NW27XAxz-1Ang64-2}\nwixu{NW27XAxz-1Ang64-5}\nwixu{NW27XAxz-1Ang64-6}\nwixu{NW27XAxz-1Ang64-7}\nwixu{NW27XAxz-1Ang64-8}\nwixu{NW27XAxz-1Ang64-9}\nwixu{NW27XAxz-1Ang64-A}\nwixu{NW27XAxz-1Ang64-B}\nwixu{NW27XAxz-1Ang64-C}\nwixu{NW27XAxz-1Ang64-D}\nwixu{NW27XAxz-1Ang64-E}\nwixu{NW27XAxz-1Ang64-F}\nwixu{NW27XAxz-1Ang64-G}\nwixu{NW27XAxz-1Ang64-H}\nwixu{NW27XAxz-1Ang64-I}\nwixu{NW27XAxz-1Ang64-J}\nwixu{NW27XAxz-1Ang64-K}\nwixu{NW27XAxz-1Ang64-L}\nwixu{NW27XAxz-1Ang64-M}\nwixu{NW27XAxz-1Ang64-N}\nwixu{NW27XAxz-1Ang64-O}\nwixu{NW27XAxz-1Ang64-P}\nwixu{NW27XAxz-1Ang64-Q}\nwixu{NW27XAxz-1Ang64-R}\nwixu{NW27XAxz-1Ang64-S}\nwixu{NW27XAxz-1Ang64-T}\nwixu{NW27XAxz-1Ang64-U}\nwixu{NW27XAxz-1Ang64-V}\nwixu{NW27XAxz-1Ang64-W}\nwixu{NW27XAxz-1Ang64-X}\nwixu{NW27XAxz-1Ang64-Y}\nwixu{NW27XAxz-1Ang64-Z}\nwixu{NW27XAxz-1Ang64-a}}}%
\nwixlogsorted{c}{{..read return}{NW27XAxz-1MI9ro-1}{\nwixd{NW27XAxz-1MI9ro-1}\nwixu{NW27XAxz-2FtqIZ-1}\nwixu{NW27XAxz-3isdeu-1}\nwixu{NW27XAxz-3isdeu-2}\nwixu{NW27XAxz-1hFvVm-1}\nwixu{NW27XAxz-3AGrxZ-1}\nwixu{NW27XAxz-rvb17-1}\nwixu{NW27XAxz-1AprqI-1}\nwixu{NW27XAxz-1AprqI-2}\nwixu{NW27XAxz-3yA8FQ-1}\nwixu{NW27XAxz-3yA8FQ-2}\nwixu{NW27XAxz-aKbeg-1}\nwixu{NW27XAxz-1Ang64-1}\nwixu{NW27XAxz-1Ang64-2}\nwixu{NW27XAxz-1Ang64-5}\nwixu{NW27XAxz-1Ang64-6}\nwixu{NW27XAxz-1Ang64-7}\nwixu{NW27XAxz-1Ang64-8}\nwixu{NW27XAxz-1Ang64-9}\nwixu{NW27XAxz-1Ang64-A}\nwixu{NW27XAxz-1Ang64-B}\nwixu{NW27XAxz-1Ang64-C}\nwixu{NW27XAxz-1Ang64-D}\nwixu{NW27XAxz-1Ang64-E}\nwixu{NW27XAxz-1Ang64-F}\nwixu{NW27XAxz-1Ang64-G}\nwixu{NW27XAxz-1Ang64-H}\nwixu{NW27XAxz-1Ang64-I}\nwixu{NW27XAxz-1Ang64-J}\nwixu{NW27XAxz-1Ang64-K}\nwixu{NW27XAxz-1Ang64-L}\nwixu{NW27XAxz-1Ang64-M}\nwixu{NW27XAxz-1Ang64-N}\nwixu{NW27XAxz-1Ang64-O}\nwixu{NW27XAxz-1Ang64-P}\nwixu{NW27XAxz-1Ang64-Q}\nwixu{NW27XAxz-1Ang64-R}\nwixu{NW27XAxz-1Ang64-S}\nwixu{NW27XAxz-1Ang64-T}\nwixu{NW27XAxz-1Ang64-U}\nwixu{NW27XAxz-1Ang64-V}\nwixu{NW27XAxz-1Ang64-W}\nwixu{NW27XAxz-1Ang64-X}\nwixu{NW27XAxz-1Ang64-Y}\nwixu{NW27XAxz-1Ang64-Z}\nwixu{NW27XAxz-1Ang64-a}}}%
\nwixlogsorted{c}{{..register pool to poolable-connection factory and driver}{NW27XAxz-MaeyE-1}{\nwixu{NW27XAxz-33Wt2A-1}\nwixd{NW27XAxz-MaeyE-1}}}%
\nwixlogsorted{c}{{..remove jobs from pd, cpd}{NW27XAxz-2PX0wC-1}{\nwixu{NW27XAxz-lMiTm-1}\nwixd{NW27XAxz-2PX0wC-1}}}%
\nwixlogsorted{c}{{..set values for statement}{NW27XAxz-2m6DFc-1}{\nwixu{NW27XAxz-17Zt8W-1}\nwixd{NW27XAxz-2m6DFc-1}\nwixu{NW27XAxz-1ZE0ye-1}}}%
\nwixlogsorted{c}{{..update and add to schedule}{NW27XAxz-2VQLMF-1}{\nwixu{NW27XAxz-y828a-1}\nwixd{NW27XAxz-2VQLMF-1}}}%
\nwixlogsorted{c}{{..update edges cache}{NW27XAxz-4E7vbl-1}{\nwixu{NW27XAxz-3SpUqj-1}\nwixd{NW27XAxz-4E7vbl-1}}}%
\nwixlogsorted{c}{{..update route}{NW27XAxz-4LV9nl-1}{\nwixu{NW27XAxz-4VFddh-1}\nwixd{NW27XAxz-4LV9nl-1}\nwixu{NW27XAxz-y828a-1}\nwixu{NW27XAxz-lMiTm-1}}}%
\nwixlogsorted{c}{{..update schedule}{NW27XAxz-2NqWTJ-1}{\nwixu{NW27XAxz-4VFddh-1}\nwixd{NW27XAxz-2NqWTJ-1}\nwixu{NW27XAxz-lMiTm-1}}}%
\nwixlogsorted{c}{{\code{}Storage\edoc{} constructor}{NW27XAxz-36NvOs-1}{\nwixu{NW27XAxz-3TAldU-1}\nwixd{NW27XAxz-36NvOs-1}}}%
\nwixlogsorted{c}{{\code{}Storage\edoc{} definition}{NW27XAxz-3TAldU-1}{\nwixu{NW27XAxz-203Bbj-1}\nwixd{NW27XAxz-3TAldU-1}}}%
\nwixlogsorted{c}{{\code{}Storage\edoc{} member variables}{NW27XAxz-17yXws-1}{\nwixu{NW27XAxz-3TAldU-1}\nwixd{NW27XAxz-17yXws-1}\nwixd{NW27XAxz-17yXws-2}\nwixd{NW27XAxz-17yXws-3}\nwixd{NW27XAxz-17yXws-4}}}%
\nwixlogsorted{c}{{\code{}Storage\edoc{} private methods}{NW27XAxz-XGFF1-1}{\nwixu{NW27XAxz-3TAldU-1}\nwixd{NW27XAxz-XGFF1-1}}}%
\nwixlogsorted{c}{{\code{}Storage\edoc{} public methods}{NW27XAxz-4PbjF-1}{\nwixd{NW27XAxz-4PbjF-1}\nwixd{NW27XAxz-4PbjF-2}\nwixd{NW27XAxz-4PbjF-3}\nwixu{NW27XAxz-3TAldU-1}}}%
\nwixlogsorted{c}{{Add new edge}{NW27XAxz-1r65Fb-1}{\nwixu{NW27XAxz-4PbjF-2}\nwixd{NW27XAxz-1r65Fb-1}}}%
\nwixlogsorted{c}{{Add new request}{NW27XAxz-4ISWm4-1}{\nwixu{NW27XAxz-4PbjF-2}\nwixd{NW27XAxz-4ISWm4-1}}}%
\nwixlogsorted{c}{{Add new server}{NW27XAxz-IYVQQ-1}{\nwixu{NW27XAxz-4PbjF-2}\nwixd{NW27XAxz-IYVQQ-1}}}%
\nwixlogsorted{c}{{Add new vertex}{NW27XAxz-28BJIM-1}{\nwixu{NW27XAxz-4PbjF-2}\nwixd{NW27XAxz-28BJIM-1}}}%
\nwixlogsorted{c}{{Catch and print \code{}SQLException\edoc{}}{NW27XAxz-4P0tKA-1}{\nwixu{NW27XAxz-4P4YpK-1}\nwixu{NW27XAxz-b3Hn1-1}\nwixu{NW27XAxz-2OKmqF-1}\nwixu{NW27XAxz-1lVtry-1}\nwixd{NW27XAxz-4P0tKA-1}\nwixu{NW27XAxz-28BJIM-1}\nwixu{NW27XAxz-1r65Fb-1}\nwixu{NW27XAxz-3SpUqj-1}\nwixu{NW27XAxz-4ISWm4-1}\nwixu{NW27XAxz-IYVQQ-1}\nwixu{NW27XAxz-4VFddh-1}\nwixu{NW27XAxz-y828a-1}\nwixu{NW27XAxz-lMiTm-1}\nwixu{NW27XAxz-1MI9ro-1}\nwixu{NW27XAxz-3UaQCb-1}}}%
\nwixlogsorted{c}{{Catch and throw \code{}SQLException\edoc{}}{NW27XAxz-2x6EhZ-1}{\nwixd{NW27XAxz-2x6EhZ-1}\nwixu{NW27XAxz-4UQpM2-1}\nwixu{NW27XAxz-17Zt8W-1}\nwixu{NW27XAxz-1ZE0ye-1}\nwixu{NW27XAxz-322zJf-1}}}%
\nwixlogsorted{c}{{Create Table CPD statement}{NW27XAxz-q5ofx-1}{\nwixd{NW27XAxz-q5ofx-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table CQ statement}{NW27XAxz-2YsMAX-1}{\nwixd{NW27XAxz-2YsMAX-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table CW statement}{NW27XAxz-2HehGp-1}{\nwixd{NW27XAxz-2HehGp-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table E statement}{NW27XAxz-2WHSWQ-1}{\nwixd{NW27XAxz-2WHSWQ-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table PD statement}{NW27XAxz-1aGcZB-1}{\nwixd{NW27XAxz-1aGcZB-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table R statement}{NW27XAxz-Uo9HJ-1}{\nwixd{NW27XAxz-Uo9HJ-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table S statement}{NW27XAxz-2D0DN7-1}{\nwixd{NW27XAxz-2D0DN7-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table UB statement}{NW27XAxz-3QSM5L-1}{\nwixd{NW27XAxz-3QSM5L-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table UD statement}{NW27XAxz-1OVMyH-1}{\nwixd{NW27XAxz-1OVMyH-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table UE statement}{NW27XAxz-sBCgz-1}{\nwixd{NW27XAxz-sBCgz-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table UL statement}{NW27XAxz-3Q8NSk-1}{\nwixd{NW27XAxz-3Q8NSk-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table UO statement}{NW27XAxz-qCW00-1}{\nwixd{NW27XAxz-qCW00-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table UQ statement}{NW27XAxz-llmAG-1}{\nwixd{NW27XAxz-llmAG-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table V statement}{NW27XAxz-RzwV3-1}{\nwixd{NW27XAxz-RzwV3-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create Table W statement}{NW27XAxz-2FnbXJ-1}{\nwixd{NW27XAxz-2FnbXJ-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View assignments statement (Eq.~\ref{eq:assignments})}{NW27XAxz-4DFJnJ-1}{\nwixd{NW27XAxz-4DFJnJ-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View assignments\_r statement (Eq.~\ref{eq:assigned-requests})}{NW27XAxz-4Me5rv-1}{\nwixd{NW27XAxz-4Me5rv-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dist\_base statement (Eq.~\ref{eq:base-distance})}{NW27XAxz-Xwf4i-1}{\nwixd{NW27XAxz-Xwf4i-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dist\_r\_base statement}{NW27XAxz-2qZ1kZ-1}{\nwixd{NW27XAxz-2qZ1kZ-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dist\_r\_detour statement (Eq.~\ref{eq:detour-distance})}{NW27XAxz-4OnMrk-1}{\nwixd{NW27XAxz-4OnMrk-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dist\_r\_transit statement (Eq.~\ref{eq:transit-distance})}{NW27XAxz-eXH6J-1}{\nwixd{NW27XAxz-eXH6J-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dist\_s\_base statement}{NW27XAxz-15VZds-1}{\nwixd{NW27XAxz-15VZds-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dist\_s\_cruising statement (Eq.~\ref{eq:cruising-distance})}{NW27XAxz-sPBsa-1}{\nwixd{NW27XAxz-sPBsa-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dist\_s\_service statement (Eq.~\ref{eq:service-distance})}{NW27XAxz-21lyOa-1}{\nwixd{NW27XAxz-21lyOa-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dist\_s\_travel statement}{NW27XAxz-I0bnu-1}{\nwixd{NW27XAxz-I0bnu-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dur\_r\_pickup statement (Eq.~\ref{eq:pick-up delay})}{NW27XAxz-34NkTM-1}{\nwixd{NW27XAxz-34NkTM-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dur\_r\_transit statement (Eq.~\ref{eq:transit-duration})}{NW27XAxz-Puojq-1}{\nwixd{NW27XAxz-Puojq-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dur\_r\_travel statement (Eq.~\ref{eq:travel-duration})}{NW27XAxz-3a0WDv-1}{\nwixd{NW27XAxz-3a0WDv-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View dur\_s\_travel statement}{NW27XAxz-3sQlba-1}{\nwixd{NW27XAxz-3sQlba-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View f\_distance\_blocks statement}{NW27XAxz-2SQlWK-1}{\nwixd{NW27XAxz-2SQlWK-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View f\_status statement (Eq.~\ref{eq:status})}{NW27XAxz-qqtLb-1}{\nwixd{NW27XAxz-qqtLb-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View r\_server statement}{NW27XAxz-3E22nZ-1}{\nwixd{NW27XAxz-3E22nZ-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View r\_user statement}{NW27XAxz-35s8QT-1}{\nwixd{NW27XAxz-35s8QT-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View service\_rate statement (Eq.~\ref{eq:service-rate})}{NW27XAxz-3taWHj-1}{\nwixd{NW27XAxz-3taWHj-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View t\_r\_arrive statement (Eq.~\ref{eq:arrival-time})}{NW27XAxz-28E5sQ-1}{\nwixd{NW27XAxz-28E5sQ-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View t\_r\_depart statement (Eq.~\ref{eq:departure-time})}{NW27XAxz-45SyYZ-1}{\nwixd{NW27XAxz-45SyYZ-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View t\_s\_arrive statement (Eq.~\ref{eq:arrival-time})}{NW27XAxz-3oL4CY-1}{\nwixd{NW27XAxz-3oL4CY-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Create View t\_s\_depart statement (Eq.~\ref{eq:departure-time})}{NW27XAxz-2riY0r-1}{\nwixd{NW27XAxz-2riY0r-1}\nwixu{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Fetch items from database}{NW27XAxz-17Zt8W-1}{\nwixu{NW27XAxz-XGFF1-1}\nwixd{NW27XAxz-17Zt8W-1}}}%
\nwixlogsorted{c}{{Fill prepared statement}{NW27XAxz-1ZE0ye-1}{\nwixu{NW27XAxz-XGFF1-1}\nwixd{NW27XAxz-1ZE0ye-1}}}%
\nwixlogsorted{c}{{Initialize statements}{NW27XAxz-1g2xnv-1}{\nwixu{NW27XAxz-XGFF1-1}\nwixd{NW27XAxz-1g2xnv-1}}}%
\nwixlogsorted{c}{{Load backup}{NW27XAxz-b3Hn1-1}{\nwixu{NW27XAxz-4PbjF-1}\nwixd{NW27XAxz-b3Hn1-1}}}%
\nwixlogsorted{c}{{Load data model}{NW27XAxz-4P4YpK-1}{\nwixu{NW27XAxz-4PbjF-1}\nwixd{NW27XAxz-4P4YpK-1}}}%
\nwixlogsorted{c}{{Prepare a prepared statement}{NW27XAxz-4UQpM2-1}{\nwixu{NW27XAxz-XGFF1-1}\nwixd{NW27XAxz-4UQpM2-1}}}%
\nwixlogsorted{c}{{Print a message}{NW27XAxz-2wEn3G-1}{\nwixu{NW27XAxz-XGFF1-1}\nwixd{NW27XAxz-2wEn3G-1}}}%
\nwixlogsorted{c}{{Print SQL driver statistics}{NW27XAxz-1lVtry-1}{\nwixu{NW27XAxz-4PbjF-1}\nwixd{NW27XAxz-1lVtry-1}}}%
\nwixlogsorted{c}{{Print SQL exception}{NW27XAxz-31QNBg-1}{\nwixu{NW27XAxz-4PbjF-1}\nwixd{NW27XAxz-31QNBg-1}}}%
\nwixlogsorted{c}{{Procedure to insert \code{}route\edoc{} into Table W}{NW27XAxz-1EP7t-1}{\nwixu{NW27XAxz-3xg8Fp-1}\nwixd{NW27XAxz-1EP7t-1}\nwixu{NW27XAxz-2BaQBV-1}}}%
\nwixlogsorted{c}{{Query active server locations}{NW27XAxz-3UaQCb-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-3UaQCb-1}}}%
\nwixlogsorted{c}{{Query all server locations}{NW27XAxz-rvb17-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-rvb17-1}}}%
\nwixlogsorted{c}{{Query current load}{NW27XAxz-aKbeg-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-aKbeg-1}}}%
\nwixlogsorted{c}{{Query custom statement}{NW27XAxz-2FtqIZ-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-2FtqIZ-1}}}%
\nwixlogsorted{c}{{Query queued requests}{NW27XAxz-3AGrxZ-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-3AGrxZ-1}}}%
\nwixlogsorted{c}{{Query request status}{NW27XAxz-1hFvVm-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-1hFvVm-1}}}%
\nwixlogsorted{c}{{Query ridesharing user}{NW27XAxz-3isdeu-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-3isdeu-1}\nwixd{NW27XAxz-3isdeu-2}}}%
\nwixlogsorted{c}{{Query routes}{NW27XAxz-1AprqI-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-1AprqI-1}\nwixd{NW27XAxz-1AprqI-2}}}%
\nwixlogsorted{c}{{Query schedules}{NW27XAxz-3yA8FQ-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-3yA8FQ-1}\nwixd{NW27XAxz-3yA8FQ-2}}}%
\nwixlogsorted{c}{{Query various metrics}{NW27XAxz-1Ang64-1}{\nwixu{NW27XAxz-4PbjF-3}\nwixd{NW27XAxz-1Ang64-1}\nwixd{NW27XAxz-1Ang64-2}\nwixd{NW27XAxz-1Ang64-3}\nwixd{NW27XAxz-1Ang64-4}\nwixd{NW27XAxz-1Ang64-5}\nwixd{NW27XAxz-1Ang64-6}\nwixd{NW27XAxz-1Ang64-7}\nwixd{NW27XAxz-1Ang64-8}\nwixd{NW27XAxz-1Ang64-9}\nwixd{NW27XAxz-1Ang64-A}\nwixd{NW27XAxz-1Ang64-B}\nwixd{NW27XAxz-1Ang64-C}\nwixd{NW27XAxz-1Ang64-D}\nwixd{NW27XAxz-1Ang64-E}\nwixd{NW27XAxz-1Ang64-F}\nwixd{NW27XAxz-1Ang64-G}\nwixd{NW27XAxz-1Ang64-H}\nwixd{NW27XAxz-1Ang64-I}\nwixd{NW27XAxz-1Ang64-J}\nwixd{NW27XAxz-1Ang64-K}\nwixd{NW27XAxz-1Ang64-L}\nwixd{NW27XAxz-1Ang64-M}\nwixd{NW27XAxz-1Ang64-N}\nwixd{NW27XAxz-1Ang64-O}\nwixd{NW27XAxz-1Ang64-P}\nwixd{NW27XAxz-1Ang64-Q}\nwixd{NW27XAxz-1Ang64-R}\nwixd{NW27XAxz-1Ang64-S}\nwixd{NW27XAxz-1Ang64-T}\nwixd{NW27XAxz-1Ang64-U}\nwixd{NW27XAxz-1Ang64-V}\nwixd{NW27XAxz-1Ang64-W}\nwixd{NW27XAxz-1Ang64-X}\nwixd{NW27XAxz-1Ang64-Y}\nwixd{NW27XAxz-1Ang64-Z}\nwixd{NW27XAxz-1Ang64-a}}}%
\nwixlogsorted{c}{{S0}{NW27XAxz-9czRY-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-9czRY-1}}}%
\nwixlogsorted{c}{{S1}{NW27XAxz-4dnsum-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4dnsum-1}}}%
\nwixlogsorted{c}{{S10}{NW27XAxz-96fbA-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-96fbA-1}}}%
\nwixlogsorted{c}{{S100}{NW27XAxz-yxMXz-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-yxMXz-1}}}%
\nwixlogsorted{c}{{S101}{NW27XAxz-3WmKrr-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3WmKrr-1}}}%
\nwixlogsorted{c}{{S102}{NW27XAxz-1RuRoZ-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-1RuRoZ-1}}}%
\nwixlogsorted{c}{{S103}{NW27XAxz-3POlUB-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3POlUB-1}}}%
\nwixlogsorted{c}{{S104}{NW27XAxz-A9AGR-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-A9AGR-1}}}%
\nwixlogsorted{c}{{S105}{NW27XAxz-4eK3jf-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4eK3jf-1}}}%
\nwixlogsorted{c}{{S106}{NW27XAxz-25vt9f-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-25vt9f-1}}}%
\nwixlogsorted{c}{{S107}{NW27XAxz-2TmC55-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-2TmC55-1}}}%
\nwixlogsorted{c}{{S108}{NW27XAxz-mtPWF-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-mtPWF-1}}}%
\nwixlogsorted{c}{{S109}{NW27XAxz-448CeR-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-448CeR-1}}}%
\nwixlogsorted{c}{{S11}{NW27XAxz-4dHZ4O-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4dHZ4O-1}}}%
\nwixlogsorted{c}{{S110}{NW27XAxz-yTwJX-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-yTwJX-1}}}%
\nwixlogsorted{c}{{S111}{NW27XAxz-3WIudP-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3WIudP-1}}}%
\nwixlogsorted{c}{{S112}{NW27XAxz-1SZQ6N-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-1SZQ6N-1}}}%
\nwixlogsorted{c}{{S113}{NW27XAxz-3Q3jlz-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3Q3jlz-1}}}%
\nwixlogsorted{c}{{S114}{NW27XAxz-96Xlr-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-96Xlr-1}}}%
\nwixlogsorted{c}{{S115}{NW27XAxz-4dHRF5-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4dHRF5-1}}}%
\nwixlogsorted{c}{{S116}{NW27XAxz-261fBL-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-261fBL-1}}}%
\nwixlogsorted{c}{{S117}{NW27XAxz-2Try6l-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-2Try6l-1}}}%
\nwixlogsorted{c}{{S118}{NW27XAxz-npyw7-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-npyw7-1}}}%
\nwixlogsorted{c}{{S119}{NW27XAxz-454m4J-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-454m4J-1}}}%
\nwixlogsorted{c}{{S12}{NW27XAxz-261n0e-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-261n0e-1}}}%
\nwixlogsorted{c}{{S120}{NW27XAxz-z4eLL-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-z4eLL-1}}}%
\nwixlogsorted{c}{{S121}{NW27XAxz-3WtcfD-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3WtcfD-1}}}%
\nwixlogsorted{c}{{S122}{NW27XAxz-1S1jbv-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-1S1jbv-1}}}%
\nwixlogsorted{c}{{S123}{NW27XAxz-3PW3HX-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3PW3HX-1}}}%
\nwixlogsorted{c}{{S124}{NW27XAxz-9hFnf-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-9hFnf-1}}}%
\nwixlogsorted{c}{{S125}{NW27XAxz-4ds9Gt-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4ds9Gt-1}}}%
\nwixlogsorted{c}{{S126}{NW27XAxz-25Tygt-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-25Tygt-1}}}%
\nwixlogsorted{c}{{S127}{NW27XAxz-2TKHcJ-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-2TKHcJ-1}}}%
\nwixlogsorted{c}{{S128}{NW27XAxz-nIIRf-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-nIIRf-1}}}%
\nwixlogsorted{c}{{S129}{NW27XAxz-44X5Zr-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-44X5Zr-1}}}%
\nwixlogsorted{c}{{S13}{NW27XAxz-2Ts5w4-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-2Ts5w4-1}}}%
\nwixlogsorted{c}{{S130}{NW27XAxz-ySQXr-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-ySQXr-1}}}%
\nwixlogsorted{c}{{S131}{NW27XAxz-3WHOrj-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3WHOrj-1}}}%
\nwixlogsorted{c}{{S133}{NW27XAxz-3Q2E0J-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3Q2E0J-1}}}%
\nwixlogsorted{c}{{S134}{NW27XAxz-9eEGJ-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-9eEGJ-1}}}%
\nwixlogsorted{c}{{S135}{NW27XAxz-4dp7jX-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4dp7jX-1}}}%
\nwixlogsorted{c}{{S14}{NW27XAxz-yU48q-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-yU48q-1}}}%
\nwixlogsorted{c}{{S15}{NW27XAxz-3WJ2Si-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3WJ2Si-1}}}%
\nwixlogsorted{c}{{S2}{NW27XAxz-26Y6r2-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-26Y6r2-1}}}%
\nwixlogsorted{c}{{S3}{NW27XAxz-2UOPmS-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-2UOPmS-1}}}%
\nwixlogsorted{c}{{S4}{NW27XAxz-yRBj6-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-yRBj6-1}}}%
\nwixlogsorted{c}{{S42}{NW27XAxz-25mK0a-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-25mK0a-1}}}%
\nwixlogsorted{c}{{S43}{NW27XAxz-2Tccw0-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-2Tccw0-1}}}%
\nwixlogsorted{c}{{S46}{NW27XAxz-1RksfU-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-1RksfU-1}}}%
\nwixlogsorted{c}{{S48}{NW27XAxz-PSjhs-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-PSjhs-1}}}%
\nwixlogsorted{c}{{S5}{NW27XAxz-3WGA2y-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3WGA2y-1}}}%
\nwixlogsorted{c}{{S51}{NW27XAxz-4dVWIm-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4dVWIm-1}}}%
\nwixlogsorted{c}{{S59}{NW27XAxz-4APdTA-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4APdTA-1}}}%
\nwixlogsorted{c}{{S6}{NW27XAxz-1SWfVw-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-1SWfVw-1}}}%
\nwixlogsorted{c}{{S60}{NW27XAxz-9tgZA-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-9tgZA-1}}}%
\nwixlogsorted{c}{{S61}{NW27XAxz-4e4a2O-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4e4a2O-1}}}%
\nwixlogsorted{c}{{S62}{NW27XAxz-25gPSO-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-25gPSO-1}}}%
\nwixlogsorted{c}{{S63}{NW27XAxz-2TWiNo-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-2TWiNo-1}}}%
\nwixlogsorted{c}{{S64}{NW27XAxz-zH56q-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-zH56q-1}}}%
\nwixlogsorted{c}{{S65}{NW27XAxz-3X63Qi-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3X63Qi-1}}}%
\nwixlogsorted{c}{{S66}{NW27XAxz-1SEANQ-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-1SEANQ-1}}}%
\nwixlogsorted{c}{{S67}{NW27XAxz-3PiU32-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3PiU32-1}}}%
\nwixlogsorted{c}{{S68}{NW27XAxz-P5E1c-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-P5E1c-1}}}%
\nwixlogsorted{c}{{S69}{NW27XAxz-49qIgW-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-49qIgW-1}}}%
\nwixlogsorted{c}{{S7}{NW27XAxz-3Q0zBY-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3Q0zBY-1}}}%
\nwixlogsorted{c}{{S70}{NW27XAxz-9NVqO-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-9NVqO-1}}}%
\nwixlogsorted{c}{{S73}{NW27XAxz-2U8wBI-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-2U8wBI-1}}}%
\nwixlogsorted{c}{{S75}{NW27XAxz-3W0gRo-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3W0gRo-1}}}%
\nwixlogsorted{c}{{S76}{NW27XAxz-1SHBum-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-1SHBum-1}}}%
\nwixlogsorted{c}{{S77}{NW27XAxz-3PlVaO-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3PlVaO-1}}}%
\nwixlogsorted{c}{{S8}{NW27XAxz-PwvQG-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-PwvQG-1}}}%
\nwixlogsorted{c}{{S80}{NW27XAxz-A8qO4-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-A8qO4-1}}}%
\nwixlogsorted{c}{{S82}{NW27XAxz-25vZHI-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-25vZHI-1}}}%
\nwixlogsorted{c}{{S83}{NW27XAxz-2TlsCi-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-2TlsCi-1}}}%
\nwixlogsorted{c}{{S84}{NW27XAxz-yx2fc-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-yx2fc-1}}}%
\nwixlogsorted{c}{{S85}{NW27XAxz-3Wm0zU-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3Wm0zU-1}}}%
\nwixlogsorted{c}{{S86}{NW27XAxz-1Ru7wC-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-1Ru7wC-1}}}%
\nwixlogsorted{c}{{S87}{NW27XAxz-3PORbo-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-3PORbo-1}}}%
\nwixlogsorted{c}{{S9}{NW27XAxz-4Ai05A-1}{\nwixu{NW27XAxz-1g2xnv-1}\nwixd{NW27XAxz-4Ai05A-1}}}%
\nwixlogsorted{c}{{Save backup}{NW27XAxz-2OKmqF-1}{\nwixu{NW27XAxz-4PbjF-1}\nwixd{NW27XAxz-2OKmqF-1}}}%
\nwixlogsorted{c}{{Setup JDBC driver}{NW27XAxz-33Wt2A-1}{\nwixu{NW27XAxz-XGFF1-1}\nwixd{NW27XAxz-33Wt2A-1}}}%
\nwixlogsorted{c}{{Storage.java}{NW27XAxz-203Bbj-1}{\nwixd{NW27XAxz-203Bbj-1}}}%
\nwixlogsorted{c}{{Storage.java preamble}{NW27XAxz-FkGTW-1}{\nwixu{NW27XAxz-203Bbj-1}\nwixd{NW27XAxz-FkGTW-1}\nwixd{NW27XAxz-FkGTW-2}\nwixd{NW27XAxz-FkGTW-3}\nwixd{NW27XAxz-FkGTW-4}\nwixd{NW27XAxz-FkGTW-5}}}%
\nwixlogsorted{c}{{Submit prepared statement batch}{NW27XAxz-322zJf-1}{\nwixu{NW27XAxz-XGFF1-1}\nwixd{NW27XAxz-322zJf-1}}}%
\nwixlogsorted{c}{{Update edge speed}{NW27XAxz-3SpUqj-1}{\nwixu{NW27XAxz-4PbjF-2}\nwixd{NW27XAxz-3SpUqj-1}}}%
\nwixlogsorted{c}{{Update server add to schedule}{NW27XAxz-y828a-1}{\nwixu{NW27XAxz-4PbjF-2}\nwixd{NW27XAxz-y828a-1}}}%
\nwixlogsorted{c}{{Update server remove from schedule}{NW27XAxz-lMiTm-1}{\nwixu{NW27XAxz-4PbjF-2}\nwixd{NW27XAxz-lMiTm-1}}}%
\nwixlogsorted{c}{{Update server route}{NW27XAxz-4VFddh-1}{\nwixu{NW27XAxz-4PbjF-2}\nwixd{NW27XAxz-4VFddh-1}}}%
\nwixlogsorted{i}{{CONNECTIONS{\char95}DRIVER{\char95}URL}{CONNECTIONS:unDRIVER:unURL}}%
\nwixlogsorted{i}{{CONNECTIONS{\char95}POOL{\char95}NAME}{CONNECTIONS:unPOOL:unNAME}}%
\nwixlogsorted{i}{{CONNECTIONS{\char95}URL}{CONNECTIONS:unURL}}%
\nwixlogsorted{i}{{DBAddNewEdge}{DBAddNewEdge}}%
\nwixlogsorted{i}{{DBAddNewRequest}{DBAddNewRequest}}%
\nwixlogsorted{i}{{DBAddNewServer}{DBAddNewServer}}%
\nwixlogsorted{i}{{DBAddNewVertex}{DBAddNewVertex}}%
\nwixlogsorted{i}{{DBFetch}{DBFetch}}%
\nwixlogsorted{i}{{DBLoadBackup}{DBLoadBackup}}%
\nwixlogsorted{i}{{DBLoadDataModel}{DBLoadDataModel}}%
\nwixlogsorted{i}{{DBQueryBaseDistanceTotal}{DBQueryBaseDistanceTotal}}%
\nwixlogsorted{i}{{DBQueryCountEdges}{DBQueryCountEdges}}%
\nwixlogsorted{i}{{DBQueryCountRequests}{DBQueryCountRequests}}%
\nwixlogsorted{i}{{DBQueryCountServers}{DBQueryCountServers}}%
\nwixlogsorted{i}{{DBQueryCountVertices}{DBQueryCountVertices}}%
\nwixlogsorted{i}{{DBQueryCurrentLoad}{DBQueryCurrentLoad}}%
\nwixlogsorted{i}{{DBQueryEdge}{DBQueryEdge}}%
\nwixlogsorted{i}{{DBQueryMBR}{DBQueryMBR}}%
\nwixlogsorted{i}{{DBQueryQueuedRequests}{DBQueryQueuedRequests}}%
\nwixlogsorted{i}{{DBQueryRequest}{DBQueryRequest}}%
\nwixlogsorted{i}{{DBQueryRequestArrivalTime}{DBQueryRequestArrivalTime}}%
\nwixlogsorted{i}{{DBQueryRequestBaseDistanceTotal}{DBQueryRequestBaseDistanceTotal}}%
\nwixlogsorted{i}{{DBQueryRequestDepartureTime}{DBQueryRequestDepartureTime}}%
\nwixlogsorted{i}{{DBQueryRequestDetourDistance}{DBQueryRequestDetourDistance}}%
\nwixlogsorted{i}{{DBQueryRequestDetourDistanceTotal}{DBQueryRequestDetourDistanceTotal}}%
\nwixlogsorted{i}{{DBQueryRequestPickupDuration}{DBQueryRequestPickupDuration}}%
\nwixlogsorted{i}{{DBQueryRequestPickupDurationTotal}{DBQueryRequestPickupDurationTotal}}%
\nwixlogsorted{i}{{DBQueryRequestStatus}{DBQueryRequestStatus}}%
\nwixlogsorted{i}{{DBQueryRequestTransitDistance}{DBQueryRequestTransitDistance}}%
\nwixlogsorted{i}{{DBQueryRequestTransitDistanceTotal}{DBQueryRequestTransitDistanceTotal}}%
\nwixlogsorted{i}{{DBQueryRequestTransitDuration}{DBQueryRequestTransitDuration}}%
\nwixlogsorted{i}{{DBQueryRequestTransitDurationTotal}{DBQueryRequestTransitDurationTotal}}%
\nwixlogsorted{i}{{DBQueryRequestTravelDuration}{DBQueryRequestTravelDuration}}%
\nwixlogsorted{i}{{DBQueryRequestTravelDurationTotal}{DBQueryRequestTravelDurationTotal}}%
\nwixlogsorted{i}{{DBQueryRoute}{DBQueryRoute}}%
\nwixlogsorted{i}{{DBQueryRouteRemaining}{DBQueryRouteRemaining}}%
\nwixlogsorted{i}{{DBQuerySchedule}{DBQuerySchedule}}%
\nwixlogsorted{i}{{DBQueryScheduleRemaining}{DBQueryScheduleRemaining}}%
\nwixlogsorted{i}{{DBQueryServer}{DBQueryServer}}%
\nwixlogsorted{i}{{DBQueryServerArrivalTime}{DBQueryServerArrivalTime}}%
\nwixlogsorted{i}{{DBQueryServerBaseDistanceTotal}{DBQueryServerBaseDistanceTotal}}%
\nwixlogsorted{i}{{DBQueryServerCompletedAssignments}{DBQueryServerCompletedAssignments}}%
\nwixlogsorted{i}{{DBQueryServerCruisingDistance}{DBQueryServerCruisingDistance}}%
\nwixlogsorted{i}{{DBQueryServerCruisingDistanceTotal}{DBQueryServerCruisingDistanceTotal}}%
\nwixlogsorted{i}{{DBQueryServerDepartureTime}{DBQueryServerDepartureTime}}%
\nwixlogsorted{i}{{DBQueryServerLocationsActive}{DBQueryServerLocationsActive}}%
\nwixlogsorted{i}{{DBQueryServerLocationsAll}{DBQueryServerLocationsAll}}%
\nwixlogsorted{i}{{DBQueryServerPendingAssignments}{DBQueryServerPendingAssignments}}%
\nwixlogsorted{i}{{DBQueryServerServiceDistance}{DBQueryServerServiceDistance}}%
\nwixlogsorted{i}{{DBQueryServerServiceDistanceTotal}{DBQueryServerServiceDistanceTotal}}%
\nwixlogsorted{i}{{DBQueryServerTravelDistance}{DBQueryServerTravelDistance}}%
\nwixlogsorted{i}{{DBQueryServerTravelDistanceTotal}{DBQueryServerTravelDistanceTotal}}%
\nwixlogsorted{i}{{DBQueryServerTravelDuration}{DBQueryServerTravelDuration}}%
\nwixlogsorted{i}{{DBQueryServerTravelDurationTotal}{DBQueryServerTravelDurationTotal}}%
\nwixlogsorted{i}{{DBQueryServiceRate}{DBQueryServiceRate}}%
\nwixlogsorted{i}{{DBQueryStatisticsEdges}{DBQueryStatisticsEdges}}%
\nwixlogsorted{i}{{DBQueryVertex}{DBQueryVertex}}%
\nwixlogsorted{i}{{DBSaveBackup}{DBSaveBackup}}%
\nwixlogsorted{i}{{DBUpdateEdgeSpeed}{DBUpdateEdgeSpeed}}%
\nwixlogsorted{i}{{DBUpdateServerAddToSchedule}{DBUpdateServerAddToSchedule}}%
\nwixlogsorted{i}{{DBUpdateServerRemoveFromSchedule}{DBUpdateServerRemoveFromSchedule}}%
\nwixlogsorted{i}{{DBUpdateServerRoute}{DBUpdateServerRoute}}%
\nwixlogsorted{i}{{DERBY{\char95}DUMPNAME}{DERBY:unDUMPNAME}}%
\nwixlogsorted{i}{{DERBY{\char95}PAGECACHESIZE}{DERBY:unPAGECACHESIZE}}%
\nwixlogsorted{i}{{lu{\char95}edges}{lu:unedges}}%
\nwixlogsorted{i}{{lu{\char95}vertices}{lu:unvertices}}%
\nwixlogsorted{i}{{Print}{Print}}%
\nwixlogsorted{i}{{printSQLDriverStatistics}{printSQLDriverStatistics}}%
\nwixlogsorted{i}{{printSQLException}{printSQLException}}%
\nwixlogsorted{i}{{PS}{PS}}%
\nwixlogsorted{i}{{PSAdd}{PSAdd}}%
\nwixlogsorted{i}{{PSInit}{PSInit}}%
\nwixlogsorted{i}{{PSSubmit}{PSSubmit}}%
\nwixlogsorted{i}{{pstr}{pstr}}%
\nwixlogsorted{i}{{S0}{S0}}%
\nwixlogsorted{i}{{S1}{S1}}%
\nwixlogsorted{i}{{S10}{S10}}%
\nwixlogsorted{i}{{S100}{S100}}%
\nwixlogsorted{i}{{S101}{S101}}%
\nwixlogsorted{i}{{S102}{S102}}%
\nwixlogsorted{i}{{S103}{S103}}%
\nwixlogsorted{i}{{S104}{S104}}%
\nwixlogsorted{i}{{S105}{S105}}%
\nwixlogsorted{i}{{S106}{S106}}%
\nwixlogsorted{i}{{S107}{S107}}%
\nwixlogsorted{i}{{S108}{S108}}%
\nwixlogsorted{i}{{S109}{S109}}%
\nwixlogsorted{i}{{S11}{S11}}%
\nwixlogsorted{i}{{S110}{S110}}%
\nwixlogsorted{i}{{S111}{S111}}%
\nwixlogsorted{i}{{S112}{S112}}%
\nwixlogsorted{i}{{S113}{S113}}%
\nwixlogsorted{i}{{S114}{S114}}%
\nwixlogsorted{i}{{S115}{S115}}%
\nwixlogsorted{i}{{S116}{S116}}%
\nwixlogsorted{i}{{S117}{S117}}%
\nwixlogsorted{i}{{S118}{S118}}%
\nwixlogsorted{i}{{S119}{S119}}%
\nwixlogsorted{i}{{S12}{S12}}%
\nwixlogsorted{i}{{S120}{S120}}%
\nwixlogsorted{i}{{S121}{S121}}%
\nwixlogsorted{i}{{S122}{S122}}%
\nwixlogsorted{i}{{S123}{S123}}%
\nwixlogsorted{i}{{S124}{S124}}%
\nwixlogsorted{i}{{S125}{S125}}%
\nwixlogsorted{i}{{S126}{S126}}%
\nwixlogsorted{i}{{S127}{S127}}%
\nwixlogsorted{i}{{S128}{S128}}%
\nwixlogsorted{i}{{S129}{S129}}%
\nwixlogsorted{i}{{S13}{S13}}%
\nwixlogsorted{i}{{S130}{S130}}%
\nwixlogsorted{i}{{S131}{S131}}%
\nwixlogsorted{i}{{S133}{S133}}%
\nwixlogsorted{i}{{S134}{S134}}%
\nwixlogsorted{i}{{S135}{S135}}%
\nwixlogsorted{i}{{S14}{S14}}%
\nwixlogsorted{i}{{S15}{S15}}%
\nwixlogsorted{i}{{S2}{S2}}%
\nwixlogsorted{i}{{S3}{S3}}%
\nwixlogsorted{i}{{S4}{S4}}%
\nwixlogsorted{i}{{S42}{S42}}%
\nwixlogsorted{i}{{S43}{S43}}%
\nwixlogsorted{i}{{S46}{S46}}%
\nwixlogsorted{i}{{S48}{S48}}%
\nwixlogsorted{i}{{S5}{S5}}%
\nwixlogsorted{i}{{S51}{S51}}%
\nwixlogsorted{i}{{S59}{S59}}%
\nwixlogsorted{i}{{S6}{S6}}%
\nwixlogsorted{i}{{S60}{S60}}%
\nwixlogsorted{i}{{S61}{S61}}%
\nwixlogsorted{i}{{S62}{S62}}%
\nwixlogsorted{i}{{S63}{S63}}%
\nwixlogsorted{i}{{S64}{S64}}%
\nwixlogsorted{i}{{S65}{S65}}%
\nwixlogsorted{i}{{S66}{S66}}%
\nwixlogsorted{i}{{S67}{S67}}%
\nwixlogsorted{i}{{S68}{S68}}%
\nwixlogsorted{i}{{S69}{S69}}%
\nwixlogsorted{i}{{S7}{S7}}%
\nwixlogsorted{i}{{S70}{S70}}%
\nwixlogsorted{i}{{S73}{S73}}%
\nwixlogsorted{i}{{S75}{S75}}%
\nwixlogsorted{i}{{S76}{S76}}%
\nwixlogsorted{i}{{S77}{S77}}%
\nwixlogsorted{i}{{S8}{S8}}%
\nwixlogsorted{i}{{S80}{S80}}%
\nwixlogsorted{i}{{S82}{S82}}%
\nwixlogsorted{i}{{S83}{S83}}%
\nwixlogsorted{i}{{S84}{S84}}%
\nwixlogsorted{i}{{S85}{S85}}%
\nwixlogsorted{i}{{S86}{S86}}%
\nwixlogsorted{i}{{S87}{S87}}%
\nwixlogsorted{i}{{S9}{S9}}%
\nwixlogsorted{i}{{setupDriver}{setupDriver}}%
\nwixlogsorted{i}{{STATEMENTS{\char95}MAX{\char95}COUNT}{STATEMENTS:unMAX:unCOUNT}}%
\nwixlogsorted{i}{{VERSION}{VERSION}}%
\nwbegindocs{389}\nwdocspar
\appendix

\section{Appendix: List of Chunks}
\label{ap:list-of-chunks}
\nowebchunks

\section{Appendix: List of Identifiers}
\label{ap:list-of-identifiers}
\nowebindex

\end{document}

\nwenddocs{}
